[{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\public\\pdf.worker.min.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\App.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'supabase' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":28,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"supabase"},"fix":{"range":[1578,1620],"text":""},"desc":"Remove unused variable 'supabase'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\r\nimport { lazy, Suspense } from 'react';\r\nimport Landing from './pages/Landing';\r\nimport Pricing from './pages/Pricing';\r\nimport BlogList from './pages/Blog/BlogList';\r\nimport BlogPost from './pages/Blog/BlogPost';\r\nimport { DashboardLayout } from './components/layout/DashboardLayout';\r\nimport DashboardHome from './pages/Dashboard/DashboardHome';\r\nimport DashboardDocuments from './pages/Dashboard/DashboardDocuments';\r\nimport DashboardSettings from './pages/Dashboard/DashboardSettings';\r\nimport Billing from './pages/Dashboard/Billing';\r\nconst TimetableGenerator = lazy(() => import('./pages/Dashboard/TimetableGenerator/TimetableGenerator'));\r\nimport EditorPage from './pages/Editor/EditorPage';\r\nimport Login from './pages/Auth/Login';\r\nimport Signup from './pages/Auth/Signup';\r\nimport ForgotPassword from './pages/Auth/ForgotPassword';\r\nimport ResetPassword from './pages/Auth/ResetPassword';\r\nimport AuthCallback from './pages/Auth/AuthCallback';\r\nimport { ToastProvider } from './context/ToastContext';\r\nimport { AuthProvider } from './context/AuthContext';\r\nimport { ThemeProvider } from './context/ThemeContext';\r\nimport { ProtectedRoute, PublicRoute, AdminOnlyRoute } from './components/ProtectedRoute';\r\nimport { FloatingDocuments } from './components/ui/FloatingDocuments';\r\nimport { PWAInstallPrompt } from './components/ui/PWAInstallPrompt';\r\nimport { Loader2 } from 'lucide-react';\r\nimport MaintenancePage from './pages/MaintenancePage';\r\nimport { useState, useEffect } from 'react';\r\nimport { supabase } from './lib/supabase';\r\nimport { useAuth } from './context/AuthContext';\r\nimport apiClient from './api/client';\r\n\r\n// Lazy-loaded Admin components (code splitting)\r\nconst AdminLayout = lazy(() => import('./layouts/AdminLayout').then(m => ({ default: m.AdminLayout })));\r\nconst AdminDashboard = lazy(() => import('./pages/Admin/AdminDashboard'));\r\nconst BlogManager = lazy(() => import('./pages/Admin/BlogManager'));\r\nconst BlogPostEditor = lazy(() => import('./pages/Admin/BlogPostEditor'));\r\nconst UsersManager = lazy(() => import('./pages/Admin/UsersManager'));\r\nconst AdminSettings = lazy(() => import('./pages/Admin/AdminSettings'));\r\nconst FeedbackManager = lazy(() => import('./pages/Admin/FeedbackManager'));\r\n\r\n// Loading fallback for lazy-loaded components\r\nfunction LoadingFallback() {\r\n  return (\r\n    <div className=\"min-h-screen bg-slate-50 flex items-center justify-center\">\r\n      <div className=\"text-center\">\r\n        <Loader2 className=\"h-8 w-8 text-orange-500 animate-spin mx-auto\" />\r\n        <p className=\"mt-4 text-slate-600 text-sm\">Loading...</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Maintenance Guard Component\r\nfunction MaintenanceGuard({ children }) {\r\n  // 1. All hooks at the VERY top\r\n  const { isInitializing, isAdmin, serverError } = useAuth();\r\n  const [isMaintenance, setIsMaintenance] = useState(false);\r\n  const [isSettingsLoading, setIsSettingsLoading] = useState(true);\r\n  const [connectivityError, setConnectivityError] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const checkMaintenance = async () => {\r\n      try {\r\n        const response = await apiClient.get('/maintenance');\r\n        setIsMaintenance(response.data.maintenance_active);\r\n        setConnectivityError(false);\r\n      } catch (err) {\r\n        console.error('Error checking maintenance mode:', err);\r\n        // Only show connectivity error for actual network failures or 500s\r\n        // (401 is handled by client.js interceptor)\r\n        if (!err.response || err.response.status >= 500) {\r\n          setConnectivityError(true);\r\n        }\r\n      } finally {\r\n        setIsSettingsLoading(false);\r\n      }\r\n    };\r\n\r\n    checkMaintenance();\r\n\r\n    // Re-check every 5 minutes if not in real-time\r\n    const interval = setInterval(checkMaintenance, 5 * 60 * 1000);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  // 2. No early returns before the hooks above\r\n\r\n  // Show a simple skeleton while initializing (covers both auth and settings)\r\n  if (isInitializing || isSettingsLoading) {\r\n    if (serverError || connectivityError) {\r\n      return <ServerUnreachableOverlay />;\r\n    }\r\n    return <InitializingSkeleton />;\r\n  }\r\n\r\n  // Final catch for connectivity error even after initialization\r\n  if (connectivityError && !isAdmin) {\r\n    return <ServerUnreachableOverlay />;\r\n  }\r\n\r\n  // If maintenance is on and user is not admin, show maintenance page\r\n  if (isMaintenance && !isAdmin) {\r\n    return <MaintenancePage />;\r\n  }\r\n\r\n  return children;\r\n}\r\n\r\n// Minimal initialization screen\r\nfunction InitializingSkeleton() {\r\n  return (\r\n    <div className=\"min-h-screen bg-slate-50 flex items-center justify-center\">\r\n      <div className=\"w-full max-w-xs space-y-4 px-4\">\r\n        <div className=\"h-2 w-full bg-slate-200 rounded-full overflow-hidden\">\r\n          <div className=\"h-full bg-indigo-500 animate-[progress_2s_ease-in-out_infinite]\" style={{ width: '40%' }}></div>\r\n        </div>\r\n        <p className=\"text-center text-slate-400 text-xs font-medium uppercase tracking-widest\">Docley is Preparing...</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Server Unreachable Overlay\r\nfunction ServerUnreachableOverlay() {\r\n  return (\r\n    <div className=\"min-h-screen bg-slate-900 flex items-center justify-center p-4\">\r\n      <div className=\"bg-white dark:bg-slate-900 p-8 rounded-2xl shadow-2xl border-2 border-orange-500 max-w-md text-center\">\r\n        <div className=\"bg-orange-100 dark:bg-orange-900/30 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n          <Loader2 className=\"h-8 w-8 text-orange-600 animate-pulse\" />\r\n        </div>\r\n        <h2 className=\"text-xl font-bold text-slate-900 dark:text-white mb-2 font-display\">Server Unreachable</h2>\r\n        <p className=\"text-slate-500 dark:text-slate-400 mb-6 text-sm leading-relaxed\">\r\n          We're having trouble connecting to the Docley engine. This usually happens during a quick update or if your connection is unstable.\r\n        </p>\r\n        <button\r\n          onClick={() => window.location.reload()}\r\n          className=\"w-full py-3 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl text-sm font-bold shadow-lg transform transition-all active:scale-[0.98] hover:scale-[1.02]\"\r\n        >\r\n          Check Connectivity\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction App() {\r\n  return (\r\n    <ThemeProvider>\r\n      <AuthProvider>\r\n        <ToastProvider>\r\n          <FloatingDocuments />\r\n          <PWAInstallPrompt delaySeconds={30} />\r\n          <MaintenanceGuard>\r\n            <Router>\r\n              <Routes>\r\n                {/* Public Routes */}\r\n                <Route path=\"/\" element={<Landing />} />\r\n                <Route path=\"/pricing\" element={<Pricing />} />\r\n                <Route path=\"/blog\" element={<BlogList />} />\r\n                <Route path=\"/blog/:id\" element={<BlogPost />} />\r\n\r\n                {/* Maintenance Page Route (for testing/direct access) */}\r\n                <Route path=\"/maintenance\" element={<MaintenancePage />} />\r\n\r\n                {/* Auth Routes */}\r\n                <Route path=\"/login\" element={\r\n                  <PublicRoute>\r\n                    <Login />\r\n                  </PublicRoute>\r\n                } />\r\n                <Route path=\"/signup\" element={\r\n                  <PublicRoute>\r\n                    <Signup />\r\n                  </PublicRoute>\r\n                } />\r\n                <Route path=\"/forgot-password\" element={\r\n                  <PublicRoute>\r\n                    <ForgotPassword />\r\n                  </PublicRoute>\r\n                } />\r\n                <Route path=\"/reset-password\" element={<ResetPassword />} />\r\n                <Route path=\"/auth/callback\" element={<AuthCallback />} />\r\n\r\n                {/* Protected Editor Route - Standalone without sidebar */}\r\n                <Route path=\"/dashboard/editor/:id\" element={\r\n                  <ProtectedRoute>\r\n                    <EditorPage />\r\n                  </ProtectedRoute>\r\n                } />\r\n\r\n                {/* Protected Dashboard Routes */}\r\n                <Route path=\"/dashboard\" element={\r\n                  <ProtectedRoute>\r\n                    <DashboardLayout />\r\n                  </ProtectedRoute>\r\n                }>\r\n                  <Route index element={<DashboardHome />} />\r\n                  <Route path=\"documents\" element={<DashboardDocuments />} />\r\n                  <Route path=\"timetable\" element={\r\n                    <Suspense fallback={<LoadingFallback />}>\r\n                      <TimetableGenerator />\r\n                    </Suspense>\r\n                  } />\r\n                  <Route path=\"settings\" element={<DashboardSettings />} />\r\n                  <Route path=\"settings/billing\" element={<Billing />} />\r\n                </Route>\r\n\r\n                {/* Admin Routes - Lazy loaded, restricted to admin email only */}\r\n                <Route path=\"/admin\" element={\r\n                  <AdminOnlyRoute>\r\n                    <Suspense fallback={<LoadingFallback />}>\r\n                      <AdminLayout />\r\n                    </Suspense>\r\n                  </AdminOnlyRoute>\r\n                }>\r\n                  <Route index element={\r\n                    <Suspense fallback={<LoadingFallback />}>\r\n                      <AdminDashboard />\r\n                    </Suspense>\r\n                  } />\r\n                  <Route path=\"users\" element={\r\n                    <Suspense fallback={<LoadingFallback />}>\r\n                      <UsersManager />\r\n                    </Suspense>\r\n                  } />\r\n                  <Route path=\"blog\" element={\r\n                    <Suspense fallback={<LoadingFallback />}>\r\n                      <BlogManager />\r\n                    </Suspense>\r\n                  } />\r\n                  <Route path=\"blog/new\" element={\r\n                    <Suspense fallback={<LoadingFallback />}>\r\n                      <BlogPostEditor />\r\n                    </Suspense>\r\n                  } />\r\n                  <Route path=\"blog/edit/:id\" element={\r\n                    <Suspense fallback={<LoadingFallback />}>\r\n                      <BlogPostEditor />\r\n                    </Suspense>\r\n                  } />\r\n                  <Route path=\"feedback\" element={\r\n                    <Suspense fallback={<LoadingFallback />}>\r\n                      <FeedbackManager />\r\n                    </Suspense>\r\n                  } />\r\n                  <Route path=\"settings\" element={\r\n                    <Suspense fallback={<LoadingFallback />}>\r\n                      <AdminSettings />\r\n                    </Suspense>\r\n                  } />\r\n                </Route>\r\n              </Routes>\r\n            </Router>\r\n          </MaintenanceGuard>\r\n        </ToastProvider>\r\n      </AuthProvider>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\api\\client.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\components\\ProtectedRoute.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\components\\layout\\DashboardLayout.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  41 |     useEffect(() => {\n  42 |         if (!isOnboardingCompleted()) {\n> 43 |             setShowOnboarding(true);\n     |             ^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  44 |         }\n  45 |     }, []);\n  46 |","line":43,"column":13,"nodeType":null,"endLine":43,"endColumn":30},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":66,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":66,"endColumn":23},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":585,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":585,"endColumn":23}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Link, Outlet, useLocation, useNavigate } from 'react-router-dom';\r\nimport { useState, useEffect } from 'react';\r\nimport { cn } from '../../lib/utils';\r\nimport { Button } from '../ui/Button';\r\nimport {\r\n    LayoutDashboard,\r\n    FileText,\r\n    Calendar,\r\n    Settings,\r\n    Menu,\r\n    X,\r\n    LogOut,\r\n    MessageSquare,\r\n    Shield,\r\n    ChevronDown,\r\n    Zap,\r\n    Search,\r\n} from 'lucide-react';\r\nimport { useToast } from '../../context/ToastContext';\r\nimport { useTheme } from '../../context/ThemeContext';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport { ThemeToggle } from '../ui/ThemeToggle';\r\nimport { DocleyLogo } from '../ui/DocleyLogo';\r\nimport { OnboardingFlow, isOnboardingCompleted } from '../onboarding/OnboardingFlow';\r\nimport { submitFeedback } from '../../services/feedbackService';\r\n\r\nexport function DashboardLayout() {\r\n    const location = useLocation();\r\n    const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\r\n    const [isHovered, setIsHovered] = useState(false);\r\n    const [showOnboarding, setShowOnboarding] = useState(false);\r\n    const [showFeedbackModal, setShowFeedbackModal] = useState(false);\r\n    const [showUserMenu, setShowUserMenu] = useState(false);\r\n    const navigate = useNavigate();\r\n    const { addToast } = useToast();\r\n    const { theme } = useTheme();\r\n    const { user, profile, isAdmin, signOut } = useAuth();\r\n    const isDark = theme === 'dark';\r\n\r\n    // Check onboarding on mount\r\n    useEffect(() => {\r\n        if (!isOnboardingCompleted()) {\r\n            setShowOnboarding(true);\r\n        }\r\n    }, []);\r\n\r\n    const navigation = [\r\n        { name: 'Dashboard', href: '/dashboard', icon: LayoutDashboard },\r\n        { name: 'My Documents', href: '/dashboard/documents', icon: FileText },\r\n        { name: 'Timetable', href: '/dashboard/timetable', icon: Calendar },\r\n        { name: 'Settings', href: '/dashboard/settings', icon: Settings },\r\n        // Conditionally add Admin link\r\n        ...(isAdmin ? [{ name: 'Admin Panel', href: '/admin', icon: Shield }] : []),\r\n    ];\r\n\r\n    const isActive = (path) => {\r\n        if (path === '/dashboard' && location.pathname !== '/dashboard') return false;\r\n        return location.pathname.startsWith(path);\r\n    };\r\n\r\n    const handleSignOut = async () => {\r\n        try {\r\n            await signOut();\r\n            addToast('Successfully signed out', 'success');\r\n            navigate('/login');\r\n        } catch (error) {\r\n            addToast('Failed to sign out', 'error');\r\n        }\r\n    };\r\n\r\n    // Get user's display name\r\n    const getUserDisplayName = () => {\r\n        if (profile?.full_name) {\r\n            return profile.full_name.split(' ')[0];\r\n        }\r\n        if (user?.user_metadata?.full_name) {\r\n            return user.user_metadata.full_name.split(' ')[0];\r\n        }\r\n        if (user?.email) {\r\n            return user.email.split('@')[0];\r\n        }\r\n        return 'User';\r\n    };\r\n\r\n    // Get user's initials\r\n    const getUserInitials = () => {\r\n        if (profile?.full_name) {\r\n            const names = profile.full_name.split(' ');\r\n            if (names.length >= 2) {\r\n                return (names[0][0] + names[1][0]).toUpperCase();\r\n            }\r\n            return names[0][0].toUpperCase();\r\n        }\r\n        if (user?.user_metadata?.full_name) {\r\n            const names = user.user_metadata.full_name.split(' ');\r\n            if (names.length >= 2) {\r\n                return (names[0][0] + names[1][0]).toUpperCase();\r\n            }\r\n            return names[0][0].toUpperCase();\r\n        }\r\n        if (user?.email) {\r\n            return user.email[0].toUpperCase();\r\n        }\r\n        return 'U';\r\n    };\r\n\r\n    const handleOnboardingComplete = () => {\r\n        setShowOnboarding(false);\r\n    };\r\n\r\n    // Sidebar is collapsed by default, expands on hover\r\n    const isCollapsed = !isHovered;\r\n\r\n    return (\r\n        <div className={cn(\r\n            \"min-h-screen flex transition-colors duration-300\",\r\n            isDark\r\n                ? \"bg-gradient-to-br from-slate-900 via-slate-950 to-slate-900\"\r\n                : \"bg-gradient-to-br from-slate-50 via-white to-slate-50\"\r\n        )}>\r\n            {/* Onboarding Flow */}\r\n            {showOnboarding && <OnboardingFlow onComplete={handleOnboardingComplete} />}\r\n\r\n            {/* Feedback Modal */}\r\n            {showFeedbackModal && (\r\n                <FeedbackModal\r\n                    isOpen={showFeedbackModal}\r\n                    onClose={() => setShowFeedbackModal(false)}\r\n                    isDark={isDark}\r\n                />\r\n            )}\r\n\r\n            {/* Mobile Menu Overlay */}\r\n            {isMobileMenuOpen && (\r\n                <div\r\n                    className=\"fixed inset-0 bg-slate-900/50 z-40 lg:hidden backdrop-blur-sm\"\r\n                    onClick={() => setIsMobileMenuOpen(false)}\r\n                />\r\n            )}\r\n\r\n            {/* Mobile Menu Button */}\r\n            <div className=\"lg:hidden fixed top-4 left-4 z-50\">\r\n                <Button\r\n                    variant=\"outline\"\r\n                    size=\"icon\"\r\n                    onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}\r\n                    className=\"bg-white shadow-lg border-slate-200\"\r\n                >\r\n                    {isMobileMenuOpen ? <X className=\"h-5 w-5\" /> : <Menu className=\"h-5 w-5\" />}\r\n                </Button>\r\n            </div>\r\n\r\n            {/* Sidebar - Fixed position, auto-collapse with hover expand */}\r\n            <aside\r\n                onMouseEnter={() => setIsHovered(true)}\r\n                onMouseLeave={() => setIsHovered(false)}\r\n                className={cn(\r\n                    'fixed inset-y-0 left-0 z-30 flex flex-col shadow-lg transition-all duration-300 ease-in-out backdrop-blur-xl',\r\n                    // Mobile: hidden by default, shown when menu is open\r\n                    isMobileMenuOpen ? 'translate-x-0 w-72' : '-translate-x-full',\r\n                    // Desktop: always visible, collapsed by default, expands on hover\r\n                    'lg:translate-x-0',\r\n                    isCollapsed ? 'lg:w-[70px]' : 'lg:w-[260px]',\r\n                    isDark\r\n                        ? 'bg-white/5 border-r border-white/10'\r\n                        : 'bg-white/80 border-r border-slate-200'\r\n                )}\r\n            >\r\n                {/* Logo */}\r\n                <div\r\n                    className={cn(\r\n                        'h-16 flex items-center transition-all duration-300 relative',\r\n                        isCollapsed ? 'justify-center px-0' : 'justify-center px-5',\r\n                        isDark\r\n                            ? 'border-b border-white/10 bg-gradient-to-r from-white/5 to-white/5'\r\n                            : 'border-b border-slate-200 bg-gradient-to-r from-white to-indigo-50/30'\r\n                    )}\r\n                >\r\n                    <Link to=\"/\" className=\"flex items-center gap-3 overflow-hidden\">\r\n                        <DocleyLogo size={isCollapsed ? \"sm\" : \"default\"} iconOnly={isCollapsed} />\r\n                    </Link>\r\n                </div>\r\n\r\n                {/* Navigation */}\r\n                <nav className=\"flex-1 px-3 py-4 space-y-1 mt-2 overflow-x-hidden overflow-y-auto custom-scrollbar\">\r\n                    {navigation.map((item) => (\r\n                        <Link\r\n                            key={item.name}\r\n                            to={item.href}\r\n                            onClick={() => setIsMobileMenuOpen(false)}\r\n                            title={isCollapsed ? item.name : undefined}\r\n                            className={cn(\r\n                                'flex items-center py-2.5 rounded-lg transition-all duration-200 group relative min-h-[44px]',\r\n                                isCollapsed ? 'justify-center px-0' : 'px-3',\r\n                                isActive(item.href)\r\n                                    ? isDark\r\n                                        ? 'bg-gradient-to-r from-orange-500/20 to-orange-500/10 text-orange-300 shadow-sm border border-orange-500/30'\r\n                                        : 'bg-gradient-to-r from-orange-50 to-orange-50/50 text-orange-700 shadow-sm border border-orange-100'\r\n                                    : isDark\r\n                                        ? 'text-slate-300 hover:bg-white/10 hover:text-white'\r\n                                        : 'text-slate-600 hover:bg-slate-100/50 hover:text-slate-900'\r\n                            )}\r\n                        >\r\n                            <item.icon\r\n                                className={cn(\r\n                                    'h-5 w-5 flex-shrink-0 transition-colors',\r\n                                    isActive(item.href)\r\n                                        ? isDark ? 'text-orange-400' : 'text-orange-600'\r\n                                        : isDark ? 'text-slate-400 group-hover:text-slate-300' : 'text-slate-400 group-hover:text-slate-600',\r\n                                    !isCollapsed && 'mr-3'\r\n                                )}\r\n                            />\r\n                            {!isCollapsed && (\r\n                                <span className=\"whitespace-nowrap animate-in fade-in duration-200 text-sm font-medium\">\r\n                                    {item.name}\r\n                                </span>\r\n                            )}\r\n\r\n                            {/* Hover Tooltip for Collapsed State */}\r\n                            {isCollapsed && (\r\n                                <div className={cn(\r\n                                    \"fixed left-[80px] text-xs px-2.5 py-1.5 rounded-lg shadow-xl opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-[60] pointer-events-none\",\r\n                                    isDark\r\n                                        ? \"bg-white/10 backdrop-blur-md border border-white/20 text-white\"\r\n                                        : \"bg-slate-900 text-white\"\r\n                                )}>\r\n                                    {item.name}\r\n                                </div>\r\n                            )}\r\n                        </Link>\r\n                    ))}\r\n                </nav>\r\n\r\n                {/* Bottom Sidebar */}\r\n                <div className={cn(\r\n                    \"p-3 space-y-2 border-t bg-gradient-to-b\",\r\n                    isDark\r\n                        ? \"border-white/10 from-white/5 to-white/5\"\r\n                        : \"border-slate-200 from-white to-slate-50/50\"\r\n                )}>\r\n                    {/* Send Feedback Button */}\r\n                    <button\r\n                        onClick={() => setShowFeedbackModal(true)}\r\n                        title={isCollapsed ? 'Send Feedback' : undefined}\r\n                        className={cn(\r\n                            'flex items-center w-full py-3 text-base font-medium rounded-lg transition-colors group relative min-h-[52px]',\r\n                            isCollapsed ? 'justify-center px-0' : 'px-4',\r\n                            isDark\r\n                                ? 'text-slate-200 hover:bg-white/10 hover:text-orange-400 bg-white/5'\r\n                                : 'text-slate-700 hover:bg-slate-100/50 hover:text-orange-600 bg-slate-50'\r\n                        )}\r\n                    >\r\n                        <MessageSquare\r\n                            className={cn(\r\n                                'h-5 w-5 transition-colors',\r\n                                isDark ? 'text-slate-300 group-hover:text-orange-400' : 'text-slate-500 group-hover:text-orange-600',\r\n                                !isCollapsed && 'mr-3'\r\n                            )}\r\n                        />\r\n                        {!isCollapsed && <span className=\"animate-in fade-in duration-200 font-semibold\">Send Feedback</span>}\r\n                    </button>\r\n\r\n                    {/* Sign Out */}\r\n                    <button\r\n                        onClick={handleSignOut}\r\n                        title={isCollapsed ? 'Sign Out' : undefined}\r\n                        className={cn(\r\n                            'flex items-center w-full py-2.5 text-sm font-medium rounded-lg transition-colors group relative min-h-[44px]',\r\n                            isCollapsed ? 'justify-center px-0' : 'px-3',\r\n                            isDark\r\n                                ? 'text-slate-300 hover:bg-red-500/20 hover:text-red-400'\r\n                                : 'text-slate-600 hover:bg-red-50 hover:text-red-600'\r\n                        )}\r\n                    >\r\n                        <LogOut\r\n                            className={cn(\r\n                                'h-5 w-5 transition-colors',\r\n                                isDark ? 'text-slate-400 group-hover:text-red-400' : 'text-slate-400 group-hover:text-red-600',\r\n                                !isCollapsed && 'mr-3'\r\n                            )}\r\n                        />\r\n                        {!isCollapsed && <span className=\"animate-in fade-in duration-200\">Sign Out</span>}\r\n                    </button>\r\n                </div>\r\n            </aside>\r\n\r\n            {/* Main Content - Add left margin/padding to account for fixed sidebar */}\r\n            <main className=\"flex-1 min-w-0 overflow-y-auto custom-scrollbar lg:ml-[70px]\">\r\n                {/* Professional Header */}\r\n                <header className={cn(\r\n                    \"sticky top-0 z-20 flex items-center gap-4 px-4 lg:px-6 xl:px-8 py-3 md:py-4 backdrop-blur-xl border-b\",\r\n                    isDark ? \"bg-slate-900/70 border-white/5\" : \"bg-white/80 border-slate-200\"\r\n                )}>\r\n                    {/* Mobile Menu Button */}\r\n                    <button\r\n                        onClick={() => setIsMobileMenuOpen(true)}\r\n                        className={cn(\r\n                            \"lg:hidden p-2 rounded-lg border transition-colors\",\r\n                            isDark\r\n                                ? \"border-white/10 text-slate-200 hover:bg-white/10\"\r\n                                : \"border-slate-200 text-slate-700 hover:bg-slate-100\"\r\n                        )}\r\n                    >\r\n                        <Menu className=\"h-5 w-5\" />\r\n                    </button>\r\n\r\n                    {/* Logo and Title Section */}\r\n                    <div className=\"flex items-center gap-3 md:gap-4 flex-1 min-w-0\">\r\n                        <div className=\"hidden sm:block min-w-0\">\r\n                            <p className={cn(\r\n                                \"text-[10px] md:text-xs font-semibold uppercase tracking-wider mb-0.5\",\r\n                                isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                            )}>\r\n                                Workspace\r\n                            </p>\r\n                            <h1 className={cn(\r\n                                \"text-lg md:text-xl lg:text-2xl font-bold leading-tight truncate\",\r\n                                isDark ? \"text-white\" : \"text-slate-900\"\r\n                            )}>\r\n                                {location.pathname === '/dashboard' ? 'Dashboard' :\r\n                                    location.pathname.includes('/documents') ? 'My Documents' :\r\n                                        location.pathname.includes('/timetable') ? 'Smart Timetable' :\r\n                                            location.pathname.includes('/settings') ? 'Settings' :\r\n                                                'Dashboard'}\r\n                            </h1>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Search Bar */}\r\n                    <div className=\"hidden md:flex flex-[2] max-w-xl mx-4\">\r\n                        <div className=\"relative w-full group\">\r\n                            <div className={cn(\r\n                                \"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none transition-colors\",\r\n                                isDark ? \"text-slate-500 group-focus-within:text-orange-400\" : \"text-slate-400 group-focus-within:text-orange-500\"\r\n                            )}>\r\n                                <Search className=\"h-4 w-4\" />\r\n                            </div>\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\"Search docs...\"\r\n                                className={cn(\r\n                                    \"block w-full pl-10 pr-12 py-2 text-sm rounded-xl border transition-all duration-200 outline-none\",\r\n                                    isDark\r\n                                        ? \"bg-white/5 border-white/10 text-white placeholder-slate-500 focus:bg-white/10 focus:border-orange-500/50 focus:ring-4 focus:ring-orange-500/10\"\r\n                                        : \"bg-slate-50 border-slate-200 text-slate-900 placeholder-slate-400 focus:bg-white focus:border-orange-500 focus:ring-4 focus:ring-orange-500/10 shadow-sm\"\r\n                                )}\r\n                            />\r\n                            <div className=\"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none\">\r\n                                <kbd className={cn(\r\n                                    \"hidden sm:inline-flex items-center gap-1 px-1.5 py-0.5 rounded border text-[10px] font-medium transition-colors\",\r\n                                    isDark\r\n                                        ? \"bg-white/5 border-white/10 text-slate-500\"\r\n                                        : \"bg-white border-slate-200 text-slate-400\"\r\n                                )}>\r\n                                    <span className=\"text-xs\">âŒ˜</span>K\r\n                                </kbd>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Right Side Actions */}\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <ThemeToggle />\r\n                        {/* User Profile Dropdown */}\r\n                        <div className=\"relative\">\r\n                            <button\r\n                                onClick={() => setShowUserMenu(!showUserMenu)}\r\n                                className={cn(\r\n                                    \"flex items-center gap-2 px-3 py-2 rounded-lg border transition-all\",\r\n                                    isDark\r\n                                        ? \"border-white/10 bg-white/5 text-slate-200 hover:bg-white/10\"\r\n                                        : \"border-slate-200 bg-white text-slate-700 hover:bg-slate-50 shadow-sm\"\r\n                                )}\r\n                            >\r\n                                <div className={cn(\r\n                                    \"h-8 w-8 rounded-full flex items-center justify-center text-sm font-semibold\",\r\n                                    isDark\r\n                                        ? \"bg-gradient-to-br from-orange-500 to-blue-500 text-white\"\r\n                                        : \"bg-gradient-to-br from-orange-500 to-blue-500 text-white\"\r\n                                )}>\r\n                                    {getUserInitials()}\r\n                                </div>\r\n                                <div className=\"hidden lg:block text-left min-w-0\">\r\n                                    <p className={cn(\r\n                                        \"text-sm truncate\",\r\n                                        isDark ? \"text-slate-300\" : \"text-slate-600\"\r\n                                    )}>\r\n                                        {user?.email}\r\n                                    </p>\r\n                                </div>\r\n                                <ChevronDown className={cn(\r\n                                    \"h-4 w-4 transition-transform hidden lg:block\",\r\n                                    showUserMenu && \"rotate-180\",\r\n                                    isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                                )} />\r\n                            </button>\r\n\r\n                            {showUserMenu && (\r\n                                <>\r\n                                    <div\r\n                                        className=\"fixed inset-0 z-40\"\r\n                                        onClick={() => setShowUserMenu(false)}\r\n                                    />\r\n                                    <div className={cn(\r\n                                        \"absolute right-0 top-full mt-2 w-64 rounded-xl shadow-2xl border z-50 animate-in fade-in slide-in-from-top-2 duration-200\",\r\n                                        isDark\r\n                                            ? \"bg-slate-800 border-white/10\"\r\n                                            : \"bg-white border-slate-200\"\r\n                                    )}>\r\n                                        <div className={cn(\r\n                                            \"p-4 border-b\",\r\n                                            isDark ? \"border-white/10\" : \"border-slate-100\"\r\n                                        )}>\r\n                                            <div className=\"flex items-center gap-3\">\r\n                                                <div className={cn(\r\n                                                    \"h-12 w-12 rounded-full flex items-center justify-center text-base font-semibold\",\r\n                                                    \"bg-gradient-to-br from-orange-500 to-blue-500 text-white\"\r\n                                                )}>\r\n                                                    {getUserInitials()}\r\n                                                </div>\r\n                                                <div className=\"flex-1 min-w-0\">\r\n                                                    <p className={cn(\r\n                                                        \"text-sm font-semibold truncate\",\r\n                                                        isDark ? \"text-white\" : \"text-slate-900\"\r\n                                                    )}>\r\n                                                        {profile?.full_name || user?.user_metadata?.full_name || getUserDisplayName()}\r\n                                                    </p>\r\n                                                    <p className={cn(\r\n                                                        \"text-xs truncate\",\r\n                                                        isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                                                    )}>\r\n                                                        {user?.email}\r\n                                                    </p>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"p-2\">\r\n                                            <Link\r\n                                                to=\"/dashboard/settings\"\r\n                                                onClick={() => setShowUserMenu(false)}\r\n                                                className={cn(\r\n                                                    \"flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors\",\r\n                                                    isDark\r\n                                                        ? \"text-slate-300 hover:bg-white/10 hover:text-white\"\r\n                                                        : \"text-slate-700 hover:bg-slate-50\"\r\n                                                )}\r\n                                            >\r\n                                                <Settings className=\"h-4 w-4\" />\r\n                                                <span className=\"text-sm font-medium\">Settings</span>\r\n                                            </Link>\r\n                                            <button\r\n                                                onClick={() => {\r\n                                                    setShowUserMenu(false);\r\n                                                    handleSignOut();\r\n                                                }}\r\n                                                className={cn(\r\n                                                    \"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors\",\r\n                                                    isDark\r\n                                                        ? \"text-red-400 hover:bg-red-500/20\"\r\n                                                        : \"text-red-600 hover:bg-red-50\"\r\n                                                )}\r\n                                            >\r\n                                                <LogOut className=\"h-4 w-4\" />\r\n                                                <span className=\"text-sm font-medium\">Sign Out</span>\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                </>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Mobile Right Actions */}\r\n                    <div className=\"md:hidden flex items-center gap-2\">\r\n                        <ThemeToggle />\r\n                        <button\r\n                            onClick={() => setShowUserMenu(!showUserMenu)}\r\n                            className={cn(\r\n                                \"h-10 w-10 rounded-full flex items-center justify-center text-sm font-semibold\",\r\n                                \"bg-gradient-to-br from-orange-500 to-blue-500 text-white\"\r\n                            )}\r\n                        >\r\n                            {getUserInitials()}\r\n                        </button>\r\n                        {showUserMenu && (\r\n                            <>\r\n                                <div\r\n                                    className=\"fixed inset-0 z-40\"\r\n                                    onClick={() => setShowUserMenu(false)}\r\n                                />\r\n                                <div className={cn(\r\n                                    \"fixed right-4 top-16 w-64 rounded-xl shadow-2xl border z-50 animate-in fade-in slide-in-from-top-2 duration-200\",\r\n                                    isDark\r\n                                        ? \"bg-slate-800 border-white/10\"\r\n                                        : \"bg-white border-slate-200\"\r\n                                )}>\r\n                                    <div className={cn(\r\n                                        \"p-4 border-b\",\r\n                                        isDark ? \"border-white/10\" : \"border-slate-100\"\r\n                                    )}>\r\n                                        <div className=\"flex items-center gap-3\">\r\n                                            <div className={cn(\r\n                                                \"h-12 w-12 rounded-full flex items-center justify-center text-base font-semibold\",\r\n                                                \"bg-gradient-to-br from-orange-500 to-blue-500 text-white\"\r\n                                            )}>\r\n                                                {getUserInitials()}\r\n                                            </div>\r\n                                            <div className=\"flex-1 min-w-0\">\r\n                                                <p className={cn(\r\n                                                    \"text-sm truncate\",\r\n                                                    isDark ? \"text-slate-300\" : \"text-slate-600\"\r\n                                                )}>\r\n                                                    {user?.email}\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"p-2\">\r\n                                        <Link\r\n                                            to=\"/dashboard/settings\"\r\n                                            onClick={() => setShowUserMenu(false)}\r\n                                            className={cn(\r\n                                                \"flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors\",\r\n                                                isDark\r\n                                                    ? \"text-slate-300 hover:bg-white/10 hover:text-white\"\r\n                                                    : \"text-slate-700 hover:bg-slate-50\"\r\n                                            )}\r\n                                        >\r\n                                            <Settings className=\"h-4 w-4\" />\r\n                                            <span className=\"text-sm font-medium\">Settings</span>\r\n                                        </Link>\r\n                                        <button\r\n                                            onClick={() => {\r\n                                                setShowUserMenu(false);\r\n                                                handleSignOut();\r\n                                            }}\r\n                                            className={cn(\r\n                                                \"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors\",\r\n                                                isDark\r\n                                                    ? \"text-red-400 hover:bg-red-500/20\"\r\n                                                    : \"text-red-600 hover:bg-red-50\"\r\n                                            )}\r\n                                        >\r\n                                            <LogOut className=\"h-4 w-4\" />\r\n                                            <span className=\"text-sm font-medium\">Sign Out</span>\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            </>\r\n                        )}\r\n                    </div>\r\n                </header>\r\n\r\n                <div className=\"p-4 sm:p-6 lg:p-8 max-w-7xl mx-auto\">\r\n                    <Outlet />\r\n                </div>\r\n            </main>\r\n        </div>\r\n    );\r\n}\r\n\r\n// Feedback Modal Component\r\nfunction FeedbackModal({ isOpen, onClose, isDark }) {\r\n    const [feedback, setFeedback] = useState('');\r\n    const [rating, setRating] = useState(0);\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n    const { addToast } = useToast();\r\n\r\n    if (!isOpen) return null;\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        if (!feedback.trim()) {\r\n            addToast('Please enter your feedback', 'warning');\r\n            return;\r\n        }\r\n\r\n        setIsSubmitting(true);\r\n        try {\r\n            await submitFeedback(rating, feedback);\r\n            addToast('Thank you for your feedback!', 'success');\r\n            setFeedback('');\r\n            setRating(0);\r\n            onClose();\r\n        } catch (error) {\r\n            addToast('Failed to send feedback. Please try again.', 'error');\r\n        } finally {\r\n            setIsSubmitting(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200\">\r\n            <div className={cn(\r\n                \"bg-white rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden animate-in zoom-in-95 duration-200\",\r\n                isDark && \"bg-slate-800 border border-white/10\"\r\n            )}>\r\n                {/* Header */}\r\n                <div className={cn(\r\n                    \"px-6 py-5 border-b flex items-center justify-between\",\r\n                    isDark ? \"border-white/10 bg-white/5\" : \"border-slate-100 bg-gradient-to-r from-white to-indigo-50/30\"\r\n                )}>\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <div className=\"h-10 w-10 rounded-lg bg-gradient-to-br from-orange-500 to-blue-500 flex items-center justify-center\">\r\n                            <MessageSquare className=\"h-5 w-5 text-white\" />\r\n                        </div>\r\n                        <div>\r\n                            <h2 className={cn(\r\n                                \"text-xl font-bold\",\r\n                                isDark ? \"text-white\" : \"text-slate-900\"\r\n                            )}>\r\n                                Send Feedback\r\n                            </h2>\r\n                            <p className={cn(\r\n                                \"text-xs\",\r\n                                isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                            )}>\r\n                                Help us improve Docley\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                    <button\r\n                        onClick={onClose}\r\n                        className={cn(\r\n                            \"text-slate-400 hover:text-slate-600 transition-colors p-1 rounded-lg hover:bg-slate-100\",\r\n                            isDark && \"hover:bg-white/10 hover:text-white\"\r\n                        )}\r\n                    >\r\n                        <X className=\"h-5 w-5\" />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\r\n                    {/* Rating */}\r\n                    <div className=\"space-y-2\">\r\n                        <label className={cn(\r\n                            \"text-sm font-semibold\",\r\n                            isDark ? \"text-slate-300\" : \"text-slate-700\"\r\n                        )}>\r\n                            How would you rate your experience?\r\n                        </label>\r\n                        <div className=\"flex gap-2\">\r\n                            {[1, 2, 3, 4, 5].map((star) => (\r\n                                <button\r\n                                    key={star}\r\n                                    type=\"button\"\r\n                                    onClick={() => setRating(star)}\r\n                                    className={cn(\r\n                                        \"text-2xl transition-all duration-200 hover:scale-110\",\r\n                                        rating >= star ? \"text-orange-500\" : isDark ? \"text-slate-600\" : \"text-slate-300\"\r\n                                    )}\r\n                                >\r\n                                    â˜…\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Feedback Text */}\r\n                    <div className=\"space-y-2\">\r\n                        <label className={cn(\r\n                            \"text-sm font-semibold\",\r\n                            isDark ? \"text-slate-300\" : \"text-slate-700\"\r\n                        )}>\r\n                            Your Feedback\r\n                        </label>\r\n                        <textarea\r\n                            value={feedback}\r\n                            onChange={(e) => setFeedback(e.target.value)}\r\n                            placeholder=\"Tell us what you think, what features you'd like, or report any issues...\"\r\n                            rows={6}\r\n                            className={cn(\r\n                                \"w-full px-4 py-3 rounded-lg border text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 transition-all resize-none\",\r\n                                isDark\r\n                                    ? \"bg-white/5 border-white/10 text-white placeholder-slate-500\"\r\n                                    : \"bg-white border-slate-200 text-slate-900 placeholder-slate-400\"\r\n                            )}\r\n                            required\r\n                        />\r\n                    </div>\r\n\r\n                    {/* Footer */}\r\n                    <div className={cn(\r\n                        \"flex justify-end gap-3 pt-4 border-t\",\r\n                        isDark ? \"border-white/10\" : \"border-slate-100\"\r\n                    )}>\r\n                        <Button\r\n                            type=\"button\"\r\n                            variant=\"ghost\"\r\n                            onClick={onClose}\r\n                            className={isDark ? \"text-slate-300 hover:text-white hover:bg-white/10\" : \"\"}\r\n                        >\r\n                            Cancel\r\n                        </Button>\r\n                        <Button\r\n                            type=\"submit\"\r\n                            disabled={isSubmitting || !feedback.trim()}\r\n                            isLoading={isSubmitting}\r\n                            className=\"bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white shadow-lg shadow-orange-500/25\"\r\n                        >\r\n                            Send Feedback\r\n                        </Button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\components\\layout\\Footer.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\components\\layout\\Navbar.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\components\\modals\\BillingUpgradeModal.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\components\\modals\\CitationModal.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\components\\modals\\ContentIntakeModal.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'supabase' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"supabase"},"fix":{"range":[202,248],"text":""},"desc":"Remove unused variable 'supabase'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useRef } from 'react';\r\nimport { X, Upload, FileText, ClipboardPaste, ChevronRight, File, Trash2, CheckCircle, Loader2 } from 'lucide-react';\r\nimport { Button } from '../ui/Button';\r\nimport { supabase } from '../../lib/supabase';\r\n\r\nimport mammoth from 'mammoth';\r\nimport * as pdfjs from 'pdfjs-dist';\r\nimport pdfjsWorker from 'pdfjs-dist/build/pdf.worker.mjs?url';\r\n\r\n// Set worker for pdfjs - use local worker URL from Vite\r\nif (typeof window !== 'undefined') {\r\n    pdfjs.GlobalWorkerOptions.workerSrc = pdfjsWorker;\r\n}\r\n\r\nexport function ContentIntakeModal({ isOpen, onClose, onContinue }) {\r\n    const [activeTab, setActiveTab] = useState('paste'); // 'paste' or 'upload'\r\n    const [content, setContent] = useState('');\r\n    const [htmlContent, setHtmlContent] = useState('');\r\n    const [file, setFile] = useState(null);\r\n    const [isDragging, setIsDragging] = useState(false);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const fileInputRef = useRef(null);\r\n\r\n    if (!isOpen) return null;\r\n\r\n    const handleDragOver = (e) => {\r\n        e.preventDefault();\r\n        setIsDragging(true);\r\n    };\r\n\r\n    const handleDragLeave = (e) => {\r\n        e.preventDefault();\r\n        setIsDragging(false);\r\n    };\r\n\r\n    const handleDrop = (e) => {\r\n        e.preventDefault();\r\n        setIsDragging(false);\r\n        const droppedFile = e.dataTransfer.files[0];\r\n        handleFileSelect(droppedFile);\r\n    };\r\n\r\n    const handleFileSelect = async (selectedFile) => {\r\n        setError('');\r\n        setIsLoading(true);\r\n\r\n        if (!selectedFile) {\r\n            setIsLoading(false);\r\n            return;\r\n        }\r\n\r\n        const validTypes = [\r\n            'application/pdf',\r\n            'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\r\n            'text/plain'\r\n        ];\r\n\r\n        if (!validTypes.includes(selectedFile.type)) {\r\n            setError('Please upload a PDF, DOCX, or TXT file');\r\n            setIsLoading(false);\r\n            return;\r\n        }\r\n\r\n        if (selectedFile.size > 20 * 1024 * 1024) { // 20MB limit\r\n            setError('File size must be less than 20MB');\r\n            setIsLoading(false);\r\n            return;\r\n        }\r\n\r\n        setFile(selectedFile);\r\n\r\n        try {\r\n            if (selectedFile.type === 'text/plain') {\r\n                const reader = new FileReader();\r\n                reader.onload = (e) => {\r\n                    const text = e.target.result;\r\n                    setContent(text);\r\n                    setHtmlContent(text.split('\\n').map(line => `<p>${line}</p>`).join(''));\r\n                    setIsLoading(false);\r\n                };\r\n                reader.readAsText(selectedFile);\r\n            } else if (selectedFile.type === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document') {\r\n                const arrayBuffer = await selectedFile.arrayBuffer();\r\n\r\n                // Style mapping for better formatting preservation\r\n                const styleMap = [\r\n                    \"p[style-name='Heading 1'] => h1:fresh\",\r\n                    \"p[style-name='Heading 2'] => h2:fresh\",\r\n                    \"p[style-name='Heading 3'] => h3:fresh\",\r\n                    \"p[style-name='Title'] => h1:fresh\",\r\n                    \"p[style-name='Subtitle'] => h2:fresh\",\r\n                    \"r[style-name='Strong'] => strong\",\r\n                    \"r[style-name='Emphasis'] => em\",\r\n                ];\r\n\r\n                // Convert DOCX to HTML with images preserved as data URLs\r\n                const result = await mammoth.convertToHtml({\r\n                    arrayBuffer,\r\n                    styleMap,\r\n                    convertImage: mammoth.images.imgElement((image) => {\r\n                        // Convert images to inline base64 data URLs\r\n                        return image.read('base64').then((imageBuffer) => {\r\n                            return {\r\n                                src: `data:${image.contentType};base64,${imageBuffer}`\r\n                            };\r\n                        });\r\n                    })\r\n                });\r\n\r\n                console.log('DOCX converted. HTML length:', result.value.length);\r\n                if (result.messages.length > 0) {\r\n                    console.log('Mammoth messages:', result.messages);\r\n                }\r\n\r\n                // Pass HTML to editor (preserves bold, lists, images)\r\n                setHtmlContent(result.value);\r\n\r\n                // Extract plain text for word count preview\r\n                const tempDiv = document.createElement('div');\r\n                tempDiv.innerHTML = result.value;\r\n                setContent(tempDiv.textContent || tempDiv.innerText || selectedFile.name);\r\n                setIsLoading(false);\r\n            } else if (selectedFile.type === 'application/pdf') {\r\n                try {\r\n                    // Set worker to local Vite URL\r\n                    pdfjs.GlobalWorkerOptions.workerSrc = pdfjsWorker;\r\n                    console.log('PDF.js worker configured locally:', pdfjs.GlobalWorkerOptions.workerSrc);\r\n\r\n                    const arrayBuffer = await selectedFile.arrayBuffer();\r\n\r\n                    // Load the PDF document\r\n                    const loadingTask = pdfjs.getDocument({\r\n                        data: arrayBuffer,\r\n                        verbosity: 0,\r\n                    });\r\n\r\n                    const pdf = await loadingTask.promise;\r\n                    console.log(`PDF loaded successfully: ${pdf.numPages} pages`);\r\n\r\n                    if (!pdf || pdf.numPages === 0) {\r\n                        throw new Error('PDF appears to be empty or corrupted');\r\n                    }\r\n\r\n                    const maxPages = Math.min(pdf.numPages, 50);\r\n\r\n                    // Create array of page promises\r\n                    const pagePromises = [];\r\n                    for (let i = 1; i <= maxPages; i++) {\r\n                        pagePromises.push(pdf.getPage(i));\r\n                    }\r\n\r\n                    // Await all pages using Promise.all\r\n                    const pages = await Promise.all(pagePromises);\r\n                    console.log(`Loaded ${pages.length} pages`);\r\n\r\n                    // Get text content from all pages using Promise.all\r\n                    const textContentPromises = pages.map(page => page.getTextContent());\r\n                    const textContents = await Promise.all(textContentPromises);\r\n                    console.log(`Extracted text content from ${textContents.length} pages`);\r\n\r\n                    // Process each page's text content\r\n                    const htmlParts = [];\r\n                    const allText = [];\r\n\r\n                    textContents.forEach((textContent, pageIndex) => {\r\n                        if (!textContent || !textContent.items || textContent.items.length === 0) {\r\n                            console.log(`Page ${pageIndex + 1}: No text items found`);\r\n                            return;\r\n                        }\r\n\r\n                        let pageHtml = '';\r\n                        let pageText = '';\r\n                        let lastY = null;\r\n\r\n                        // Process each text item\r\n                        textContent.items.forEach((item) => {\r\n                            if (!item.str) return;\r\n\r\n                            const text = item.str;\r\n                            const y = item.transform ? item.transform[5] : null;\r\n\r\n                            // Check Y-coordinate for line breaks\r\n                            if (lastY !== null && y !== null) {\r\n                                const yDiff = Math.abs(y - lastY);\r\n                                if (yDiff > 3) {\r\n                                    // Y changed - insert line break\r\n                                    pageHtml += '<br />';\r\n                                    pageText += '\\n';\r\n                                }\r\n                            }\r\n\r\n                            // Add space between words if needed\r\n                            if (pageHtml && !pageHtml.endsWith(' ') && !pageHtml.endsWith('>') && !text.startsWith(' ')) {\r\n                                pageHtml += ' ';\r\n                                pageText += ' ';\r\n                            }\r\n\r\n                            pageHtml += text;\r\n                            pageText += text;\r\n\r\n                            if (y !== null) {\r\n                                lastY = y;\r\n                            }\r\n                        });\r\n\r\n                        // Wrap page content in paragraph tags\r\n                        if (pageHtml.trim()) {\r\n                            htmlParts.push(`<p>${pageHtml.trim()}</p>`);\r\n                            allText.push(pageText.trim());\r\n                        }\r\n\r\n                        // Add page separator\r\n                        if (pageIndex < textContents.length - 1) {\r\n                            htmlParts.push('<hr style=\"border:none; border-top:1px dashed #ccc; margin:1rem 0;\" />');\r\n                        }\r\n                    });\r\n\r\n                    const fullText = allText.join('\\n\\n');\r\n                    const htmlResult = htmlParts.join('');\r\n\r\n                    console.log(`Final extraction: ${fullText.length} chars, ${htmlParts.length} elements`);\r\n\r\n                    if (!fullText.trim()) {\r\n                        throw new Error('Could not extract text from PDF. The PDF might be image-based (scanned) or password-protected.');\r\n                    }\r\n\r\n                    setContent(fullText);\r\n                    setHtmlContent(htmlResult);\r\n                    setIsLoading(false);\r\n                } catch (pdfError) {\r\n                    console.error('PDF parsing error:', pdfError);\r\n                    setError(`Failed to parse PDF: ${pdfError.message || 'The file might be corrupted, password-protected, or image-based. Please try pasting the text manually.'}`);\r\n                    setIsLoading(false);\r\n                    setFile(null);\r\n                }\r\n            }\r\n        } catch (err) {\r\n            console.error('File parsing error:', err);\r\n            setError('Failed to parse file. It might be corrupted or protected.');\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleContinue = async () => {\r\n        if (activeTab === 'paste' && !content.trim()) {\r\n            setError('Please paste some content to continue');\r\n            return;\r\n        }\r\n        if (activeTab === 'upload' && !file) {\r\n            setError('Please upload a file to continue');\r\n            return;\r\n        }\r\n\r\n        setIsLoading(true);\r\n        setError('');\r\n\r\n        try {\r\n            onContinue({\r\n                content: activeTab === 'paste' ? content : content,\r\n                contentHtml: activeTab === 'paste'\r\n                    ? `<div style=\"font-size: 12pt;\">${content.split('\\n').filter(l => l.trim()).map(l => `<p>${l}</p>`).join('')}</div>`\r\n                    : `<div style=\"font-size: 12pt;\">${htmlContent}</div>`,\r\n                file: activeTab === 'upload' ? file : null,\r\n                inputType: activeTab,\r\n            });\r\n        } catch (err) {\r\n            console.error('Upload/Process error:', err);\r\n            setError(err.message || 'Failed to process content. Please try again.');\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setContent('');\r\n        setFile(null);\r\n        setError('');\r\n        setActiveTab('paste');\r\n        onClose();\r\n    };\r\n\r\n    const removeFile = () => {\r\n        setFile(null);\r\n        setContent('');\r\n        if (fileInputRef.current) {\r\n            fileInputRef.current.value = '';\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200\">\r\n            <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden animate-in zoom-in-95 duration-200 max-h-[90vh] flex flex-col\">\r\n                {/* Header */}\r\n                <div className=\"px-6 py-5 border-b border-slate-100 bg-gradient-to-r from-white to-orange-50/30 flex items-center justify-between flex-shrink-0\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <div className=\"h-10 w-10 rounded-lg bg-gradient-to-br from-orange-500 to-orange-600 flex items-center justify-center\">\r\n                            <FileText className=\"h-5 w-5 text-white\" />\r\n                        </div>\r\n                        <div>\r\n                            <h2 className=\"text-xl font-bold text-slate-900\">Add Your Content</h2>\r\n                            <p className=\"text-xs text-slate-500\">Upload a file or paste your existing work</p>\r\n                        </div>\r\n                    </div>\r\n                    <button\r\n                        onClick={handleClose}\r\n                        className=\"text-slate-400 hover:text-slate-600 transition-colors p-1 rounded-lg hover:bg-slate-100\"\r\n                    >\r\n                        <X className=\"h-5 w-5\" />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Tab Buttons */}\r\n                <div className=\"flex border-b border-slate-200 bg-slate-50/50\">\r\n                    <button\r\n                        onClick={() => { setActiveTab('paste'); setError(''); }}\r\n                        className={`flex-1 flex items-center justify-center gap-2 py-4 text-sm font-medium transition-all border-b-2 ${activeTab === 'paste'\r\n                            ? 'text-orange-600 border-orange-600 bg-white'\r\n                            : 'text-slate-500 border-transparent hover:text-slate-700 hover:bg-slate-100'\r\n                            }`}\r\n                    >\r\n                        <ClipboardPaste className=\"h-4 w-4\" />\r\n                        Paste Text\r\n                    </button>\r\n                    <button\r\n                        onClick={() => { setActiveTab('upload'); setError(''); }}\r\n                        className={`flex-1 flex items-center justify-center gap-2 py-4 text-sm font-medium transition-all border-b-2 ${activeTab === 'upload'\r\n                            ? 'text-orange-600 border-orange-600 bg-white'\r\n                            : 'text-slate-500 border-transparent hover:text-slate-700 hover:bg-slate-100'\r\n                            }`}\r\n                    >\r\n                        <Upload className=\"h-4 w-4\" />\r\n                        Upload File\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <div className=\"p-6 flex-1 overflow-y-auto\">\r\n                    {error && (\r\n                        <div className=\"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 text-sm rounded-lg\">\r\n                            {error}\r\n                        </div>\r\n                    )}\r\n\r\n                    {activeTab === 'paste' ? (\r\n                        <div className=\"space-y-3\">\r\n                            <label className=\"text-sm font-semibold text-slate-700 flex items-center gap-2\">\r\n                                <ClipboardPaste className=\"h-4 w-4 text-orange-600\" />\r\n                                Paste your draft below\r\n                            </label>\r\n                            <textarea\r\n                                value={content}\r\n                                onChange={(e) => setContent(e.target.value)}\r\n                                placeholder=\"Paste your assignment, essay, or research paper here...\r\n\r\nYou can paste directly from Word, Google Docs, or any other text editor. We'll preserve your formatting as much as possible.\"\r\n                                className=\"w-full h-64 px-4 py-3 rounded-xl border border-slate-200 bg-white text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all resize-none\"\r\n                                autoFocus\r\n                            />\r\n                            <p className=\"text-xs text-slate-500\">\r\n                                {content.trim().split(/\\s+/).filter(Boolean).length} words\r\n                            </p>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"space-y-4\">\r\n                            {!file ? (\r\n                                <div\r\n                                    onDragOver={handleDragOver}\r\n                                    onDragLeave={handleDragLeave}\r\n                                    onDrop={handleDrop}\r\n                                    onClick={() => fileInputRef.current?.click()}\r\n                                    className={`border-2 border-dashed rounded-xl p-12 text-center cursor-pointer transition-all ${isDragging\r\n                                        ? 'border-orange-500 bg-orange-50'\r\n                                        : 'border-slate-300 hover:border-orange-400 hover:bg-orange-50/50'\r\n                                        }`}\r\n                                >\r\n                                    <input\r\n                                        ref={fileInputRef}\r\n                                        type=\"file\"\r\n                                        accept=\".pdf,.docx,.txt\"\r\n                                        onChange={(e) => handleFileSelect(e.target.files[0])}\r\n                                        className=\"hidden\"\r\n                                    />\r\n                                    <div className=\"mx-auto w-16 h-16 rounded-full bg-orange-100 flex items-center justify-center mb-4\">\r\n                                        <Upload className=\"h-8 w-8 text-orange-600\" />\r\n                                    </div>\r\n                                    <h3 className=\"text-lg font-semibold text-slate-900 mb-2\">\r\n                                        Drop your file here\r\n                                    </h3>\r\n                                    <p className=\"text-sm text-slate-500 mb-4\">\r\n                                        or click to browse from your computer\r\n                                    </p>\r\n                                    <p className=\"text-xs text-slate-400\">\r\n                                        Supports PDF, DOCX, and TXT files up to 20MB\r\n                                    </p>\r\n                                </div>\r\n                            ) : (\r\n                                <div className=\"border border-slate-200 rounded-xl p-4 bg-slate-50\">\r\n                                    <div className=\"flex items-center justify-between\">\r\n                                        <div className=\"flex items-center gap-3\">\r\n                                            <div className=\"w-12 h-12 rounded-lg bg-orange-100 flex items-center justify-center\">\r\n                                                <File className=\"h-6 w-6 text-orange-600\" />\r\n                                            </div>\r\n                                            <div>\r\n                                                <p className=\"font-medium text-slate-900 text-sm\">{file.name}</p>\r\n                                                <p className=\"text-xs text-slate-500\">\r\n                                                    {(file.size / 1024).toFixed(1)} KB\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                            <div className=\"flex items-center gap-1 text-green-600 text-xs font-medium\">\r\n                                                <CheckCircle className=\"h-4 w-4\" />\r\n                                                Ready\r\n                                            </div>\r\n                                            <button\r\n                                                onClick={removeFile}\r\n                                                className=\"p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors\"\r\n                                            >\r\n                                                <Trash2 className=\"h-4 w-4\" />\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Info Box */}\r\n                <div className=\"px-6 pb-4\">\r\n                    <div className=\"bg-slate-50 border border-slate-100 rounded-lg p-4\">\r\n                        <p className=\"text-sm text-slate-600\">\r\n                            <span className=\"font-semibold text-slate-900\">Next step: </span>\r\n                            You'll set your document title, academic level, and citation style before entering the editor.\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Footer */}\r\n                <div className=\"px-6 py-4 bg-slate-50 border-t border-slate-100 flex justify-end gap-3 flex-shrink-0\">\r\n                    <Button variant=\"ghost\" onClick={handleClose} className=\"text-slate-600 hover:text-slate-900\">\r\n                        Cancel\r\n                    </Button>\r\n                    <Button\r\n                        onClick={handleContinue}\r\n                        disabled={(activeTab === 'paste' && !content.trim()) || (activeTab === 'upload' && !file) || isLoading}\r\n                        isLoading={isLoading}\r\n                        className=\"bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white shadow-lg shadow-orange-500/25\"\r\n                    >\r\n                        {isLoading ? 'Processing...' : 'Continue'}\r\n                        {!isLoading && <ChevronRight className=\"ml-2 h-4 w-4\" />}\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\components\\modals\\DiagnosticReport.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  11 |     useEffect(() => {\n  12 |         if (isOpen && documentText) {\n> 13 |             setLoading(true);\n     |             ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  14 |             setError(null);\n  15 |\n  16 |             // Artificial delay for better UX if response is too fast, or just real fetch","line":13,"column":13,"nodeType":null,"endLine":13,"endColumn":23}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { X, CheckCircle2, AlertCircle, TrendingUp, Info, BarChart3, ShieldCheck, Sparkles, Loader2 } from 'lucide-react';\r\nimport { Button } from '../ui/Button';\r\nimport { useEffect, useState } from 'react';\r\nimport { analyzeDocument } from '../../services/aiService';\r\n\r\nexport function DiagnosticReport({ isOpen, onClose, documentText }) {\r\n    const [data, setData] = useState(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n\r\n    useEffect(() => {\r\n        if (isOpen && documentText) {\r\n            setLoading(true);\r\n            setError(null);\r\n\r\n            // Artificial delay for better UX if response is too fast, or just real fetch\r\n            analyzeDocument(documentText)\r\n                .then(result => {\r\n                    setData(result);\r\n                    setLoading(false);\r\n                })\r\n                .catch(err => {\r\n                    console.error(err);\r\n                    setError(\"Failed to analyze document. Please ensure you are connected to the internet and deployed the backend.\");\r\n                    setLoading(false);\r\n                });\r\n        }\r\n    }, [isOpen, documentText]);\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200\">\r\n            <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-3xl overflow-hidden animate-in zoom-in-95 duration-200 max-h-[90vh] flex flex-col\">\r\n                {/* Header */}\r\n                <div className=\"px-6 py-5 bg-gradient-to-r from-indigo-50 via-white to-indigo-50/30 border-b border-slate-100 flex items-center justify-between flex-shrink-0\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <div className=\"h-10 w-10 rounded-lg bg-gradient-to-br from-indigo-500 to-indigo-600 flex items-center justify-center\">\r\n                            <TrendingUp className=\"h-5 w-5 text-white\" />\r\n                        </div>\r\n                        <div>\r\n                            <h2 className=\"text-xl font-bold text-slate-900 flex items-center gap-2\">Diagnostic Report</h2>\r\n                            <p className=\"text-sm text-slate-500\">Comprehensive analysis of your document</p>\r\n                        </div>\r\n                    </div>\r\n                    <button\r\n                        onClick={onClose}\r\n                        className=\"text-slate-400 hover:text-slate-600 transition-colors p-1.5 rounded-lg hover:bg-slate-100\"\r\n                    >\r\n                        <X className=\"h-5 w-5\" />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <div className=\"p-6 overflow-y-auto custom-scrollbar flex-1 space-y-6\">\r\n                    {loading ? (\r\n                        <div className=\"flex flex-col items-center justify-center py-20\">\r\n                            <Loader2 className=\"h-12 w-12 text-indigo-600 animate-spin mb-4\" />\r\n                            <h3 className=\"text-lg font-medium text-slate-900\">Analyzing Document...</h3>\r\n                            <p className=\"text-slate-500\">Evaluating structure, tone, and clarity</p>\r\n                        </div>\r\n                    ) : error ? (\r\n                        <div className=\"flex flex-col items-center justify-center py-20 text-center\">\r\n                            <AlertCircle className=\"h-12 w-12 text-red-500 mb-4\" />\r\n                            <h3 className=\"text-lg font-medium text-slate-900\">Analysis Failed</h3>\r\n                            <p className=\"text-slate-500 max-w-md mx-auto mt-2\">{error}</p>\r\n                            <Button variant=\"outline\" className=\"mt-6\" onClick={onClose}>Close</Button>\r\n                        </div>\r\n                    ) : data ? (\r\n                        <>\r\n                            {/* Overall Score */}\r\n                            <div className=\"bg-gradient-to-br from-indigo-600 via-indigo-600 to-indigo-700 rounded-xl p-6 text-white shadow-lg shadow-indigo-600/25\">\r\n                                <div className=\"flex items-center justify-between\">\r\n                                    <div>\r\n                                        <h3 className=\"text-lg font-semibold mb-1 flex items-center gap-2\">\r\n                                            <BarChart3 className=\"h-5 w-5\" />\r\n                                            Overall Grade Prediction\r\n                                        </h3>\r\n                                        <p className=\"text-indigo-100 text-sm\">Based on current academic standards</p>\r\n                                    </div>\r\n                                    <div className=\"text-right\">\r\n                                        <div className=\"text-5xl font-black tracking-tight\">{data.overallGrade || 'N/A'}</div>\r\n                                        <div className=\"text-sm text-indigo-200 mt-1\">Academic Level</div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Detailed Scores */}\r\n                            <div className=\"grid sm:grid-cols-2 gap-4\">\r\n                                {[\r\n                                    { label: 'Structure Quality', score: data.structureScore },\r\n                                    { label: 'Academic Tone', score: data.toneScore },\r\n                                    { label: 'Clarity & Coherence', score: data.clarityScore },\r\n                                    { label: 'Plagiarism Risk', score: data.plagiarismScore }\r\n                                ].map((item) => (\r\n                                    <div\r\n                                        key={item.label}\r\n                                        className=\"bg-gradient-to-br from-white to-slate-50/50 p-5 rounded-xl border border-slate-200 shadow-sm hover:shadow-md transition-shadow\"\r\n                                    >\r\n                                        <div className=\"flex items-center justify-between mb-3\">\r\n                                            <div className=\"flex items-center gap-2\">\r\n                                                <div className=\"bg-indigo-100 h-8 w-8 rounded-lg flex items-center justify-center\">\r\n                                                    <BarChart3 className=\"h-4 w-4 text-indigo-600\" />\r\n                                                </div>\r\n                                                <span className=\"font-semibold text-slate-700 text-sm\">{item.label}</span>\r\n                                            </div>\r\n                                            <span className=\"font-bold text-lg text-indigo-600\">\r\n                                                {item.score ?? 0}/100\r\n                                            </span>\r\n                                        </div>\r\n                                        <div className=\"h-2.5 bg-slate-200 rounded-full overflow-hidden\">\r\n                                            <div\r\n                                                className=\"h-full bg-indigo-600 rounded-full transition-all duration-1000\"\r\n                                                style={{ width: `${item.score ?? 0}%` }}\r\n                                            ></div>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n\r\n                            {/* Inspiration Link Removed */}\r\n\r\n                            {/* Actionable Feedback */}\r\n                            <div className=\"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden\">\r\n                                <div className=\"p-4 bg-gradient-to-r from-slate-50 to-indigo-50/30 border-b border-slate-100 font-semibold text-slate-900 flex items-center gap-2\">\r\n                                    <Info className=\"h-4 w-4 text-indigo-600\" />\r\n                                    Key Improvements & Insights\r\n                                </div>\r\n                                <div className=\"divide-y divide-slate-100\">\r\n                                    {data.insights?.map((item, idx) => (\r\n                                        <div key={idx} className=\"p-4 flex gap-4 hover:bg-slate-50/50 transition-colors\">\r\n                                            <div\r\n                                                className=\"h-10 w-10 rounded-lg flex items-center justify-center flex-shrink-0 bg-blue-100\"\r\n                                            >\r\n                                                <Info className=\"h-5 w-5 text-blue-600\" />\r\n                                            </div>\r\n                                            <div className=\"flex-1\">\r\n                                                <p className=\"text-sm font-semibold text-slate-900 mb-1\">{item.title}</p>\r\n                                                <p className=\"text-sm text-slate-600 leading-relaxed\">{item.description}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        </>\r\n                    ) : null}\r\n                </div>\r\n\r\n                {/* Footer */}\r\n                <div className=\"px-6 py-4 bg-slate-50 border-t border-slate-100 flex justify-end gap-3 flex-shrink-0\">\r\n                    <Button variant=\"outline\" onClick={onClose} className=\"border-slate-200\">\r\n                        Close Report\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\components\\modals\\DocumentSettingsModal.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\components\\modals\\IntakeModal.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\components\\modals\\TemplateSelectionModal.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\components\\onboarding\\OnboardingFlow.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":215,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":215,"endColumn":38},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":220,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":220,"endColumn":32}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { Card, CardContent } from '../ui/Card';\r\nimport { Button } from '../ui/Button';\r\nimport { ShieldCheck, Zap, CheckCircle2, ArrowRight, Sparkles } from 'lucide-react';\r\n\r\nconst ONBOARDING_STORAGE_KEY = 'docley_onboarding_completed';\r\n\r\nexport function OnboardingFlow({ onComplete }) {\r\n    const [step, setStep] = useState(1);\r\n\r\n    // Check if onboarding was already completed\r\n    useEffect(() => {\r\n        const completed = localStorage.getItem(ONBOARDING_STORAGE_KEY);\r\n        if (completed === 'true') {\r\n            onComplete();\r\n        }\r\n    }, [onComplete]);\r\n\r\n    const handleNext = () => {\r\n        if (step === 1) {\r\n            setStep(2);\r\n        } else {\r\n            // Mark as completed and close\r\n            localStorage.setItem(ONBOARDING_STORAGE_KEY, 'true');\r\n            onComplete();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300\">\r\n            <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-3xl overflow-hidden animate-in zoom-in-95 duration-300 max-h-[90vh] flex flex-col\">\r\n                {/* Header */}\r\n                <div className=\"px-6 py-5 bg-gradient-to-r from-indigo-50 via-white to-indigo-50/30 border-b border-slate-100 flex items-center justify-between flex-shrink-0\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <div className=\"h-10 w-10 rounded-lg bg-gradient-to-br from-indigo-500 to-indigo-600 flex items-center justify-center\">\r\n                            <Sparkles className=\"h-5 w-5 text-white\" />\r\n                        </div>\r\n                        <div>\r\n                            <h2 className=\"text-xl font-bold text-slate-900\">\r\n                                {step === 1 ? 'Welcome to Docley' : 'Getting Started'}\r\n                            </h2>\r\n                            <p className=\"text-sm text-slate-500\">\r\n                                {step === 1 ? 'Step 1 of 2' : 'Step 2 of 2'}\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <div className=\"flex gap-1.5\">\r\n                            <div className={`h-2 w-2 rounded-full transition-all ${step === 1 ? 'bg-indigo-600' : 'bg-slate-300'}`}></div>\r\n                            <div className={`h-2 w-2 rounded-full transition-all ${step === 2 ? 'bg-indigo-600' : 'bg-slate-300'}`}></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <div className=\"p-8 overflow-y-auto custom-scrollbar flex-1\">\r\n                    {step === 1 ? (\r\n                        // Academic Safety Step\r\n                        <div className=\"space-y-6 animate-in fade-in slide-in-from-right duration-300\">\r\n                            <div className=\"text-center mb-8\">\r\n                                <div className=\"inline-flex items-center justify-center h-20 w-20 rounded-2xl bg-gradient-to-br from-amber-100 to-amber-50 mb-4\">\r\n                                    <ShieldCheck className=\"h-10 w-10 text-amber-600\" />\r\n                                </div>\r\n                                <h3 className=\"text-2xl font-bold text-slate-900 mb-2\">Academic Safety First</h3>\r\n                                <p className=\"text-slate-600 max-w-xl mx-auto\">\r\n                                    Understanding how Docley protects your academic integrity\r\n                                </p>\r\n                            </div>\r\n\r\n                            <Card className=\"border-slate-200 bg-white shadow-sm\">\r\n                                <CardContent className=\"p-6 space-y-4\">\r\n                                    <div className=\"flex items-start gap-4\">\r\n                                        <div className=\"h-12 w-12 rounded-lg bg-amber-100 flex items-center justify-center flex-shrink-0\">\r\n                                            <ShieldCheck className=\"h-6 w-6 text-amber-600\" />\r\n                                        </div>\r\n                                        <div className=\"flex-1\">\r\n                                            <h4 className=\"font-bold text-slate-900 mb-2\">Your Work, Your Voice</h4>\r\n                                            <p className=\"text-sm text-slate-600 leading-relaxed\">\r\n                                                Academic Transformer upgrades the work you already wroteâ€”it does not replace you or generate\r\n                                                full assignments from scratch. This helps you stay closer to your own voice while reducing risk.\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n                                </CardContent>\r\n                            </Card>\r\n\r\n                            <div className=\"space-y-3\">\r\n                                <h4 className=\"font-semibold text-slate-900\">How We Keep You Safe:</h4>\r\n                                {[\r\n                                    'Highlights weak structure, tone issues, and missing citations',\r\n                                    'Encourages you to review every change before exporting',\r\n                                    'Keeps a clear separation between your draft and the upgraded version',\r\n                                    'Prioritizes originality and safe paraphrasing techniques',\r\n                                ].map((item, idx) => (\r\n                                    <Card key={idx} className=\"border-slate-200 bg-gradient-to-r from-white to-slate-50/50\">\r\n                                        <CardContent className=\"p-4\">\r\n                                            <div className=\"flex items-start gap-3\">\r\n                                                <CheckCircle2 className=\"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0\" />\r\n                                                <p className=\"text-sm text-slate-700 leading-relaxed\">{item}</p>\r\n                                            </div>\r\n                                        </CardContent>\r\n                                    </Card>\r\n                                ))}\r\n                            </div>\r\n\r\n                            <div className=\"bg-indigo-50 border border-indigo-100 rounded-xl p-5\">\r\n                                <div className=\"flex items-start gap-3\">\r\n                                    <div className=\"h-6 w-6 rounded-full bg-indigo-100 flex items-center justify-center flex-shrink-0 mt-0.5\">\r\n                                        <Sparkles className=\"h-3.5 w-3.5 text-indigo-600\" />\r\n                                    </div>\r\n                                    <p className=\"text-sm text-indigo-900 leading-relaxed\">\r\n                                        <span className=\"font-semibold\">Remember:</span> Docley is a transformation tool, not a replacement for your work. \r\n                                        Always review changes and ensure the final output reflects your understanding and voice.\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ) : (\r\n                        // Quick Guide Step\r\n                        <div className=\"space-y-6 animate-in fade-in slide-in-from-right duration-300\">\r\n                            <div className=\"text-center mb-8\">\r\n                                <div className=\"inline-flex items-center justify-center h-20 w-20 rounded-2xl bg-gradient-to-br from-indigo-100 to-indigo-50 mb-4\">\r\n                                    <Zap className=\"h-10 w-10 text-indigo-600\" />\r\n                                </div>\r\n                                <h3 className=\"text-2xl font-bold text-slate-900 mb-2\">Quick Start Guide</h3>\r\n                                <p className=\"text-slate-600 max-w-xl mx-auto\">\r\n                                    Follow these simple steps to transform your first assignment\r\n                                </p>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-4\">\r\n                                {[\r\n                                    {\r\n                                        step: 1,\r\n                                        title: 'Create Your Document',\r\n                                        description: 'Click \"Upgrade New Assignment\" and enter basic details like title, type, academic level, and citation style.',\r\n                                    },\r\n                                    {\r\n                                        step: 2,\r\n                                        title: 'Paste Your Draft',\r\n                                        description: 'Copy and paste your rough draft into the rich text editor. You can also upload a document file (.docx or .pdf).',\r\n                                    },\r\n                                    {\r\n                                        step: 3,\r\n                                        title: 'Run Diagnostics',\r\n                                        description: 'Click \"Run Diagnostics\" to get a comprehensive analysis of your document\\'s structure, tone, clarity, and citation quality.',\r\n                                    },\r\n                                    {\r\n                                        step: 4,\r\n                                        title: 'Apply the Upgrade',\r\n                                        description: 'Review the diagnostic report, then click \"Run Upgrade\" to transform your draft into submission-ready academic writing.',\r\n                                    },\r\n                                    {\r\n                                        step: 5,\r\n                                        title: 'Review & Export',\r\n                                        description: 'Review all changes in the editor, make any adjustments, then export as DOCX or PDF and submit with confidence.',\r\n                                    },\r\n                                ].map((item) => (\r\n                                    <Card key={item.step} className=\"border-slate-200 bg-white hover:shadow-md transition-shadow\">\r\n                                        <CardContent className=\"p-5\">\r\n                                            <div className=\"flex items-start gap-4\">\r\n                                                <div className=\"h-10 w-10 rounded-lg bg-gradient-to-br from-indigo-500 to-indigo-600 text-white flex items-center justify-center text-sm font-bold flex-shrink-0\">\r\n                                                    {item.step}\r\n                                                </div>\r\n                                                <div className=\"flex-1\">\r\n                                                    <h4 className=\"font-semibold text-slate-900 mb-1.5\">{item.title}</h4>\r\n                                                    <p className=\"text-sm text-slate-600 leading-relaxed\">{item.description}</p>\r\n                                                </div>\r\n                                            </div>\r\n                                        </CardContent>\r\n                                    </Card>\r\n                                ))}\r\n                            </div>\r\n\r\n                            <div className=\"bg-gradient-to-br from-indigo-50 to-white border border-indigo-100 rounded-xl p-5\">\r\n                                <div className=\"flex items-start gap-3\">\r\n                                    <Zap className=\"h-5 w-5 text-indigo-600 mt-0.5 flex-shrink-0\" />\r\n                                    <div>\r\n                                        <p className=\"text-sm font-semibold text-indigo-900 mb-1\">Ready to get started?</p>\r\n                                        <p className=\"text-sm text-indigo-700 leading-relaxed\">\r\n                                            You're all set! Head to your dashboard to create your first document upgrade.\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Footer */}\r\n                <div className=\"px-6 py-4 bg-slate-50 border-t border-slate-100 flex justify-end gap-3 flex-shrink-0\">\r\n                    <Button\r\n                        onClick={handleNext}\r\n                        className=\"bg-gradient-to-r from-indigo-600 to-indigo-700 hover:from-indigo-700 hover:to-indigo-800 text-white shadow-lg shadow-indigo-500/25 min-w-[120px]\"\r\n                    >\r\n                        {step === 1 ? (\r\n                            <>\r\n                                Next\r\n                                <ArrowRight className=\"ml-2 h-4 w-4\" />\r\n                            </>\r\n                        ) : (\r\n                            <>\r\n                                Get Started\r\n                                <ArrowRight className=\"ml-2 h-4 w-4\" />\r\n                            </>\r\n                        )}\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n// Helper function to check if onboarding is completed\r\nexport function isOnboardingCompleted() {\r\n    return localStorage.getItem(ONBOARDING_STORAGE_KEY) === 'true';\r\n}\r\n\r\n// Helper function to reset onboarding (for testing)\r\nexport function resetOnboarding() {\r\n    localStorage.removeItem(ONBOARDING_STORAGE_KEY);\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\components\\ui\\Button.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\components\\ui\\Card.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\components\\ui\\ColorPicker.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\components\\ui\\DocleyLogo.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\components\\ui\\FloatingDocuments.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\components\\ui\\Modal.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\components\\ui\\NotificationBell.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":77,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":77,"endColumn":27},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadNotifications'. Either include it or remove the dependency array.","line":97,"column":8,"nodeType":"ArrayExpression","endLine":97,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [loadNotifications]","fix":{"range":[4322,4324],"text":"[loadNotifications]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useRef } from 'react';\r\nimport { Bell, X, Check, Trash2, UserPlus, FileText, Sparkles, Download, MessageSquare, AlertCircle, Loader2 } from 'lucide-react';\r\nimport { getNotifications, getUnreadCount, markAsRead, markAllAsRead, deleteNotification } from '../../services/notificationsService';\r\nimport { useTheme } from '../../context/ThemeContext';\r\nimport { useToast } from '../../context/ToastContext';\r\nimport { cn } from '../../lib/utils';\r\n\r\nconst notificationIcons = {\r\n    user_signup: UserPlus,\r\n    document_created: FileText,\r\n    document_upgraded: Sparkles,\r\n    document_exported: Download,\r\n    feedback_submitted: MessageSquare,\r\n    user_banned: AlertCircle,\r\n    user_unbanned: UserPlus,\r\n    system_alert: AlertCircle,\r\n};\r\n\r\nconst notificationColors = {\r\n    user_signup: 'bg-blue-500/20 text-blue-200 border-blue-500/30',\r\n    document_created: 'bg-indigo-500/20 text-indigo-200 border-indigo-500/30',\r\n    document_upgraded: 'bg-orange-500/20 text-orange-200 border-orange-500/30',\r\n    document_exported: 'bg-green-500/20 text-green-200 border-green-500/30',\r\n    feedback_submitted: 'bg-purple-500/20 text-purple-200 border-purple-500/30',\r\n    user_banned: 'bg-red-500/20 text-red-200 border-red-500/30',\r\n    user_unbanned: 'bg-emerald-500/20 text-emerald-200 border-emerald-500/30',\r\n    system_alert: 'bg-amber-500/20 text-amber-200 border-amber-500/30',\r\n};\r\n\r\nexport function NotificationBell() {\r\n    const { theme } = useTheme();\r\n    const { addToast } = useToast();\r\n    const isDark = theme === 'dark';\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [notifications, setNotifications] = useState([]);\r\n    const [unreadCount, setUnreadCount] = useState(0);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [previousUnreadCount, setPreviousUnreadCount] = useState(0);\r\n    const dropdownRef = useRef(null);\r\n\r\n    const loadNotifications = async () => {\r\n        setIsLoading(true);\r\n        try {\r\n            const [notifs, count] = await Promise.all([\r\n                getNotifications(),\r\n                getUnreadCount(),\r\n            ]);\r\n            \r\n            // Check if new notifications arrived\r\n            if (count > previousUnreadCount && previousUnreadCount >= 0) {\r\n                const newCount = count - previousUnreadCount;\r\n                // Show toast for new notifications\r\n                if (newCount > 0) {\r\n                    addToast(\r\n                        `${newCount} new notification${newCount > 1 ? 's' : ''} received`,\r\n                        'info'\r\n                    );\r\n                }\r\n                \r\n                // Play subtle notification sound (if browser allows)\r\n                try {\r\n                    // Create a simple beep sound using Web Audio API\r\n                    const audioContext = new (window.AudioContext || window.webkitAudioContext)();\r\n                    const oscillator = audioContext.createOscillator();\r\n                    const gainNode = audioContext.createGain();\r\n                    \r\n                    oscillator.connect(gainNode);\r\n                    gainNode.connect(audioContext.destination);\r\n                    \r\n                    oscillator.frequency.value = 800;\r\n                    oscillator.type = 'sine';\r\n                    gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);\r\n                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);\r\n                    \r\n                    oscillator.start(audioContext.currentTime);\r\n                    oscillator.stop(audioContext.currentTime + 0.2);\r\n                } catch (e) {\r\n                    // Ignore audio errors (browser may not support)\r\n                }\r\n            }\r\n            \r\n            setNotifications(notifs);\r\n            setPreviousUnreadCount(count);\r\n            setUnreadCount(count);\r\n        } catch (error) {\r\n            console.error('Failed to load notifications:', error);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        loadNotifications();\r\n        // Poll for new notifications every 30 seconds\r\n        const interval = setInterval(loadNotifications, 30000);\r\n        return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    // Close dropdown when clicking outside\r\n    useEffect(() => {\r\n        const handleClickOutside = (event) => {\r\n            if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\r\n                setIsOpen(false);\r\n            }\r\n        };\r\n\r\n        if (isOpen) {\r\n            document.addEventListener('mousedown', handleClickOutside);\r\n        }\r\n\r\n        return () => {\r\n            document.removeEventListener('mousedown', handleClickOutside);\r\n        };\r\n    }, [isOpen]);\r\n\r\n    const handleMarkAsRead = async (id) => {\r\n        try {\r\n            await markAsRead(id);\r\n            setNotifications(prev =>\r\n                prev.map(n => n.id === id ? { ...n, read: true } : n)\r\n            );\r\n            setUnreadCount(prev => Math.max(0, prev - 1));\r\n        } catch (error) {\r\n            console.error('Failed to mark as read:', error);\r\n        }\r\n    };\r\n\r\n    const handleMarkAllAsRead = async () => {\r\n        try {\r\n            await markAllAsRead();\r\n            setNotifications(prev => prev.map(n => ({ ...n, read: true })));\r\n            setUnreadCount(0);\r\n        } catch (error) {\r\n            console.error('Failed to mark all as read:', error);\r\n        }\r\n    };\r\n\r\n    const handleDelete = async (id) => {\r\n        try {\r\n            await deleteNotification(id);\r\n            setNotifications(prev => prev.filter(n => n.id !== id));\r\n            const deleted = notifications.find(n => n.id === id);\r\n            if (deleted && !deleted.read) {\r\n                setUnreadCount(prev => Math.max(0, prev - 1));\r\n            }\r\n        } catch (error) {\r\n            console.error('Failed to delete notification:', error);\r\n        }\r\n    };\r\n\r\n    const formatTime = (dateString) => {\r\n        const date = new Date(dateString);\r\n        const now = new Date();\r\n        const diffMs = now - date;\r\n        const diffMins = Math.floor(diffMs / 60000);\r\n        const diffHours = Math.floor(diffMs / 3600000);\r\n        const diffDays = Math.floor(diffMs / 86400000);\r\n\r\n        if (diffMins < 1) return 'Just now';\r\n        if (diffMins < 60) return `${diffMins}m ago`;\r\n        if (diffHours < 24) return `${diffHours}h ago`;\r\n        if (diffDays < 7) return `${diffDays}d ago`;\r\n        return date.toLocaleDateString();\r\n    };\r\n\r\n    return (\r\n        <div className=\"relative\" ref={dropdownRef}>\r\n            <button\r\n                onClick={() => {\r\n                    setIsOpen(!isOpen);\r\n                    if (!isOpen) {\r\n                        loadNotifications();\r\n                    }\r\n                }}\r\n                className={cn(\r\n                    \"relative p-2 rounded-lg transition-all duration-200\",\r\n                    isDark\r\n                        ? \"hover:bg-white/10 text-slate-200\"\r\n                        : \"hover:bg-slate-100 text-slate-700\"\r\n                )}\r\n                title={unreadCount > 0 ? `${unreadCount} unread notification${unreadCount > 1 ? 's' : ''}` : 'No new notifications'}\r\n            >\r\n                <Bell className={cn(\r\n                    \"h-5 w-5 transition-all\",\r\n                    unreadCount > 0 && \"text-orange-500\"\r\n                )} />\r\n                {unreadCount > 0 && (\r\n                    <span className={cn(\r\n                        \"absolute -top-1 -right-1 h-5 w-5 rounded-full flex items-center justify-center text-xs font-bold\",\r\n                        \"bg-gradient-to-r from-orange-500 to-red-500 text-white border-2 shadow-lg shadow-orange-500/50\",\r\n                        isDark ? \"border-slate-900\" : \"border-white\",\r\n                        \"animate-pulse\"\r\n                    )}>\r\n                        {unreadCount > 9 ? '9+' : unreadCount}\r\n                    </span>\r\n                )}\r\n            </button>\r\n\r\n            {isOpen && (\r\n                <div className={cn(\r\n                    \"absolute right-0 top-full mt-2 w-96 max-h-[600px] rounded-xl shadow-2xl border z-50\",\r\n                    \"flex flex-col\",\r\n                    isDark\r\n                        ? \"bg-slate-900 border-white/10\"\r\n                        : \"bg-white border-slate-200\"\r\n                )}>\r\n                    {/* Header */}\r\n                    <div className={cn(\r\n                        \"flex items-center justify-between p-4 border-b\",\r\n                        isDark ? \"border-white/10\" : \"border-slate-200\"\r\n                    )}>\r\n                        <div>\r\n                            <h3 className={cn(\"font-bold\", isDark ? \"text-white\" : \"text-slate-900\")}>\r\n                                Notifications\r\n                            </h3>\r\n                            {unreadCount > 0 && (\r\n                                <p className={cn(\"text-xs mt-1\", isDark ? \"text-slate-400\" : \"text-slate-500\")}>\r\n                                    {unreadCount} unread\r\n                                </p>\r\n                            )}\r\n                        </div>\r\n                        <div className=\"flex items-center gap-2\">\r\n                            {unreadCount > 0 && (\r\n                                <button\r\n                                    onClick={handleMarkAllAsRead}\r\n                                    className={cn(\r\n                                        \"p-1.5 rounded-lg transition-colors text-xs\",\r\n                                        isDark\r\n                                            ? \"hover:bg-white/10 text-slate-300\"\r\n                                            : \"hover:bg-slate-100 text-slate-600\"\r\n                                    )}\r\n                                    title=\"Mark all as read\"\r\n                                >\r\n                                    <Check className=\"h-4 w-4\" />\r\n                                </button>\r\n                            )}\r\n                            <button\r\n                                onClick={() => setIsOpen(false)}\r\n                                className={cn(\r\n                                    \"p-1.5 rounded-lg transition-colors\",\r\n                                    isDark\r\n                                        ? \"hover:bg-white/10 text-slate-300\"\r\n                                        : \"hover:bg-slate-100 text-slate-600\"\r\n                                )}\r\n                            >\r\n                                <X className=\"h-4 w-4\" />\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Notifications List */}\r\n                    <div className=\"flex-1 overflow-y-auto custom-scrollbar\">\r\n                        {isLoading ? (\r\n                            <div className=\"flex items-center justify-center py-12\">\r\n                                <Loader2 className=\"h-6 w-6 text-orange-500 animate-spin\" />\r\n                            </div>\r\n                        ) : notifications.length === 0 ? (\r\n                            <div className=\"text-center py-12 px-4\">\r\n                                <Bell className={cn(\"h-12 w-12 mx-auto mb-4\", isDark ? \"text-slate-600\" : \"text-slate-400\")} />\r\n                                <p className={cn(\"text-sm font-medium\", isDark ? \"text-slate-300\" : \"text-slate-600\")}>\r\n                                    No notifications yet\r\n                                </p>\r\n                                <p className={cn(\"text-xs mt-2\", isDark ? \"text-slate-500\" : \"text-slate-500\")}>\r\n                                    You'll see notifications here when events occur\r\n                                </p>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"divide-y\" style={{ borderColor: isDark ? 'rgba(255,255,255,0.05)' : 'rgba(0,0,0,0.1)' }}>\r\n                                {notifications.map((notification) => {\r\n                                    const Icon = notificationIcons[notification.type] || Bell;\r\n                                    const colorClass = notificationColors[notification.type] || notificationColors.system_alert;\r\n\r\n                                    return (\r\n                                        <div\r\n                                            key={notification.id}\r\n                                            className={cn(\r\n                                                \"p-4 transition-colors cursor-pointer group\",\r\n                                                !notification.read && isDark && \"bg-orange-500/5\",\r\n                                                !notification.read && !isDark && \"bg-orange-50\",\r\n                                                isDark ? \"hover:bg-white/5\" : \"hover:bg-slate-50\"\r\n                                            )}\r\n                                            onClick={() => !notification.read && handleMarkAsRead(notification.id)}\r\n                                        >\r\n                                            <div className=\"flex items-start gap-3\">\r\n                                                <div className={cn(\r\n                                                    \"h-10 w-10 rounded-lg flex items-center justify-center flex-shrink-0 border\",\r\n                                                    colorClass\r\n                                                )}>\r\n                                                    <Icon className=\"h-5 w-5\" />\r\n                                                </div>\r\n                                                <div className=\"flex-1 min-w-0\">\r\n                                                    <div className=\"flex items-start justify-between gap-2\">\r\n                                                        <div className=\"flex-1\">\r\n                                                            <p className={cn(\r\n                                                                \"text-sm font-semibold\",\r\n                                                                !notification.read && \"font-bold\",\r\n                                                                isDark ? \"text-white\" : \"text-slate-900\"\r\n                                                            )}>\r\n                                                                {notification.title}\r\n                                                            </p>\r\n                                                            <p className={cn(\r\n                                                                \"text-xs mt-1 leading-relaxed\",\r\n                                                                isDark ? \"text-slate-300\" : \"text-slate-600\"\r\n                                                            )}>\r\n                                                                {notification.message}\r\n                                                            </p>\r\n                                                        </div>\r\n                                                        {!notification.read && (\r\n                                                            <span className=\"h-2 w-2 rounded-full bg-orange-500 flex-shrink-0 mt-1\" />\r\n                                                        )}\r\n                                                    </div>\r\n                                                    <div className=\"flex items-center justify-between mt-2\">\r\n                                                        <span className={cn(\r\n                                                            \"text-xs\",\r\n                                                            isDark ? \"text-slate-500\" : \"text-slate-400\"\r\n                                                        )}>\r\n                                                            {formatTime(notification.created_at)}\r\n                                                        </span>\r\n                                                        <button\r\n                                                            onClick={(e) => {\r\n                                                                e.stopPropagation();\r\n                                                                handleDelete(notification.id);\r\n                                                            }}\r\n                                                            className={cn(\r\n                                                                \"opacity-0 group-hover:opacity-100 p-1 rounded transition-opacity\",\r\n                                                                isDark\r\n                                                                    ? \"hover:bg-white/10 text-slate-400\"\r\n                                                                    : \"hover:bg-slate-200 text-slate-500\"\r\n                                                            )}\r\n                                                        >\r\n                                                            <Trash2 className=\"h-3.5 w-3.5\" />\r\n                                                        </button>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    );\r\n                                })}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Footer */}\r\n                    {notifications.length > 0 && (\r\n                        <div className={cn(\r\n                            \"p-3 border-t text-center\",\r\n                            isDark ? \"border-white/10\" : \"border-slate-200\"\r\n                        )}>\r\n                            <button\r\n                                onClick={loadNotifications}\r\n                                className={cn(\r\n                                    \"text-xs font-medium transition-colors\",\r\n                                    isDark\r\n                                        ? \"text-slate-400 hover:text-white\"\r\n                                        : \"text-slate-500 hover:text-slate-700\"\r\n                                )}\r\n                            >\r\n                                Refresh\r\n                            </button>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\components\\ui\\PWAInstallPrompt.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  14 |         // Check if already installed\n  15 |         if (window.matchMedia('(display-mode: standalone)').matches) {\n> 16 |             setIsInstalled(true);\n     |             ^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  17 |             return;\n  18 |         }\n  19 |","line":16,"column":13,"nodeType":null,"endLine":16,"endColumn":27}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { Download, X } from 'lucide-react';\r\nimport { cn } from '../../lib/utils';\r\nimport { useTheme } from '../../context/ThemeContext';\r\n\r\nexport function PWAInstallPrompt({ delaySeconds = 120 }) {\r\n    const [deferredPrompt, setDeferredPrompt] = useState(null);\r\n    const [showPrompt, setShowPrompt] = useState(false);\r\n    const [isInstalled, setIsInstalled] = useState(false);\r\n    const { theme } = useTheme();\r\n    const isDark = theme === 'dark';\r\n\r\n    useEffect(() => {\r\n        // Check if already installed\r\n        if (window.matchMedia('(display-mode: standalone)').matches) {\r\n            setIsInstalled(true);\r\n            return;\r\n        }\r\n\r\n        // Check if user dismissed the prompt before\r\n        const dismissed = localStorage.getItem('pwa-install-dismissed');\r\n        if (dismissed) {\r\n            const dismissedTime = parseInt(dismissed, 10);\r\n            // Don't show again for 7 days\r\n            if (Date.now() - dismissedTime < 7 * 24 * 60 * 60 * 1000) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        // Listen for the beforeinstallprompt event\r\n        const handleBeforeInstallPrompt = (e) => {\r\n            // Prevent the mini-infobar from appearing on mobile\r\n            e.preventDefault();\r\n            // Store the event for later use\r\n            setDeferredPrompt(e);\r\n\r\n            // Show prompt after delay\r\n            const timer = setTimeout(() => {\r\n                setShowPrompt(true);\r\n            }, delaySeconds * 1000);\r\n\r\n            return () => clearTimeout(timer);\r\n        };\r\n\r\n        window.addEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\r\n\r\n        // Listen for app installed event\r\n        window.addEventListener('appinstalled', () => {\r\n            setIsInstalled(true);\r\n            setShowPrompt(false);\r\n            setDeferredPrompt(null);\r\n        });\r\n\r\n        return () => {\r\n            window.removeEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\r\n        };\r\n    }, [delaySeconds]);\r\n\r\n    const handleInstall = async () => {\r\n        if (!deferredPrompt) return;\r\n\r\n        // Show the install prompt\r\n        deferredPrompt.prompt();\r\n\r\n        // Wait for the user's response\r\n        const { outcome } = await deferredPrompt.userChoice;\r\n\r\n        if (outcome === 'accepted') {\r\n            console.log('User accepted the install prompt');\r\n        } else {\r\n            console.log('User dismissed the install prompt');\r\n        }\r\n\r\n        // Clear the deferred prompt\r\n        setDeferredPrompt(null);\r\n        setShowPrompt(false);\r\n    };\r\n\r\n    const handleDismiss = () => {\r\n        setShowPrompt(false);\r\n        // Remember dismissal for 7 days\r\n        localStorage.setItem('pwa-install-dismissed', Date.now().toString());\r\n    };\r\n\r\n    // Don't render if already installed or no prompt available\r\n    if (isInstalled || !showPrompt) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <div\r\n            className={cn(\r\n                \"fixed bottom-6 right-6 z-50 max-w-xs w-full\",\r\n                \"animate-in slide-in-from-bottom-4 fade-in duration-500\"\r\n            )}\r\n        >\r\n            <div\r\n                className={cn(\r\n                    \"rounded-2xl shadow-2xl border p-5 backdrop-blur-xl\",\r\n                    isDark\r\n                        ? \"bg-slate-900/95 border-slate-700/50 text-white\"\r\n                        : \"bg-white/95 border-slate-200 text-slate-900\"\r\n                )}\r\n            >\r\n                {/* Close button */}\r\n                <button\r\n                    onClick={handleDismiss}\r\n                    className={cn(\r\n                        \"absolute top-3 right-3 p-1 rounded-lg transition-colors\",\r\n                        isDark\r\n                            ? \"text-slate-400 hover:text-white hover:bg-slate-800\"\r\n                            : \"text-slate-400 hover:text-slate-900 hover:bg-slate-100\"\r\n                    )}\r\n                >\r\n                    <X className=\"h-4 w-4\" />\r\n                </button>\r\n\r\n                {/* Header */}\r\n                <div className=\"flex items-start gap-3 mb-4\">\r\n                    {/* App icon */}\r\n                    <div className=\"flex-shrink-0 w-10 h-10 rounded-xl bg-gradient-to-br from-orange-500 to-blue-500 flex items-center justify-center shadow-lg shadow-orange-500/20\">\r\n                        <span className=\"text-white font-bold text-lg\">D</span>\r\n                    </div>\r\n                    <div className=\"flex-1 min-w-0 pr-4\">\r\n                        <h3 className={cn(\r\n                            \"font-semibold text-base\",\r\n                            isDark ? \"text-white\" : \"text-slate-900\"\r\n                        )}>\r\n                            Install Docley App\r\n                        </h3>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Description */}\r\n                <p className={cn(\r\n                    \"text-sm mb-5\",\r\n                    isDark ? \"text-slate-300\" : \"text-slate-600\"\r\n                )}>\r\n                    Install Docley on your device for a better mobile experience and quick access.\r\n                </p>\r\n\r\n                {/* Buttons */}\r\n                <div className=\"flex gap-3\">\r\n                    <button\r\n                        onClick={handleInstall}\r\n                        className=\"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-semibold text-sm shadow-lg shadow-orange-500/25 transition-all active:scale-95\"\r\n                    >\r\n                        <Download className=\"h-4 w-4\" />\r\n                        Install\r\n                    </button>\r\n                    <button\r\n                        onClick={handleDismiss}\r\n                        className={cn(\r\n                            \"flex-1 px-4 py-2.5 rounded-xl font-semibold text-sm border transition-all active:scale-95\",\r\n                            isDark\r\n                                ? \"bg-slate-800 border-slate-700 text-slate-300 hover:bg-slate-700\"\r\n                                : \"bg-slate-100 border-slate-200 text-slate-700 hover:bg-slate-200\"\r\n                        )}\r\n                    >\r\n                        Not Now\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\components\\ui\\ThemeToggle.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\context\\AuthContext.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":7,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":7,"endColumn":21},{"ruleId":"no-unused-vars","severity":2,"message":"'signUp' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":147,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":147,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"signUp"},"fix":{"range":[5610,6050],"text":""},"desc":"Remove unused variable 'signUp'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'signIn' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":164,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":164,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"signIn"},"fix":{"range":[6098,6614],"text":""},"desc":"Remove unused variable 'signIn'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'signInWithGoogle' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":182,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":182,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"signInWithGoogle"},"fix":{"range":[6650,6982],"text":""},"desc":"Remove unused variable 'signInWithGoogle'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'signOut' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":195,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":195,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"signOut"},"fix":{"range":[7007,7135],"text":""},"desc":"Remove unused variable 'signOut'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'resetPassword' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":201,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":201,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"resetPassword"},"fix":{"range":[7185,7456],"text":""},"desc":"Remove unused variable 'resetPassword'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'updatePassword' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":211,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":211,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"updatePassword"},"fix":{"range":[7516,7743],"text":""},"desc":"Remove unused variable 'updatePassword'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'resendVerificationEmail' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":221,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":221,"endColumn":34,"suggestions":[{"messageId":"removeVar","data":{"varName":"resendVerificationEmail"},"fix":{"range":[7785,8141],"text":""},"desc":"Remove unused variable 'resendVerificationEmail'."}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createContext, useContext, useEffect, useState, useMemo, useRef, useCallback } from 'react';\r\nimport { supabase } from '../lib/supabase';\r\nimport apiClient from '../api/client';\r\n\r\nconst AuthContext = createContext({});\r\n\r\nexport const useAuth = () => {\r\n    const context = useContext(AuthContext);\r\n    if (!context) {\r\n        throw new Error('useAuth must be used within an AuthProvider');\r\n    }\r\n    return context;\r\n};\r\n\r\nexport function AuthProvider({ children }) {\r\n    const [user, setUser] = useState(null);\r\n    const [session, setSession] = useState(null);\r\n    const [profile, setProfile] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [profileLoading, setProfileLoading] = useState(false);\r\n    const [serverError, setServerError] = useState(false);\r\n\r\n    // Refs for safety\r\n    const lastFetchedId = useRef(null);\r\n    const fetchTimeoutRef = useRef(null);\r\n\r\n    const fetchProfile = useCallback(async (userId) => {\r\n        if (!userId) {\r\n            console.log('[Auth] No userId, skipping profile fetch');\r\n            setLoading(false);\r\n            return null;\r\n        }\r\n\r\n        // Prevent duplicate fetches for the same ID if we already have it\r\n        if (lastFetchedId.current === userId && profile) {\r\n            setLoading(false);\r\n            return profile;\r\n        }\r\n\r\n        try {\r\n            console.log(`[Auth] Fetching profile via API: ${userId}`);\r\n            setProfileLoading(true);\r\n            setServerError(false); // Reset error on retry\r\n            lastFetchedId.current = userId;\r\n\r\n            // 10s Safety Timeout\r\n            if (fetchTimeoutRef.current) clearTimeout(fetchTimeoutRef.current);\r\n            fetchTimeoutRef.current = setTimeout(() => {\r\n                if (loading || profileLoading) {\r\n                    console.warn('[Auth] Safety timeout reached. Server likely unreachable.');\r\n                    setLoading(false);\r\n                    setProfileLoading(false);\r\n                    setServerError(true); // Signal server unreachable\r\n                }\r\n            }, 10000);\r\n\r\n            // 1. Check Cache\r\n            const cached = sessionStorage.getItem(`profile_${userId}`);\r\n            if (cached) {\r\n                const parsed = JSON.parse(cached);\r\n                if (parsed && Object.prototype.hasOwnProperty.call(parsed, 'is_premium')) {\r\n                    setProfile(parsed);\r\n                    setProfileLoading(false);\r\n                    setLoading(false);\r\n                    if (fetchTimeoutRef.current) clearTimeout(fetchTimeoutRef.current);\r\n                    return parsed;\r\n                }\r\n            }\r\n\r\n            // 2. Fetch from Backend API via Central Client\r\n            const response = await apiClient.get('/users/profile');\r\n            const data = response.data;\r\n\r\n            if (data) {\r\n                setProfile(data);\r\n                sessionStorage.setItem(`profile_${userId}`, JSON.stringify(data));\r\n                if (fetchTimeoutRef.current) clearTimeout(fetchTimeoutRef.current);\r\n                return data;\r\n            }\r\n            return null;\r\n        } catch (error) {\r\n            console.error('[Auth] Profile error:', error);\r\n            setLoading(false);\r\n            setProfileLoading(false);\r\n            // Don't set serverError here yet, let the timeout handle true unreachability\r\n            return null;\r\n        } finally {\r\n            setProfileLoading(false);\r\n            setLoading(false); // CRITICAL: Stop the spinner no matter what\r\n        }\r\n    }, [profile, loading, profileLoading]);\r\n    // fetchProfile itself doesn't depend on profile or loading anymore, as it sets them.\r\n\r\n    useEffect(() => {\r\n        // Get initial session\r\n        supabase.auth.getSession().then(({ data: { session } }) => {\r\n            setSession(session);\r\n            setUser(session?.user ?? null);\r\n            if (session?.user) {\r\n                fetchProfile(session.user.id, session.access_token);\r\n            } else {\r\n                setLoading(false);\r\n            }\r\n        }).catch(err => {\r\n            console.error('[Auth] Initial session error:', err);\r\n            setLoading(false);\r\n            setProfileLoading(false);\r\n        });\r\n\r\n        // Listen for auth changes\r\n        const { data: { subscription } } = supabase.auth.onAuthStateChange(async (_event, session) => {\r\n            setSession(session);\r\n            setUser(session?.user ?? null);\r\n            if (session?.user) {\r\n                fetchProfile(session.user.id, session.access_token).catch(() => {\r\n                    setLoading(false);\r\n                    setProfileLoading(false);\r\n                });\r\n            } else {\r\n                setProfile(null);\r\n                lastFetchedId.current = null; // Reset ref if user logs out\r\n                setLoading(false);\r\n                setProfileLoading(false);\r\n            }\r\n        });\r\n\r\n        return () => {\r\n            subscription.unsubscribe();\r\n        };\r\n    }, [fetchProfile]); // fetchProfile is a dependency because it's defined outside and used inside.\r\n\r\n    // 2. Computed values using useMemo\r\n    const isAdmin = useMemo(() => {\r\n        // High-confidence role from DB table takes precedence\r\n        return profile?.role === 'admin';\r\n    }, [profile]);\r\n\r\n    const isPremium = useMemo(() => {\r\n        return profile?.is_premium === true;\r\n    }, [profile]);\r\n\r\n    const isEmailVerified = useMemo(() => {\r\n        return user?.email_confirmed_at != null;\r\n    }, [user]);\r\n\r\n    // Sign up with email and password\r\n    const signUp = async (email, password, fullName) => {\r\n        const { data, error } = await supabase.auth.signUp({\r\n            email,\r\n            password,\r\n            options: {\r\n                data: {\r\n                    full_name: fullName,\r\n                },\r\n                emailRedirectTo: `${window.location.origin}/auth/callback`,\r\n            },\r\n        });\r\n\r\n        if (error) throw error;\r\n        return data;\r\n    };\r\n\r\n    // Sign in with email and password\r\n    const signIn = async (email, password) => {\r\n        const { data, error } = await supabase.auth.signInWithPassword({\r\n            email,\r\n            password,\r\n        });\r\n\r\n        if (error) throw error;\r\n\r\n        // Check if email is verified\r\n        if (data.user && !data.user.email_confirmed_at) {\r\n            await supabase.auth.signOut();\r\n            throw new Error('Please verify your email before signing in. Check your inbox for the verification link.');\r\n        }\r\n\r\n        return data;\r\n    };\r\n\r\n    // Sign in with Google\r\n    const signInWithGoogle = async () => {\r\n        const { data, error } = await supabase.auth.signInWithOAuth({\r\n            provider: 'google',\r\n            options: {\r\n                redirectTo: `${window.location.origin}/auth/callback`,\r\n            },\r\n        });\r\n\r\n        if (error) throw error;\r\n        return data;\r\n    };\r\n\r\n    // Sign out\r\n    const signOut = async () => {\r\n        const { error } = await supabase.auth.signOut();\r\n        if (error) throw error;\r\n    };\r\n\r\n    // Reset password (send reset email)\r\n    const resetPassword = async (email) => {\r\n        const { data, error } = await supabase.auth.resetPasswordForEmail(email, {\r\n            redirectTo: `${window.location.origin}/reset-password`,\r\n        });\r\n\r\n        if (error) throw error;\r\n        return data;\r\n    };\r\n\r\n    // Update password (after clicking reset link)\r\n    const updatePassword = async (newPassword) => {\r\n        const { data, error } = await supabase.auth.updateUser({\r\n            password: newPassword,\r\n        });\r\n\r\n        if (error) throw error;\r\n        return data;\r\n    };\r\n\r\n    // Resend verification email\r\n    const resendVerificationEmail = async (email) => {\r\n        const { data, error } = await supabase.auth.resend({\r\n            type: 'signup',\r\n            email,\r\n            options: {\r\n                emailRedirectTo: `${window.location.origin}/auth/callback`,\r\n            },\r\n        });\r\n\r\n        if (error) throw error;\r\n        return data;\r\n    };\r\n\r\n    const value = {\r\n        user,\r\n        session,\r\n        profile,\r\n        loading,\r\n        profileLoading,\r\n        serverError,\r\n        isInitializing: loading, // Backwards compatibility for components using this\r\n        isAuthenticated: !!user,\r\n        isAdmin,\r\n        isPremium,\r\n        isEmailVerified,\r\n        signUp: async (email, password, fullName) => {\r\n            const { data, error } = await supabase.auth.signUp({\r\n                email,\r\n                password,\r\n                options: {\r\n                    data: { full_name: fullName },\r\n                    emailRedirectTo: `${window.location.origin}/auth/callback`,\r\n                },\r\n            });\r\n            if (error) throw error;\r\n            return data;\r\n        },\r\n        signIn: async (email, password) => {\r\n            const { data, error } = await supabase.auth.signInWithPassword({ email, password });\r\n            if (error) throw error;\r\n            if (data.user && !data.user.email_confirmed_at) {\r\n                await supabase.auth.signOut();\r\n                throw new Error('Please verify your email first.');\r\n            }\r\n            return data;\r\n        },\r\n        signInWithGoogle: async () => {\r\n            const { data, error } = await supabase.auth.signInWithOAuth({\r\n                provider: 'google',\r\n                options: { redirectTo: `${window.location.origin}/auth/callback` },\r\n            });\r\n            if (error) throw error;\r\n            return data;\r\n        },\r\n        signOut: async () => {\r\n            const { error } = await supabase.auth.signOut();\r\n            if (error) throw error;\r\n        },\r\n        resetPassword: async (email) => {\r\n            const { data, error } = await supabase.auth.resetPasswordForEmail(email, {\r\n                redirectTo: `${window.location.origin}/reset-password`,\r\n            });\r\n            if (error) throw error;\r\n            return data;\r\n        },\r\n        updatePassword: async (newPassword) => {\r\n            const { data, error } = await supabase.auth.updateUser({ password: newPassword });\r\n            if (error) throw error;\r\n            return data;\r\n        },\r\n        resendVerificationEmail: async (email) => {\r\n            const { data, error } = await supabase.auth.resend({\r\n                type: 'signup',\r\n                email,\r\n                options: { emailRedirectTo: `${window.location.origin}/auth/callback` },\r\n            });\r\n            if (error) throw error;\r\n            return data;\r\n        },\r\n        refreshProfile: () => fetchProfile(user?.id)\r\n    };\r\n\r\n    return (\r\n        <AuthContext.Provider value={value}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\context\\ThemeContext.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":5,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":5,"endColumn":22}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createContext, useContext, useEffect, useState } from 'react';\r\n\r\nconst ThemeContext = createContext(null);\r\n\r\nexport const useTheme = () => {\r\n    const context = useContext(ThemeContext);\r\n    if (!context) {\r\n        throw new Error('useTheme must be used within a ThemeProvider');\r\n    }\r\n    return context;\r\n};\r\n\r\nexport function ThemeProvider({ children }) {\r\n    const [theme, setTheme] = useState(() => {\r\n        // Check localStorage first, default to 'light'\r\n        const savedTheme = localStorage.getItem('docley-theme');\r\n        return savedTheme || 'light';\r\n    });\r\n\r\n    useEffect(() => {\r\n        // Apply theme to document root\r\n        const root = document.documentElement;\r\n        if (theme === 'dark') {\r\n            root.classList.add('dark');\r\n        } else {\r\n            root.classList.remove('dark');\r\n        }\r\n        // Save to localStorage\r\n        localStorage.setItem('docley-theme', theme);\r\n    }, [theme]);\r\n\r\n    const toggleTheme = () => {\r\n        setTheme(prev => prev === 'light' ? 'dark' : 'light');\r\n    };\r\n\r\n    return (\r\n        <ThemeContext.Provider value={{ theme, toggleTheme, setTheme }}>\r\n            {children}\r\n        </ThemeContext.Provider>\r\n    );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\context\\ToastContext.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":8,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":8,"endColumn":22}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createContext, useContext, useState, useCallback } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport { X, CheckCircle2, AlertCircle, Info, AlertTriangle } from 'lucide-react';\r\nimport { cn } from '../lib/utils';\r\n\r\nconst ToastContext = createContext(null);\r\n\r\nexport const useToast = () => {\r\n    const context = useContext(ToastContext);\r\n    if (!context) {\r\n        throw new Error('useToast must be used within a ToastProvider');\r\n    }\r\n    return context;\r\n};\r\n\r\nconst ToastItem = ({ id, type, message, onDismiss }) => {\r\n    const icons = {\r\n        success: CheckCircle2,\r\n        error: AlertCircle,\r\n        info: Info,\r\n        warning: AlertTriangle\r\n    };\r\n\r\n    const colors = {\r\n        success: \"bg-green-50 border-green-200 text-green-800\",\r\n        error: \"bg-red-50 border-red-200 text-red-800\",\r\n        info: \"bg-blue-50 border-blue-200 text-blue-800\",\r\n        warning: \"bg-orange-50 border-orange-200 text-orange-800\" // Utilizing Orange for warnings\r\n    };\r\n\r\n    const Icon = icons[type] || icons.info;\r\n\r\n    return (\r\n        <div className={cn(\r\n            \"flex items-center gap-3 w-full max-w-sm px-4 py-3 mb-3 rounded-lg border shadow-lg transform transition-all duration-300 ease-in-out animate-in slide-in-from-right\",\r\n            colors[type] || colors.info\r\n        )}>\r\n            <Icon className=\"h-5 w-5 flex-shrink-0\" />\r\n            <p className=\"flex-1 text-sm font-medium\">{message}</p>\r\n            <button onClick={() => onDismiss(id)} className=\"text-current opacity-60 hover:opacity-100\">\r\n                <X className=\"h-4 w-4\" />\r\n            </button>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport const ToastProvider = ({ children }) => {\r\n    const [toasts, setToasts] = useState([]);\r\n\r\n    const addToast = useCallback((message, type = 'info') => {\r\n        const id = Date.now();\r\n        setToasts(prev => [...prev, { id, message, type }]);\r\n\r\n        // Auto dismiss\r\n        setTimeout(() => {\r\n            setToasts(prev => prev.filter(t => t.id !== id));\r\n        }, 4000);\r\n    }, []);\r\n\r\n    const removeToast = useCallback((id) => {\r\n        setToasts(prev => prev.filter(t => t.id !== id));\r\n    }, []);\r\n\r\n    return (\r\n        <ToastContext.Provider value={{ addToast, toast: addToast }}>\r\n            {children}\r\n            {createPortal(\r\n                <div className=\"fixed top-4 right-4 z-50 flex flex-col items-end pointer-events-none\">\r\n                    {toasts.map(t => (\r\n                        <div key={t.id} className=\"pointer-events-auto\">\r\n                            <ToastItem {...t} onDismiss={removeToast} />\r\n                        </div>\r\n                    ))}\r\n                </div>,\r\n                document.body\r\n            )}\r\n        </ToastContext.Provider>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\data\\blogData.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\data\\documentsData.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\data\\featuresData.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\layouts\\AdminLayout.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\lib\\supabase.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\lib\\utils.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\main.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\pages\\Admin\\AdminDashboard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\pages\\Admin\\AdminDashboard.origin.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\pages\\Admin\\AdminSettings.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'theme' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":27,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"theme"},"fix":{"range":[617,646],"text":""},"desc":"Remove unused variable 'theme'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\nimport {\n    Bot,\n    Globe,\n    Shield,\n    Save,\n    Server,\n    Mail,\n    Lock,\n    Cpu,\n    AlertTriangle,\n    CheckCircle2,\n    Database,\n    Activity,\n    Layers,\n    LayoutGrid,\n    Search,\n    Settings\n} from 'lucide-react';\nimport { useTheme } from '../../context/ThemeContext';\nimport { useToast } from '../../context/ToastContext';\nimport { cn } from '../../lib/utils';\nimport { Button } from '../../components/ui/Button';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '../../components/ui/Card';\n\nexport default function AdminSettings() {\n    const { theme } = useTheme();\n    const { addToast } = useToast();\n    const [isSaving, setIsSaving] = useState(false);\n    const [activeTab, setActiveTab] = useState('general');\n\n    const [settings, setSettings] = useState({\n        siteName: 'Docley',\n        supportEmail: 'support@docley.com',\n        maintenanceMode: false,\n        aiModel: 'gemini-1.5-flash',\n        aiTemperature: 0.7,\n        maxTokens: 2048,\n        allowSignups: true,\n        requireEmailVerification: true,\n        sessionTimeout: 60,\n        databaseUrl: 'postgresql://********:********@aws-eu-west-1.pooler.supabase.com:6543/postgres',\n        backupFrequency: 'daily'\n    });\n\n    const handleSave = async () => {\n        setIsSaving(true);\n        // Simulate API call\n        await new Promise(resolve => setTimeout(resolve, 1500));\n        setIsSaving(false);\n        addToast('Admin settings saved successfully', 'success');\n    };\n\n    const handleChange = (key, value) => {\n        setSettings(prev => ({ ...prev, [key]: value }));\n    };\n\n    const tabs = [\n        { id: 'general', label: 'General', icon: LayoutGrid },\n        { id: 'ai', label: 'AI Configuration', icon: Bot },\n        { id: 'security', label: 'Security', icon: Shield },\n        { id: 'database', label: 'Database', icon: Database },\n    ];\n\n    const renderContent = () => {\n        switch (activeTab) {\n            case 'general':\n                return (\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 animate-in fade-in slide-in-from-bottom-4 duration-500\">\n                        <Card className=\"col-span-1 md:col-span-2 border-slate-200 dark:border-slate-800 shadow-sm bg-white dark:bg-slate-900\">\n                            <CardHeader className=\"border-b border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50\">\n                                <CardTitle className=\"text-lg text-slate-900 dark:text-white\">Platform Identity</CardTitle>\n                                <CardDescription className=\"text-slate-500 dark:text-slate-400\">Basic information visible to users.</CardDescription>\n                            </CardHeader>\n                            <CardContent className=\"p-6\">\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                                    <div className=\"space-y-2\">\n                                        <label className=\"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400\">Site Name</label>\n                                        <div className=\"relative group\">\n                                            <Layers className=\"absolute left-3 top-2.5 h-4 w-4 text-slate-400 group-focus-within:text-orange-500 transition-colors\" />\n                                            <input\n                                                type=\"text\"\n                                                value={settings.siteName}\n                                                onChange={(e) => handleChange('siteName', e.target.value)}\n                                                className=\"w-full pl-10 h-10 px-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-950 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500/50 focus:border-orange-500 transition-all text-slate-900 dark:text-slate-100 font-medium\"\n                                            />\n                                        </div>\n                                    </div>\n                                    <div className=\"space-y-2\">\n                                        <label className=\"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400\">Support Email</label>\n                                        <div className=\"relative group\">\n                                            <Mail className=\"absolute left-3 top-2.5 h-4 w-4 text-slate-400 group-focus-within:text-orange-500 transition-colors\" />\n                                            <input\n                                                type=\"email\"\n                                                value={settings.supportEmail}\n                                                onChange={(e) => handleChange('supportEmail', e.target.value)}\n                                                className=\"w-full pl-10 h-10 px-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-950 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500/50 focus:border-orange-500 transition-all text-slate-900 dark:text-slate-100 font-medium\"\n                                            />\n                                        </div>\n                                    </div>\n                                </div>\n                            </CardContent>\n                        </Card>\n\n                        <Card className=\"border-orange-200 dark:border-orange-900/30 shadow-sm bg-orange-50/50 dark:bg-orange-950/10\">\n                            <CardHeader className=\"pb-3\">\n                                <div className=\"flex items-center gap-2\">\n                                    <AlertTriangle className=\"h-5 w-5 text-orange-600 dark:text-orange-500\" />\n                                    <CardTitle className=\"text-base text-orange-800 dark:text-orange-200\">Maintenance Mode</CardTitle>\n                                </div>\n                            </CardHeader>\n                            <CardContent>\n                                <div className=\"flex items-center justify-between\">\n                                    <p className=\"text-sm text-orange-700/80 dark:text-orange-300/70 max-w-[70%]\">\n                                        When enabled, only administrators can access the platform.\n                                    </p>\n                                    <label className=\"relative inline-flex items-center cursor-pointer\">\n                                        <input\n                                            type=\"checkbox\"\n                                            className=\"sr-only peer\"\n                                            checked={settings.maintenanceMode}\n                                            onChange={(e) => handleChange('maintenanceMode', e.target.checked)}\n                                        />\n                                        <div className=\"w-11 h-6 bg-orange-200 dark:bg-slate-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-600\"></div>\n                                    </label>\n                                </div>\n                            </CardContent>\n                        </Card>\n\n                        <Card className=\"border-slate-200 dark:border-slate-800 shadow-sm bg-white dark:bg-slate-900\">\n                            <CardHeader className=\"pb-3\">\n                                <div className=\"flex items-center gap-2\">\n                                    <Activity className=\"h-5 w-5 text-emerald-500\" />\n                                    <CardTitle className=\"text-base text-slate-900 dark:text-white\">System Status</CardTitle>\n                                </div>\n                            </CardHeader>\n                            <CardContent>\n                                <div className=\"flex items-center gap-4\">\n                                    <div className=\"flex items-center gap-2\">\n                                        <span className=\"relative flex h-3 w-3\">\n                                            <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75\"></span>\n                                            <span className=\"relative inline-flex rounded-full h-3 w-3 bg-emerald-500\"></span>\n                                        </span>\n                                        <span className=\"text-sm font-medium text-slate-700 dark:text-slate-300\">Operational</span>\n                                    </div>\n                                    <div className=\"h-4 w-px bg-slate-200 dark:bg-slate-700\" />\n                                    <span className=\"text-sm text-slate-500 dark:text-slate-400\">v2.4.0-beta</span>\n                                </div>\n                            </CardContent>\n                        </Card>\n                    </div>\n                );\n\n            case 'ai':\n                return (\n                    <div className=\"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500\">\n                        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                            <Card className=\"md:col-span-2 border-slate-200 dark:border-slate-800 shadow-sm bg-white dark:bg-slate-900\">\n                                <CardHeader className=\"border-b border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50\">\n                                    <CardTitle className=\"text-lg text-slate-900 dark:text-white\">Model Selection</CardTitle>\n                                    <CardDescription className=\"text-slate-500 dark:text-slate-400\">Choose the AI engine powering the platform.</CardDescription>\n                                </CardHeader>\n                                <CardContent className=\"p-6\">\n                                    <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                                        <div\n                                            onClick={() => handleChange('aiModel', 'gemini-1.5-flash')}\n                                            className={cn(\n                                                \"cursor-pointer relative p-5 rounded-xl border-2 transition-all duration-200 flex flex-col gap-3\",\n                                                settings.aiModel === 'gemini-1.5-flash'\n                                                    ? \"border-orange-500 bg-orange-50/30 dark:bg-orange-900/10 ring-1 ring-orange-500/20\"\n                                                    : \"border-slate-200 dark:border-slate-800 hover:border-orange-300 dark:hover:border-orange-700 bg-white dark:bg-slate-950\"\n                                            )}\n                                        >\n                                            <div className=\"flex justify-between items-start\">\n                                                <div className=\"p-2 rounded-lg bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400\">\n                                                    <ZapIcon className=\"h-5 w-5\" />\n                                                </div>\n                                                {settings.aiModel === 'gemini-1.5-flash' && <CheckCircle2 className=\"h-5 w-5 text-orange-500\" />}\n                                            </div>\n                                            <div>\n                                                <h4 className=\"font-bold text-slate-900 dark:text-white\">Gemini 1.5 Flash</h4>\n                                                <p className=\"text-xs text-slate-500 dark:text-slate-400 mt-1\">Low latency, cost-effective.</p>\n                                            </div>\n                                        </div>\n                                        <div\n                                            onClick={() => handleChange('aiModel', 'gemini-1.5-pro')}\n                                            className={cn(\n                                                \"cursor-pointer relative p-5 rounded-xl border-2 transition-all duration-200 flex flex-col gap-3\",\n                                                settings.aiModel === 'gemini-1.5-pro'\n                                                    ? \"border-orange-500 bg-orange-50/30 dark:bg-orange-900/10 ring-1 ring-orange-500/20\"\n                                                    : \"border-slate-200 dark:border-slate-800 hover:border-orange-300 dark:hover:border-orange-700 bg-white dark:bg-slate-950\"\n                                            )}\n                                        >\n                                            <div className=\"flex justify-between items-start\">\n                                                <div className=\"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400\">\n                                                    <BrainIcon className=\"h-5 w-5\" />\n                                                </div>\n                                                {settings.aiModel === 'gemini-1.5-pro' && <CheckCircle2 className=\"h-5 w-5 text-orange-500\" />}\n                                            </div>\n                                            <div>\n                                                <h4 className=\"font-bold text-slate-900 dark:text-white\">Gemini 1.5 Pro</h4>\n                                                <p className=\"text-xs text-slate-500 dark:text-slate-400 mt-1\">High reasoning, complex tasks.</p>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </CardContent>\n                            </Card>\n\n                            <Card className=\"border-slate-200 dark:border-slate-800 shadow-sm bg-white dark:bg-slate-900\">\n                                <CardHeader className=\"border-b border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50\">\n                                    <CardTitle className=\"text-lg text-slate-900 dark:text-white\">Parameters</CardTitle>\n                                </CardHeader>\n                                <CardContent className=\"p-6 space-y-6\">\n                                    <div className=\"space-y-4\">\n                                        <div className=\"flex justify-between items-center\">\n                                            <label className=\"text-sm font-medium text-slate-700 dark:text-slate-300\">Temperature</label>\n                                            <span className=\"text-xs font-mono font-bold text-orange-600 dark:text-orange-400 bg-orange-50 dark:bg-orange-900/20 px-2 py-1 rounded\">{settings.aiTemperature}</span>\n                                        </div>\n                                        <input\n                                            type=\"range\"\n                                            min=\"0\"\n                                            max=\"1\"\n                                            step=\"0.1\"\n                                            value={settings.aiTemperature}\n                                            onChange={(e) => handleChange('aiTemperature', parseFloat(e.target.value))}\n                                            className=\"w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-orange-500\"\n                                        />\n                                    </div>\n                                    <div className=\"space-y-2\">\n                                        <label className=\"text-sm font-medium text-slate-700 dark:text-slate-300\">Max Tokens</label>\n                                        <input\n                                            type=\"number\"\n                                            value={settings.maxTokens}\n                                            onChange={(e) => handleChange('maxTokens', parseInt(e.target.value))}\n                                            className=\"w-full h-10 px-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-950 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500/50 transition-all text-slate-900 dark:text-slate-100\"\n                                        />\n                                    </div>\n                                </CardContent>\n                            </Card>\n                        </div>\n                    </div>\n                );\n\n            case 'security':\n                return (\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 animate-in fade-in slide-in-from-bottom-4 duration-500\">\n                        <Card className=\"md:col-span-3 border-slate-200 dark:border-slate-800 shadow-sm bg-white dark:bg-slate-900\">\n                            <CardHeader className=\"border-b border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50\">\n                                <CardTitle className=\"text-lg text-slate-900 dark:text-white\">Access Control Policies</CardTitle>\n                                <CardDescription className=\"text-slate-500 dark:text-slate-400\">Global security settings for all users.</CardDescription>\n                            </CardHeader>\n                            <CardContent className=\"p-0\">\n                                <div className=\"divide-y divide-slate-100 dark:divide-slate-800\">\n                                    <div className=\"flex items-center justify-between p-6 hover:bg-slate-50/50 dark:hover:bg-slate-900/50 transition-colors\">\n                                        <div className=\"space-y-1\">\n                                            <div className=\"font-medium text-slate-900 dark:text-white\">Public Registration</div>\n                                            <div className=\"text-sm text-slate-500 dark:text-slate-400\">Allow new users to sign up without an invitation.</div>\n                                        </div>\n                                        <Switch\n                                            checked={settings.allowSignups}\n                                            onChange={(checked) => handleChange('allowSignups', checked)}\n                                        />\n                                    </div>\n                                    <div className=\"flex items-center justify-between p-6 hover:bg-slate-50/50 dark:hover:bg-slate-900/50 transition-colors\">\n                                        <div className=\"space-y-1\">\n                                            <div className=\"font-medium text-slate-900 dark:text-white\">Mandatory Email Verification</div>\n                                            <div className=\"text-sm text-slate-500 dark:text-slate-400\">Users must verify their email before accessing the dashboard.</div>\n                                        </div>\n                                        <Switch\n                                            checked={settings.requireEmailVerification}\n                                            onChange={(checked) => handleChange('requireEmailVerification', checked)}\n                                        />\n                                    </div>\n                                    <div className=\"p-6 hover:bg-slate-50/50 dark:hover:bg-slate-900/50 transition-colors\">\n                                        <div className=\"flex items-center justify-between mb-4\">\n                                            <div className=\"space-y-1\">\n                                                <div className=\"font-medium text-slate-900 dark:text-white\">Session Timeout</div>\n                                                <div className=\"text-sm text-slate-500 dark:text-slate-400\">Inactivity period before auto-logout (minutes).</div>\n                                            </div>\n                                            <div className=\"w-24\">\n                                                <input\n                                                    type=\"number\"\n                                                    value={settings.sessionTimeout}\n                                                    onChange={(e) => handleChange('sessionTimeout', parseInt(e.target.value))}\n                                                    className=\"w-full h-9 px-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-950 text-sm text-center focus:outline-none focus:ring-2 focus:ring-orange-500/50 transition-all text-slate-900 dark:text-slate-100\"\n                                                />\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </CardContent>\n                        </Card>\n                    </div>\n                );\n\n            case 'database':\n                return (\n                    <div className=\"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500\">\n                        <Card className=\"border-slate-200 dark:border-slate-800 shadow-sm bg-white dark:bg-slate-900\">\n                            <CardHeader className=\"border-b border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50\">\n                                <CardTitle className=\"text-lg text-slate-900 dark:text-white\">Connection String</CardTitle>\n                                <CardDescription className=\"text-slate-500 dark:text-slate-400\">PostgreSQL connection details.</CardDescription>\n                            </CardHeader>\n                            <CardContent className=\"p-6\">\n                                <div className=\"flex gap-2\">\n                                    <code className=\"flex-1 p-4 rounded-lg bg-black/50 font-mono text-sm text-green-400 overflow-x-auto border border-slate-800\">\n                                        {settings.databaseUrl}\n                                    </code>\n                                    <Button\n                                        variant=\"outline\"\n                                        onClick={() => addToast('Copied to clipboard', 'success')}\n                                        className=\"h-auto border-slate-700 hover:bg-slate-800 text-slate-300 hover:text-white\"\n                                    >\n                                        Copy\n                                    </Button>\n                                </div>\n                            </CardContent>\n                        </Card>\n\n                        <Card className=\"border-slate-200 dark:border-slate-800 shadow-sm bg-white dark:bg-slate-900\">\n                            <CardHeader className=\"border-b border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50\">\n                                <CardTitle className=\"text-lg text-slate-900 dark:text-white\">Backup Configuration</CardTitle>\n                            </CardHeader>\n                            <CardContent className=\"p-6\">\n                                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                                    {['hourly', 'daily', 'weekly'].map((freq) => (\n                                        <div\n                                            key={freq}\n                                            onClick={() => handleChange('backupFrequency', freq)}\n                                            className={cn(\n                                                \"cursor-pointer p-4 rounded-xl border-2 text-center capitalize font-medium transition-all\",\n                                                settings.backupFrequency === freq\n                                                    ? \"border-orange-500 bg-orange-50/50 dark:bg-orange-900/20 text-orange-700 dark:text-orange-400\"\n                                                    : \"border-slate-200 dark:border-slate-800 text-slate-600 dark:text-slate-400 hover:border-orange-200 dark:hover:border-slate-700\"\n                                            )}\n                                        >\n                                            {freq}\n                                        </div>\n                                    ))}\n                                </div>\n                            </CardContent>\n                        </Card>\n                    </div>\n                );\n\n            default:\n                return null;\n        }\n    };\n\n    return (\n        <div className=\"max-w-7xl mx-auto pb-10\">\n            <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-6 mb-8\">\n                <div>\n                    <h1 className=\"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-3\">\n                        <Settings className=\"h-6 w-6 text-slate-400\" />\n                        System Settings\n                    </h1>\n                    <p className=\"text-slate-500 dark:text-slate-400 mt-1\">Configure global parameters, AI models, and security policies.</p>\n                </div>\n                <Button\n                    onClick={handleSave}\n                    isLoading={isSaving}\n                    className=\"bg-orange-600 hover:bg-orange-700 text-white shadow-lg shadow-orange-500/20 px-6\"\n                >\n                    <Save className=\"mr-2 h-4 w-4\" /> Save Configuration\n                </Button>\n            </div>\n\n            {/* Horizontal Tabs Navigation */}\n            <div className=\"mb-8 border-b border-slate-200 dark:border-slate-800\">\n                <nav className=\"flex gap-6 overflow-x-auto pb-1\" aria-label=\"Tabs\">\n                    {tabs.map((tab) => {\n                        const Icon = tab.icon;\n                        const isActive = activeTab === tab.id;\n                        return (\n                            <button\n                                key={tab.id}\n                                onClick={() => setActiveTab(tab.id)}\n                                className={cn(\n                                    \"group flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap transition-all\",\n                                    isActive\n                                        ? \"border-orange-500 text-orange-600 dark:text-orange-400\"\n                                        : \"border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 hover:border-slate-300 dark:hover:border-slate-700\"\n                                )}\n                            >\n                                <Icon className={cn(\"h-4 w-4\", isActive ? \"text-orange-500\" : \"text-slate-400 group-hover:text-slate-500 dark:group-hover:text-slate-300\")} />\n                                {tab.label}\n                            </button>\n                        );\n                    })}\n                </nav>\n            </div>\n\n            {renderContent()}\n        </div>\n    );\n}\n\n// Helper Components\nfunction ZapIcon(props) {\n    return (\n        <svg\n            {...props}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"24\"\n            height=\"24\"\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            strokeWidth=\"2\"\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n        >\n            <polygon points=\"13 2 3 14 12 14 11 22 21 10 12 10 13 2\" />\n        </svg>\n    )\n}\n\nfunction BrainIcon(props) {\n    return (\n        <svg\n            {...props}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"24\"\n            height=\"24\"\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            strokeWidth=\"2\"\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n        >\n            <path d=\"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z\" />\n            <path d=\"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z\" />\n            <path d=\"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4\" />\n            <path d=\"M17.599 6.5a3 3 0 0 0 .399-1.375\" />\n            <path d=\"M6.003 5.125A3 3 0 0 0 6.401 6.5\" />\n            <path d=\"M3.477 10.896a4 4 0 0 1 .585-.396\" />\n            <path d=\"M19.938 10.5a4 4 0 0 1 .585.396\" />\n            <path d=\"M6 18a4 4 0 0 1-1.97-3.284\" />\n            <path d=\"M17.97 14.716A4 4 0 0 1 16 18\" />\n        </svg>\n    )\n}\n\nfunction Switch({ checked, onChange }) {\n    return (\n        <button\n            type=\"button\"\n            role=\"switch\"\n            aria-checked={checked}\n            onClick={() => onChange(!checked)}\n            className={cn(\n                \"relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2\",\n                checked ? \"bg-orange-500\" : \"bg-slate-200 dark:bg-slate-700\"\n            )}\n        >\n            <span\n                aria-hidden=\"true\"\n                className={cn(\n                    \"pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out\",\n                    checked ? \"translate-x-5\" : \"translate-x-0\"\n                )}\n            />\n        </button>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\pages\\Admin\\BlogManager.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadPosts'. Either include it or remove the dependency array.","line":15,"column":8,"nodeType":"ArrayExpression","endLine":15,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [loadPosts]","fix":{"range":[597,599],"text":"[loadPosts]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from 'react';\r\nimport { Plus, Search, Edit2, Trash2, Eye, FileText, Calendar } from 'lucide-react';\r\nimport { Link } from 'react-router-dom';\r\nimport { getBlogPosts, deleteBlogPost } from '../../services/adminService';\r\nimport { useToast } from '../../context/ToastContext';\r\n\r\nexport default function BlogManager() {\r\n    const [posts, setPosts] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const { addToast } = useToast();\r\n\r\n    useEffect(() => {\r\n        loadPosts();\r\n    }, []);\r\n\r\n    const loadPosts = async () => {\r\n        setIsLoading(true);\r\n        try {\r\n            const data = await getBlogPosts();\r\n            setPosts(data || []);\r\n        } catch (error) {\r\n            console.error('Error loading posts:', error);\r\n            addToast('Failed to load blog posts', 'error');\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleDelete = async (id) => {\r\n        if (!window.confirm('Are you sure you want to delete this post?')) return;\r\n\r\n        try {\r\n            await deleteBlogPost(id);\r\n            setPosts(posts.filter(p => p.id !== id));\r\n            addToast('Post deleted successfully', 'success');\r\n        } catch (error) {\r\n            console.error('Error deleting post:', error);\r\n            addToast('Failed to delete post', 'error');\r\n        }\r\n    };\r\n\r\n    const filteredPosts = posts.filter(post =>\r\n        post.title?.toLowerCase().includes(searchTerm.toLowerCase())\r\n    );\r\n\r\n    return (\r\n        <div className=\"space-y-6 animate-in fade-in duration-500\">\r\n            <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\r\n                <div>\r\n                    <h1 className=\"text-2xl font-bold text-slate-900\">Blog Management</h1>\r\n                    <p className=\"text-sm text-slate-500\">Manage your news and updates</p>\r\n                </div>\r\n                <Link\r\n                    to=\"/admin/blog/new\"\r\n                    className=\"flex items-center justify-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors shadow-sm font-medium\"\r\n                >\r\n                    <Plus className=\"h-4 w-4\" />\r\n                    New Post\r\n                </Link>\r\n            </div>\r\n\r\n            {/* Search and Filter */}\r\n            <div className=\"bg-white p-4 rounded-xl border border-slate-200 shadow-sm\">\r\n                <div className=\"relative\">\r\n                    <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-slate-400\" />\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Search posts...\"\r\n                        value={searchTerm}\r\n                        onChange={(e) => setSearchTerm(e.target.value)}\r\n                        className=\"w-full pl-10 pr-4 py-2 rounded-lg border border-slate-200 focus:outline-none focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500 transition-all\"\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* Posts List */}\r\n            {isLoading ? (\r\n                <div className=\"flex justify-center p-12\">\r\n                    <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500\"></div>\r\n                </div>\r\n            ) : filteredPosts.length === 0 ? (\r\n                <div className=\"text-center py-12 bg-white rounded-xl border border-dashed border-slate-300\">\r\n                    <FileText className=\"h-12 w-12 text-slate-300 mx-auto mb-3\" />\r\n                    <h3 className=\"text-lg font-medium text-slate-900\">No posts found</h3>\r\n                    <p className=\"text-slate-500 mt-1\">Get started by creating your first blog post.</p>\r\n                </div>\r\n            ) : (\r\n                <div className=\"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden\">\r\n                    <div className=\"overflow-x-auto\">\r\n                        <table className=\"w-full\">\r\n                            <thead className=\"bg-slate-50 border-b border-slate-200\">\r\n                                <tr>\r\n                                    <th className=\"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider\">Title</th>\r\n                                    <th className=\"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider\">Status</th>\r\n                                    <th className=\"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider\">Date</th>\r\n                                    <th className=\"px-6 py-3 text-right text-xs font-semibold text-slate-500 uppercase tracking-wider\">Actions</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody className=\"divide-y divide-slate-200\">\r\n                                {filteredPosts.map((post) => (\r\n                                    <tr key={post.id} className=\"hover:bg-slate-50 transition-colors\">\r\n                                        <td className=\"px-6 py-4\">\r\n                                            <div className=\"flex items-center\">\r\n                                                <div className=\"h-10 w-10 flex-shrink-0 rounded-lg bg-orange-100 flex items-center justify-center text-orange-600 font-bold text-lg mr-3\">\r\n                                                    {post.title.charAt(0)}\r\n                                                </div>\r\n                                                <div>\r\n                                                    <div className=\"text-sm font-medium text-slate-900\">{post.title}</div>\r\n                                                    <div className=\"text-xs text-slate-500 truncate max-w-xs\">{post.slug}</div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                                            <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${post.published\r\n                                                    ? 'bg-green-100 text-green-800'\r\n                                                    : 'bg-yellow-100 text-yellow-800'\r\n                                                }`}>\r\n                                                {post.published ? 'Published' : 'Draft'}\r\n                                            </span>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-slate-500\">\r\n                                            <div className=\"flex items-center gap-1\">\r\n                                                <Calendar className=\"h-3 w-3\" />\r\n                                                {new Date(post.created_at).toLocaleDateString()}\r\n                                            </div>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\r\n                                            <div className=\"flex items-center justify-end gap-2\">\r\n                                                <Link\r\n                                                    to={`/blog/${post.id}`}\r\n                                                    target=\"_blank\"\r\n                                                    className=\"p-1 text-slate-400 hover:text-blue-600 rounded hover:bg-blue-50\"\r\n                                                    title=\"View\"\r\n                                                >\r\n                                                    <Eye className=\"h-4 w-4\" />\r\n                                                </Link>\r\n                                                <Link\r\n                                                    to={`/admin/blog/edit/${post.id}`}\r\n                                                    className=\"p-1 text-slate-400 hover:text-orange-600 rounded hover:bg-orange-50\"\r\n                                                    title=\"Edit\"\r\n                                                >\r\n                                                    <Edit2 className=\"h-4 w-4\" />\r\n                                                </Link>\r\n                                                <button\r\n                                                    onClick={() => handleDelete(post.id)}\r\n                                                    className=\"p-1 text-slate-400 hover:text-red-600 rounded hover:bg-red-50\"\r\n                                                    title=\"Delete\"\r\n                                                >\r\n                                                    <Trash2 className=\"h-4 w-4\" />\r\n                                                </button>\r\n                                            </div>\r\n                                        </td>\r\n                                    </tr>\r\n                                ))}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\pages\\Admin\\BlogPostEditor.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadPost'. Either include it or remove the dependency array.","line":50,"column":8,"nodeType":"ArrayExpression","endLine":50,"endColumn":12,"suggestions":[{"desc":"Update the dependencies array to be: [id, loadPost]","fix":{"range":[1828,1832],"text":"[id, loadPost]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'toastId' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":215,"column":51,"nodeType":"Identifier","messageId":"unusedVar","endLine":215,"endColumn":58,"suggestions":[{"messageId":"removeVar","data":{"varName":"toastId"},"fix":{"range":[9400,9455],"text":""},"desc":"Remove unused variable 'toastId'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":223,"column":54,"nodeType":"Identifier","messageId":"unusedVar","endLine":223,"endColumn":59},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":303,"column":58,"nodeType":"Identifier","messageId":"unusedVar","endLine":303,"endColumn":63}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport { useEditor, EditorContent } from '@tiptap/react';\r\nimport StarterKit from '@tiptap/starter-kit';\r\nimport Image from '@tiptap/extension-image';\r\nimport Link from '@tiptap/extension-link';\r\nimport Placeholder from '@tiptap/extension-placeholder';\r\nimport { ArrowLeft, Save, Loader2, Send, Image as ImageIcon, Tag, Link2, Hash, UploadCloud, X } from 'lucide-react';\r\nimport { getBlogPosts, createBlogPost, updateBlogPost, uploadBlogImage } from '../../services/adminService';\r\nimport { useToast } from '../../context/ToastContext';\r\n\r\nexport default function BlogPostEditor() {\r\n    const { id } = useParams();\r\n    const navigate = useNavigate();\r\n    const { addToast } = useToast();\r\n    const [isSaving, setIsSaving] = useState(false);\r\n    const [isPublishing, setIsPublishing] = useState(false);\r\n    const [isUploading, setIsUploading] = useState(false); // New state\r\n    const [isLoading, setIsLoading] = useState(!!id);\r\n\r\n    const [formData, setFormData] = useState({\r\n        title: '',\r\n        slug: '',\r\n        tags: '',\r\n        published: false,\r\n        cover_image: '',\r\n    });\r\n\r\n    const editor = useEditor({\r\n        extensions: [\r\n            StarterKit,\r\n            Image,\r\n            // Link.configure({ openOnClick: false }), // Removed to fix duplicate warning\r\n            Placeholder.configure({\r\n                placeholder: 'Start writing your post content here...',\r\n            }),\r\n        ],\r\n        content: '',\r\n        editorProps: {\r\n            attributes: {\r\n                class: 'prose prose-lg max-w-none focus:outline-none min-h-[400px]',\r\n            },\r\n        },\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (id) {\r\n            loadPost();\r\n        }\r\n    }, [id]);\r\n\r\n    const loadPost = async () => {\r\n        try {\r\n            const posts = await getBlogPosts();\r\n            const post = posts.find(p => p.id === id);\r\n\r\n            if (post) {\r\n                setFormData({\r\n                    title: post.title,\r\n                    slug: post.slug,\r\n                    tags: post.tags || '',\r\n                    published: post.published,\r\n                    cover_image: post.cover_image || '',\r\n                });\r\n                editor?.commands.setContent(post.content || '');\r\n            } else {\r\n                addToast('Post not found', 'error');\r\n                navigate('/admin/blog');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error loading post:', error);\r\n            addToast('Failed to load post', 'error');\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleSave = async (publish = false) => {\r\n        if (!formData.title) {\r\n            addToast('Title is required', 'error');\r\n            return;\r\n        }\r\n\r\n        if (publish) {\r\n            setIsPublishing(true);\r\n        } else {\r\n            setIsSaving(true);\r\n        }\r\n\r\n        try {\r\n            const postData = {\r\n                ...formData,\r\n                content: editor.getHTML(),\r\n                published: publish ? true : formData.published,\r\n                updated_at: new Date().toISOString(),\r\n            };\r\n\r\n            if (id) {\r\n                await updateBlogPost(id, postData);\r\n                addToast(publish ? 'Post published!' : 'Draft saved', 'success');\r\n            } else {\r\n                await createBlogPost(postData);\r\n                addToast(publish ? 'Post published!' : 'Draft created', 'success');\r\n                navigate('/admin/blog');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error saving post:', error);\r\n            addToast('Failed to save post', 'error');\r\n        } finally {\r\n            setIsSaving(false);\r\n            setIsPublishing(false);\r\n        }\r\n    };\r\n\r\n    const generateSlug = () => {\r\n        const slug = formData.title\r\n            .toLowerCase()\r\n            .replace(/[^a-z0-9]+/g, '-')\r\n            .replace(/(^-|-$)/g, '');\r\n        setFormData({ ...formData, slug });\r\n    };\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <div className=\"flex items-center justify-center h-64\">\r\n                <Loader2 className=\"h-8 w-8 animate-spin text-orange-500\" />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-slate-50 -m-4 md:-m-8\">\r\n            {/* Clean White Header */}\r\n            <header className=\"sticky top-0 z-20 bg-white border-b border-slate-200 shadow-sm\">\r\n                <div className=\"max-w-7xl mx-auto px-4 md:px-8 py-3 flex items-center justify-between\">\r\n                    <button\r\n                        onClick={() => navigate('/admin/blog')}\r\n                        className=\"flex items-center gap-2 text-slate-500 hover:text-slate-900 transition-colors active:scale-95\"\r\n                    >\r\n                        <ArrowLeft className=\"h-4 w-4\" />\r\n                        <span className=\"text-sm font-medium\">Back</span>\r\n                    </button>\r\n\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <button\r\n                            onClick={() => handleSave(false)}\r\n                            disabled={isSaving || isPublishing}\r\n                            className=\"flex items-center gap-2 px-4 py-2 text-sm font-medium text-slate-600 bg-slate-100 hover:bg-slate-200 rounded-lg transition-colors active:scale-95 disabled:opacity-50\"\r\n                        >\r\n                            {isSaving ? (\r\n                                <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n                            ) : (\r\n                                <Save className=\"h-4 w-4\" />\r\n                            )}\r\n                            Save Draft\r\n                        </button>\r\n                        <button\r\n                            onClick={() => handleSave(true)}\r\n                            disabled={isSaving || isPublishing}\r\n                            className=\"flex items-center gap-2 px-5 py-2 text-sm font-semibold text-white bg-orange-500 hover:bg-orange-600 rounded-lg transition-colors active:scale-95 disabled:opacity-50 shadow-lg shadow-orange-500/25\"\r\n                        >\r\n                            {isPublishing ? (\r\n                                <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n                            ) : (\r\n                                <Send className=\"h-4 w-4\" />\r\n                            )}\r\n                            Publish\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </header>\r\n\r\n            {/* Main Content Area */}\r\n            <div className=\"max-w-7xl mx-auto px-4 md:px-8 py-8\">\r\n                <div className=\"flex gap-8\">\r\n                    {/* Center Column - Editor */}\r\n                    <div className=\"flex-1 max-w-4xl\">\r\n                        {/* Featured Image Preview */}\r\n                        {formData.cover_image && (\r\n                            <div className=\"mb-6 aspect-video w-full rounded-xl overflow-hidden bg-slate-100 border border-slate-200\">\r\n                                <img\r\n                                    src={formData.cover_image}\r\n                                    alt=\"Cover\"\r\n                                    className=\"w-full h-full object-cover\"\r\n                                    onError={(e) => e.target.style.display = 'none'}\r\n                                />\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Title Input - Large and Borderless */}\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Post title\"\r\n                            value={formData.title}\r\n                            onChange={(e) => setFormData({ ...formData, title: e.target.value })}\r\n                            onBlur={() => !formData.slug && generateSlug()}\r\n                            className=\"w-full text-4xl font-bold text-slate-900 placeholder-slate-300 border-none bg-transparent focus:outline-none focus:ring-0 mb-6\"\r\n                        />\r\n\r\n                        {/* Editor - White Background */}\r\n                        {/* Editor - White Background */}\r\n                        <div className=\"bg-white rounded-xl border border-slate-200 shadow-sm min-h-[500px] flex flex-col\">\r\n                            {/* Editor Toolbar */}\r\n                            <div className=\"border-b border-slate-100 p-2 flex items-center gap-2 sticky top-[72px] bg-white z-10 rounded-t-xl\">\r\n                                <label className=\"flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-slate-600 hover:bg-slate-100 rounded-lg cursor-pointer transition-colors\">\r\n                                    <input\r\n                                        type=\"file\"\r\n                                        accept=\"image/*\"\r\n                                        className=\"hidden\"\r\n                                        onChange={async (e) => {\r\n                                            const file = e.target.files?.[0];\r\n                                            if (!file) return;\r\n\r\n                                            // Show toast\r\n                                            const toastId = addToast('Uploading image...', 'info');\r\n\r\n                                            try {\r\n                                                const url = await uploadBlogImage(file);\r\n                                                if (url) {\r\n                                                    editor.chain().focus().setImage({ src: url }).run();\r\n                                                    addToast('Image inserted!', 'success');\r\n                                                }\r\n                                            } catch (error) {\r\n                                                addToast('Failed to upload image', 'error');\r\n                                            }\r\n                                        }}\r\n                                    />\r\n                                    <ImageIcon className=\"h-4 w-4\" />\r\n                                    Insert Image\r\n                                </label>\r\n                                <div className=\"w-px h-6 bg-slate-200 mx-2\" />\r\n                                {/* Add other toolbar buttons if needed (Bold, Italic, etc) */}\r\n                            </div>\r\n\r\n                            <div className=\"p-8 flex-1\">\r\n                                <EditorContent editor={editor} />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Right Sidebar - Settings */}\r\n                    <div className=\"w-80 flex-shrink-0 hidden lg:block\">\r\n                        <div className=\"sticky top-24 space-y-6\">\r\n                            {/* Slug */}\r\n                            <div className=\"bg-white rounded-xl border border-slate-200 shadow-sm p-5\">\r\n                                <div className=\"flex items-center gap-2 mb-3\">\r\n                                    <Link2 className=\"h-4 w-4 text-slate-400\" />\r\n                                    <h3 className=\"font-semibold text-slate-900 text-sm\">URL Slug</h3>\r\n                                </div>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"my-post-url\"\r\n                                    value={formData.slug}\r\n                                    onChange={(e) => setFormData({ ...formData, slug: e.target.value })}\r\n                                    className=\"w-full px-3 py-2 rounded-lg border border-slate-200 text-sm focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500 transition-all\"\r\n                                />\r\n                                <button\r\n                                    onClick={generateSlug}\r\n                                    className=\"mt-2 text-xs text-orange-600 hover:text-orange-700 font-medium\"\r\n                                >\r\n                                    Generate from title\r\n                                </button>\r\n                            </div>\r\n\r\n                            {/* Tags */}\r\n                            <div className=\"bg-white rounded-xl border border-slate-200 shadow-sm p-5\">\r\n                                <div className=\"flex items-center gap-2 mb-3\">\r\n                                    <Tag className=\"h-4 w-4 text-slate-400\" />\r\n                                    <h3 className=\"font-semibold text-slate-900 text-sm\">Tags</h3>\r\n                                </div>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"ai, writing, tips\"\r\n                                    value={formData.tags}\r\n                                    onChange={(e) => setFormData({ ...formData, tags: e.target.value })}\r\n                                    className=\"w-full px-3 py-2 rounded-lg border border-slate-200 text-sm focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500 transition-all\"\r\n                                />\r\n                                <p className=\"mt-2 text-xs text-slate-400\">Separate with commas</p>\r\n                            </div>\r\n\r\n                            {/* Featured Image */}\r\n                            <div className=\"bg-white rounded-xl border border-slate-200 shadow-sm p-5\">\r\n                                <div className=\"flex items-center gap-2 mb-3\">\r\n                                    <ImageIcon className=\"h-4 w-4 text-slate-400\" />\r\n                                    <h3 className=\"font-semibold text-slate-900 text-sm\">Featured Image</h3>\r\n                                </div>\r\n                                <div className=\"space-y-3\">\r\n                                    {/* Upload Button */}\r\n                                    <div className=\"relative\">\r\n                                        <input\r\n                                            type=\"file\"\r\n                                            accept=\"image/*\"\r\n                                            disabled={isUploading}\r\n                                            onChange={async (e) => {\r\n                                                const file = e.target.files?.[0];\r\n                                                if (!file) return;\r\n\r\n                                                setIsUploading(true);\r\n                                                try {\r\n                                                    const url = await uploadBlogImage(file);\r\n                                                    setFormData(prev => ({ ...prev, cover_image: url }));\r\n                                                    addToast('Image uploaded successfully', 'success');\r\n                                                } catch (error) {\r\n                                                    addToast('Failed to upload image', 'error');\r\n                                                } finally {\r\n                                                    setIsUploading(false);\r\n                                                }\r\n                                            }}\r\n                                            className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer disabled:cursor-not-allowed\"\r\n                                        />\r\n                                        <div className={`w-full border-2 border-dashed rounded-lg p-4 flex flex-col items-center justify-center transition-colors ${isUploading ? 'bg-slate-50 border-slate-300' : 'border-slate-200 hover:border-orange-500 hover:bg-orange-50'}`}>\r\n                                            {isUploading ? (\r\n                                                <Loader2 className=\"h-6 w-6 text-orange-500 animate-spin\" />\r\n                                            ) : (\r\n                                                <>\r\n                                                    <UploadCloud className=\"h-6 w-6 text-slate-400 mb-2\" />\r\n                                                    <span className=\"text-xs font-medium text-slate-600\">Click to upload cover</span>\r\n                                                </>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/* URL Fallback */}\r\n                                    <div className=\"relative\">\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            placeholder=\"Or paste image URL...\"\r\n                                            value={formData.cover_image}\r\n                                            onChange={(e) => setFormData({ ...formData, cover_image: e.target.value })}\r\n                                            className=\"w-full pl-3 pr-8 py-2 rounded-lg border border-slate-200 text-xs focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500\"\r\n                                        />\r\n                                        {formData.cover_image && (\r\n                                            <button\r\n                                                onClick={() => setFormData({ ...formData, cover_image: '' })}\r\n                                                className=\"absolute right-2 top-1/2 -translate-y-1/2 text-slate-400 hover:text-red-500\"\r\n                                            >\r\n                                                <X className=\"h-3 w-3\" />\r\n                                            </button>\r\n                                        )}\r\n                                    </div>\r\n\r\n                                    {/* Preview */}\r\n                                    {formData.cover_image && (\r\n                                        <div className=\"aspect-video w-full rounded-lg overflow-hidden bg-slate-100 border border-slate-200 relative group\">\r\n                                            <img\r\n                                                src={formData.cover_image}\r\n                                                alt=\"Preview\"\r\n                                                className=\"w-full h-full object-cover\"\r\n                                                onError={(e) => e.target.style.display = 'none'}\r\n                                            />\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Status */}\r\n                            <div className=\"bg-white rounded-xl border border-slate-200 shadow-sm p-5\">\r\n                                <div className=\"flex items-center gap-2 mb-3\">\r\n                                    <Hash className=\"h-4 w-4 text-slate-400\" />\r\n                                    <h3 className=\"font-semibold text-slate-900 text-sm\">Status</h3>\r\n                                </div>\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <span className={`h-2 w-2 rounded-full ${formData.published ? 'bg-green-500' : 'bg-amber-500'}`}></span>\r\n                                    <span className=\"text-sm text-slate-600\">\r\n                                        {formData.published ? 'Published' : 'Draft'}\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\pages\\Admin\\FeedbackManager.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\pages\\Admin\\UsersManager.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'error' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":27,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"error"},"fix":{"range":[773,778],"text":""},"desc":"Remove unused variable 'error'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":55,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":55,"endColumn":21},{"ruleId":"no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":69,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":69,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from 'react';\r\nimport {\r\n    Ban,\r\n    CheckCircle,\r\n    Loader2,\r\n    MoreVertical,\r\n    Search,\r\n    Trash2,\r\n    User,\r\n    UserCheck,\r\n    UserX,\r\n    Shield,\r\n    ShieldAlert\r\n} from 'lucide-react';\r\nimport { getAdminUsers, updateUserStatus, deleteUser } from '../../services/adminService';\r\nimport { useTheme } from '../../context/ThemeContext';\r\nimport { cn } from '../../lib/utils';\r\n\r\nexport default function UsersManager() {\r\n    const { theme } = useTheme();\r\n    const isDark = theme === 'dark';\r\n\r\n    const [users, setUsers] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [actionLoading, setActionLoading] = useState(null);\r\n    const [error, setError] = useState(null);\r\n\r\n    const loadUsers = async () => {\r\n        try {\r\n            const data = await getAdminUsers();\r\n            setUsers(data);\r\n            setError(null);\r\n        } catch (err) {\r\n            setError('Failed to load users');\r\n            console.error(err);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        loadUsers();\r\n    }, []);\r\n\r\n    const handleBanUser = async (userId, currentStatus) => {\r\n        if (!window.confirm(`Are you sure you want to ${currentStatus === 'banned' ? 'unban' : 'ban'} this user?`)) return;\r\n        \r\n        const newStatus = currentStatus === 'banned' ? 'active' : 'banned';\r\n        setActionLoading(userId);\r\n        try {\r\n            await updateUserStatus(userId, newStatus);\r\n            // Optimistic update\r\n            setUsers(users.map(u => u.id === userId ? { ...u, user_metadata: { ...u.user_metadata, status: newStatus } } : u));\r\n        } catch (err) {\r\n            setError('Failed to update user status');\r\n        } finally {\r\n            setActionLoading(null);\r\n        }\r\n    };\r\n\r\n    const handleDeleteUser = async (userId) => {\r\n        if (!window.confirm('Are you sure you want to delete this user? This action cannot be undone.')) return;\r\n\r\n        setActionLoading(userId);\r\n        try {\r\n            await deleteUser(userId);\r\n            setUsers(users.filter(u => u.id !== userId));\r\n        } catch (err) {\r\n            setError('Failed to delete user');\r\n        } finally {\r\n            setActionLoading(null);\r\n        }\r\n    };\r\n\r\n    const filteredUsers = users.filter((u) =>\r\n        (u.email?.toLowerCase() || '').includes(searchQuery.toLowerCase()) ||\r\n        (u.id?.toLowerCase() || '').includes(searchQuery.toLowerCase())\r\n    );\r\n\r\n    const stats = {\r\n        total: users.length,\r\n        active: users.filter(u => u.user_metadata?.status !== 'banned').length,\r\n        banned: users.filter(u => u.user_metadata?.status === 'banned').length\r\n    };\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <div className=\"flex items-center justify-center h-64\">\r\n                <Loader2 className=\"h-8 w-8 text-orange-500 animate-spin\" />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className={cn(\r\n            'space-y-8 animate-in fade-in duration-300',\r\n            isDark ? 'text-slate-100' : 'text-slate-900'\r\n        )}>\r\n            {/* Header */}\r\n            <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\r\n                <div>\r\n                    <h1 className=\"text-2xl font-bold\">User Management</h1>\r\n                    <p className=\"text-sm text-slate-500 dark:text-slate-400\">\r\n                        Manage user accounts, roles, and permissions\r\n                    </p>\r\n                </div>\r\n                <div className=\"relative\">\r\n                    <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400\" />\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Search users...\"\r\n                        value={searchQuery}\r\n                        onChange={(e) => setSearchQuery(e.target.value)}\r\n                        className={cn(\r\n                            \"pl-9 pr-4 py-2 rounded-lg text-sm w-full sm:w-64 focus:outline-none focus:ring-2 focus:ring-orange-500/50\",\r\n                            isDark \r\n                                ? \"bg-slate-900 border border-slate-800 text-slate-200 placeholder:text-slate-500\" \r\n                                : \"bg-white border border-slate-200 text-slate-900 placeholder:text-slate-400\"\r\n                        )}\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* Stats Cards */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                <div className={cn(\r\n                    'p-5 rounded-xl border flex items-center justify-between',\r\n                    isDark ? 'bg-slate-900/70 border-slate-800' : 'bg-white border-slate-200'\r\n                )}>\r\n                    <div>\r\n                        <p className=\"text-xs font-medium text-slate-500 uppercase\">Total Users</p>\r\n                        <h3 className=\"text-2xl font-bold mt-1\">{stats.total}</h3>\r\n                    </div>\r\n                    <div className=\"h-10 w-10 rounded-full bg-blue-500/10 flex items-center justify-center text-blue-500\">\r\n                        <User className=\"h-5 w-5\" />\r\n                    </div>\r\n                </div>\r\n                <div className={cn(\r\n                    'p-5 rounded-xl border flex items-center justify-between',\r\n                    isDark ? 'bg-slate-900/70 border-slate-800' : 'bg-white border-slate-200'\r\n                )}>\r\n                    <div>\r\n                        <p className=\"text-xs font-medium text-slate-500 uppercase\">Active Users</p>\r\n                        <h3 className=\"text-2xl font-bold mt-1\">{stats.active}</h3>\r\n                    </div>\r\n                    <div className=\"h-10 w-10 rounded-full bg-green-500/10 flex items-center justify-center text-green-500\">\r\n                        <UserCheck className=\"h-5 w-5\" />\r\n                    </div>\r\n                </div>\r\n                <div className={cn(\r\n                    'p-5 rounded-xl border flex items-center justify-between',\r\n                    isDark ? 'bg-slate-900/70 border-slate-800' : 'bg-white border-slate-200'\r\n                )}>\r\n                    <div>\r\n                        <p className=\"text-xs font-medium text-slate-500 uppercase\">Banned Users</p>\r\n                        <h3 className=\"text-2xl font-bold mt-1\">{stats.banned}</h3>\r\n                    </div>\r\n                    <div className=\"h-10 w-10 rounded-full bg-red-500/10 flex items-center justify-center text-red-500\">\r\n                        <UserX className=\"h-5 w-5\" />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Users Table */}\r\n            <div className={cn(\r\n                'rounded-xl border overflow-hidden',\r\n                isDark ? 'bg-slate-900/70 border-slate-800' : 'bg-white border-slate-200'\r\n            )}>\r\n                <div className=\"overflow-x-auto\">\r\n                    <table className=\"w-full text-sm text-left\">\r\n                        <thead className={cn(\r\n                            'text-xs uppercase font-medium',\r\n                            isDark ? 'bg-slate-900/50 text-slate-400' : 'bg-slate-50 text-slate-500'\r\n                        )}>\r\n                            <tr>\r\n                                <th className=\"px-6 py-4\">User</th>\r\n                                <th className=\"px-6 py-4\">Role</th>\r\n                                <th className=\"px-6 py-4\">Status</th>\r\n                                <th className=\"px-6 py-4\">Joined</th>\r\n                                <th className=\"px-6 py-4 text-right\">Actions</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody className=\"divide-y divide-slate-200 dark:divide-slate-800\">\r\n                            {filteredUsers.length === 0 ? (\r\n                                <tr>\r\n                                    <td colSpan=\"5\" className=\"px-6 py-8 text-center text-slate-500\">\r\n                                        No users found matching your search.\r\n                                    </td>\r\n                                </tr>\r\n                            ) : (\r\n                                filteredUsers.map((user) => {\r\n                                    const isBanned = user.user_metadata?.status === 'banned';\r\n                                    const isAdmin = user.app_metadata?.role === 'admin' || user.user_metadata?.role === 'admin';\r\n                                    \r\n                                    return (\r\n                                        <tr key={user.id} className={cn(\r\n                                            'transition-colors',\r\n                                            isDark ? 'hover:bg-slate-800/50' : 'hover:bg-slate-50'\r\n                                        )}>\r\n                                            <td className=\"px-6 py-4\">\r\n                                                <div className=\"flex items-center gap-3\">\r\n                                                    <div className={cn(\r\n                                                        \"h-8 w-8 rounded-full flex items-center justify-center text-xs font-bold uppercase\",\r\n                                                        isDark ? \"bg-slate-800 text-slate-300\" : \"bg-slate-100 text-slate-600\"\r\n                                                    )}>\r\n                                                        {user.email?.[0] || 'U'}\r\n                                                    </div>\r\n                                                    <div>\r\n                                                        <div className=\"font-medium text-slate-900 dark:text-slate-100\">\r\n                                                            {user.email}\r\n                                                        </div>\r\n                                                        <div className=\"text-xs text-slate-500\">\r\n                                                            ID: {user.id.slice(0, 8)}...\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </td>\r\n                                            <td className=\"px-6 py-4\">\r\n                                                {isAdmin ? (\r\n                                                    <span className=\"inline-flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-700 dark:bg-purple-500/10 dark:text-purple-400\">\r\n                                                        <Shield className=\"h-3 w-3\" /> Admin\r\n                                                    </span>\r\n                                                ) : (\r\n                                                    <span className=\"inline-flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-xs font-medium bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400\">\r\n                                                        User\r\n                                                    </span>\r\n                                                )}\r\n                                            </td>\r\n                                            <td className=\"px-6 py-4\">\r\n                                                {isBanned ? (\r\n                                                    <span className=\"inline-flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-700 dark:bg-red-500/10 dark:text-red-400\">\r\n                                                        <UserX className=\"h-3 w-3\" /> Banned\r\n                                                    </span>\r\n                                                ) : (\r\n                                                    <span className=\"inline-flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-700 dark:bg-green-500/10 dark:text-green-400\">\r\n                                                        <CheckCircle className=\"h-3 w-3\" /> Active\r\n                                                    </span>\r\n                                                )}\r\n                                            </td>\r\n                                            <td className=\"px-6 py-4 text-slate-500 dark:text-slate-400\">\r\n                                                {new Date(user.created_at).toLocaleDateString()}\r\n                                            </td>\r\n                                            <td className=\"px-6 py-4 text-right\">\r\n                                                <div className=\"flex items-center justify-end gap-2\">\r\n                                                    <button\r\n                                                        onClick={() => handleBanUser(user.id, user.user_metadata?.status)}\r\n                                                        disabled={actionLoading === user.id}\r\n                                                        className={cn(\r\n                                                            \"p-2 rounded-lg transition-colors disabled:opacity-50\",\r\n                                                            isBanned \r\n                                                                ? \"text-green-600 hover:bg-green-50 dark:text-green-400 dark:hover:bg-green-500/10\" \r\n                                                                : \"text-orange-600 hover:bg-orange-50 dark:text-orange-400 dark:hover:bg-orange-500/10\"\r\n                                                        )}\r\n                                                        title={isBanned ? \"Activate User\" : \"Ban User\"}\r\n                                                    >\r\n                                                        {actionLoading === user.id ? (\r\n                                                            <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n                                                        ) : (\r\n                                                            isBanned ? <CheckCircle className=\"h-4 w-4\" /> : <Ban className=\"h-4 w-4\" />\r\n                                                        )}\r\n                                                    </button>\r\n                                                    <button\r\n                                                        onClick={() => handleDeleteUser(user.id)}\r\n                                                        disabled={actionLoading === user.id}\r\n                                                        className=\"p-2 text-red-600 rounded-lg hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-500/10 transition-colors disabled:opacity-50\"\r\n                                                        title=\"Delete User\"\r\n                                                    >\r\n                                                        <Trash2 className=\"h-4 w-4\" />\r\n                                                    </button>\r\n                                                </div>\r\n                                            </td>\r\n                                        </tr>\r\n                                    );\r\n                                })\r\n                            )}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\pages\\Auth\\AuthCallback.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'searchParams' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":11,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"searchParams"},"fix":{"range":[477,518],"text":""},"desc":"Remove unused variable 'searchParams'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from 'react';\r\nimport { useNavigate, useSearchParams } from 'react-router-dom';\r\nimport { supabase } from '../../lib/supabase';\r\nimport { Sparkles, CheckCircle, XCircle, Loader2 } from 'lucide-react';\r\nimport { Card, CardContent } from '../../components/ui/Card';\r\nimport { Button } from '../../components/ui/Button';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport default function AuthCallback() {\r\n    const navigate = useNavigate();\r\n    const [searchParams] = useSearchParams();\r\n    const [status, setStatus] = useState('loading'); // 'loading', 'success', 'error'\r\n    const [message, setMessage] = useState('');\r\n\r\n    useEffect(() => {\r\n        const handleCallback = async () => {\r\n            try {\r\n                // Get the hash params (Supabase uses hash for auth callbacks)\r\n                const hashParams = new URLSearchParams(window.location.hash.substring(1));\r\n                const accessToken = hashParams.get('access_token');\r\n                const refreshToken = hashParams.get('refresh_token');\r\n                const type = hashParams.get('type');\r\n\r\n                // Check if this is an email verification\r\n                if (type === 'signup' || type === 'email_change') {\r\n                    // Email verification\r\n                    if (accessToken && refreshToken) {\r\n                        const { error } = await supabase.auth.setSession({\r\n                            access_token: accessToken,\r\n                            refresh_token: refreshToken,\r\n                        });\r\n\r\n                        if (error) throw error;\r\n\r\n                        // Sync user profile (creates usage record)\r\n                        try {\r\n                            const { syncUserProfile } = await import('../../services/usersService');\r\n                            await syncUserProfile();\r\n                        } catch (e) {\r\n                            console.error('Sync failed', e);\r\n                        }\r\n\r\n                        setStatus('success');\r\n                        setMessage('Email verified successfully!');\r\n\r\n                        // Redirect to dashboard after 2 seconds\r\n                        setTimeout(() => {\r\n                            navigate('/dashboard');\r\n                        }, 2000);\r\n                    } else {\r\n                        // Try to get the session from URL (newer Supabase versions)\r\n                        const { data: { session }, error } = await supabase.auth.getSession();\r\n\r\n                        if (error) throw error;\r\n\r\n                        if (session) {\r\n                            // Sync user profile (creates usage record)\r\n                            try {\r\n                                const { syncUserProfile } = await import('../../services/usersService');\r\n                                await syncUserProfile();\r\n                            } catch (e) {\r\n                                console.error('Sync failed', e);\r\n                            }\r\n\r\n                            setStatus('success');\r\n                            setMessage('Email verified successfully!');\r\n                            setTimeout(() => {\r\n                                navigate('/dashboard');\r\n                            }, 2000);\r\n                        } else {\r\n                            throw new Error('No session found');\r\n                        }\r\n                    }\r\n                } else if (type === 'recovery') {\r\n                    // Password recovery - redirect to reset password page\r\n                    // The session is already set by Supabase\r\n                    navigate('/reset-password');\r\n                } else {\r\n                    // OAuth callback or other - check for session\r\n                    const { data: { session }, error } = await supabase.auth.getSession();\r\n\r\n                    if (error) throw error;\r\n\r\n                    if (session) {\r\n                        // Sync user profile with backend\r\n                        try {\r\n                            // Dynamically import to avoid circular dependencies if any (safe practice)\r\n                            const { syncUserProfile } = await import('../../services/usersService');\r\n                            await syncUserProfile();\r\n                        } catch (e) {\r\n                            console.error('Sync failed', e);\r\n                        }\r\n\r\n                        setStatus('success');\r\n                        setMessage('Successfully signed in!');\r\n                        setTimeout(() => {\r\n                            navigate('/dashboard');\r\n                        }, 1500);\r\n                    } else {\r\n                        throw new Error('Authentication failed');\r\n                    }\r\n                }\r\n            } catch (err) {\r\n                console.error('Auth callback error:', err);\r\n                setStatus('error');\r\n                setMessage(err.message || 'Something went wrong. Please try again.');\r\n            }\r\n        };\r\n\r\n        handleCallback();\r\n    }, [navigate]);\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-slate-50 flex items-center justify-center p-4\">\r\n            {/* Background decoration */}\r\n            <div className=\"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none\">\r\n                <div className=\"absolute top-[-20%] right-[-10%] w-[600px] h-[600px] bg-indigo-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob\"></div>\r\n                <div className=\"absolute bottom-[-20%] left-[-10%] w-[600px] h-[600px] bg-purple-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-2000\"></div>\r\n            </div>\r\n\r\n            <div className=\"w-full max-w-md relative z-10\">\r\n                <div className=\"text-center mb-8\">\r\n                    <Link to=\"/\" className=\"inline-flex items-center gap-2 mb-4 group\">\r\n                        <div className=\"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-blue-600 to-violet-600 shadow-lg shadow-indigo-500/20 group-hover:scale-105 transition-transform\">\r\n                            <Sparkles className=\"h-5 w-5 text-white\" />\r\n                        </div>\r\n                    </Link>\r\n                </div>\r\n\r\n                <Card className=\"border-slate-200 shadow-xl shadow-slate-200/50 bg-white/80 backdrop-blur-sm\">\r\n                    <CardContent className=\"pt-8 pb-8 text-center\">\r\n                        {status === 'loading' && (\r\n                            <>\r\n                                <div className=\"mx-auto w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mb-4\">\r\n                                    <Loader2 className=\"h-8 w-8 text-indigo-600 animate-spin\" />\r\n                                </div>\r\n                                <h2 className=\"text-xl font-bold text-slate-900 mb-2\">Verifying...</h2>\r\n                                <p className=\"text-slate-600\">Please wait while we verify your request.</p>\r\n                            </>\r\n                        )}\r\n\r\n                        {status === 'success' && (\r\n                            <>\r\n                                <div className=\"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4\">\r\n                                    <CheckCircle className=\"h-8 w-8 text-green-600\" />\r\n                                </div>\r\n                                <h2 className=\"text-xl font-bold text-slate-900 mb-2\">{message}</h2>\r\n                                <p className=\"text-slate-600\">Redirecting you to the dashboard...</p>\r\n                            </>\r\n                        )}\r\n\r\n                        {status === 'error' && (\r\n                            <>\r\n                                <div className=\"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4\">\r\n                                    <XCircle className=\"h-8 w-8 text-red-600\" />\r\n                                </div>\r\n                                <h2 className=\"text-xl font-bold text-slate-900 mb-2\">Verification Failed</h2>\r\n                                <p className=\"text-slate-600 mb-6\">{message}</p>\r\n                                <div className=\"space-y-3\">\r\n                                    <Link to=\"/login\" className=\"block\">\r\n                                        <Button className=\"w-full bg-slate-900 hover:bg-slate-800\">\r\n                                            Go to Login\r\n                                        </Button>\r\n                                    </Link>\r\n                                    <Link to=\"/signup\" className=\"block\">\r\n                                        <Button variant=\"outline\" className=\"w-full\">\r\n                                            Create Account\r\n                                        </Button>\r\n                                    </Link>\r\n                                </div>\r\n                            </>\r\n                        )}\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\pages\\Auth\\ForgotPassword.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\pages\\Auth\\Login.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\pages\\Auth\\ResetPassword.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\pages\\Auth\\Signup.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'navigate' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":21,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"navigate"},"fix":{"range":[1278,1309],"text":""},"desc":"Remove unused variable 'navigate'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Link, useNavigate } from 'react-router-dom';\r\nimport { Button } from '../../components/ui/Button';\r\nimport { Card, CardContent, CardFooter } from '../../components/ui/Card';\r\nimport { Mail, Lock, User } from 'lucide-react';\r\nimport { useState } from 'react';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport { useTheme } from '../../context/ThemeContext';\r\nimport { cn } from '../../lib/utils';\r\n\r\n// Google Icon Component\r\nconst GoogleIcon = ({ className }) => (\r\n    <svg className={className} viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n        <path d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\" fill=\"#4285F4\" />\r\n        <path d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\" fill=\"#34A853\" />\r\n        <path d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\" fill=\"#FBBC05\" />\r\n        <path d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\" fill=\"#EA4335\" />\r\n    </svg>\r\n);\r\n\r\nexport default function Signup() {\r\n    const navigate = useNavigate();\r\n    const { signUp, signInWithGoogle } = useAuth();\r\n    const { theme } = useTheme();\r\n    const isDark = theme === 'dark';\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [isGoogleLoading, setIsGoogleLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const [success, setSuccess] = useState(false);\r\n    const [formData, setFormData] = useState({\r\n        fullName: '',\r\n        email: '',\r\n        password: '',\r\n    });\r\n\r\n    const handleChange = (e) => {\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            [e.target.name]: e.target.value\r\n        }));\r\n        setError('');\r\n    };\r\n\r\n    const handleSignup = async (e) => {\r\n        e.preventDefault();\r\n        setIsLoading(true);\r\n        setError('');\r\n\r\n        try {\r\n            await signUp(formData.email, formData.password, formData.fullName);\r\n            setSuccess(true);\r\n        } catch (err) {\r\n            setError(err.message || 'Failed to create account');\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleGoogleSignup = async () => {\r\n        setIsGoogleLoading(true);\r\n        setError('');\r\n\r\n        try {\r\n            await signInWithGoogle();\r\n            // Redirect happens automatically via OAuth\r\n        } catch (err) {\r\n            setError(err.message || 'Failed to sign up with Google');\r\n            setIsGoogleLoading(false);\r\n        }\r\n    };\r\n\r\n    // Show success message after signup\r\n    if (success) {\r\n        return (\r\n            <div className={cn(\r\n                \"min-h-screen flex items-center justify-center p-4 transition-colors duration-300\",\r\n                isDark ? \"bg-gradient-to-br from-slate-900 via-slate-950 to-slate-900\" : \"bg-slate-50\"\r\n            )}>\r\n                <div className=\"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none\">\r\n                    {isDark ? (\r\n                        <>\r\n                            <div className=\"absolute top-[-20%] left-[-10%] w-[600px] h-[600px] bg-green-500/20 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob\"></div>\r\n                            <div className=\"absolute bottom-[-20%] right-[-10%] w-[600px] h-[600px] bg-orange-500/20 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-4000\"></div>\r\n                        </>\r\n                    ) : (\r\n                        <>\r\n                            <div className=\"absolute top-[-20%] left-[-10%] w-[600px] h-[600px] bg-green-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob\"></div>\r\n                            <div className=\"absolute bottom-[-20%] right-[-10%] w-[600px] h-[600px] bg-indigo-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-4000\"></div>\r\n                        </>\r\n                    )}\r\n                </div>\r\n\r\n                <div className=\"w-full max-w-md relative z-10\">\r\n                    <Card className={cn(\r\n                        \"shadow-xl backdrop-blur-sm border\",\r\n                        isDark\r\n                            ? \"bg-white/5 border-white/10 shadow-black/20\"\r\n                            : \"border-slate-200 bg-white/80 shadow-indigo-500/5\"\r\n                    )}>\r\n                        <CardContent className=\"pt-8 pb-8 text-center\">\r\n                            <div className={cn(\r\n                                \"mx-auto w-16 h-16 rounded-full flex items-center justify-center mb-4\",\r\n                                isDark ? \"bg-green-500/20\" : \"bg-green-100\"\r\n                            )}>\r\n                                <Mail className={cn(\r\n                                    \"h-8 w-8\",\r\n                                    isDark ? \"text-green-400\" : \"text-green-600\"\r\n                                )} />\r\n                            </div>\r\n                            <h2 className={cn(\r\n                                \"text-2xl font-bold mb-2\",\r\n                                isDark ? \"text-white\" : \"text-slate-900\"\r\n                            )}>\r\n                                Check Your Email\r\n                            </h2>\r\n                            <p className={cn(\r\n                                \"mb-4\",\r\n                                isDark ? \"text-slate-300\" : \"text-slate-600\"\r\n                            )}>\r\n                                We've sent a verification link to<br />\r\n                                <span className={cn(\r\n                                    \"font-semibold\",\r\n                                    isDark ? \"text-white\" : \"text-slate-900\"\r\n                                )}>\r\n                                    {formData.email}\r\n                                </span>\r\n                            </p>\r\n                            <p className={cn(\r\n                                \"text-sm mb-6\",\r\n                                isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                            )}>\r\n                                Click the link in the email to verify your account and start transforming your assignments.\r\n                            </p>\r\n                            <Link to=\"/login\">\r\n                                <Button\r\n                                    variant=\"outline\"\r\n                                    className={cn(\r\n                                        \"w-full\",\r\n                                        isDark && \"border-white/10 bg-white/5 text-white hover:bg-white/10\"\r\n                                    )}\r\n                                >\r\n                                    Back to Login\r\n                                </Button>\r\n                            </Link>\r\n                        </CardContent>\r\n                    </Card>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className={cn(\r\n            \"min-h-screen flex items-center justify-center p-4 transition-colors duration-300\",\r\n            isDark ? \"bg-gradient-to-br from-slate-900 via-slate-950 to-slate-900\" : \"bg-slate-50\"\r\n        )}>\r\n            {/* Background decoration */}\r\n            <div className=\"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none\">\r\n                {isDark ? (\r\n                    <>\r\n                        <div className=\"absolute top-[-20%] left-[-10%] w-[600px] h-[600px] bg-green-500/20 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob\"></div>\r\n                        <div className=\"absolute bottom-[-20%] right-[-10%] w-[600px] h-[600px] bg-orange-500/20 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-4000\"></div>\r\n                    </>\r\n                ) : (\r\n                    <>\r\n                        <div className=\"absolute top-[-20%] left-[-10%] w-[600px] h-[600px] bg-green-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob\"></div>\r\n                        <div className=\"absolute bottom-[-20%] right-[-10%] w-[600px] h-[600px] bg-indigo-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-4000\"></div>\r\n                    </>\r\n                )}\r\n            </div>\r\n\r\n            <div className=\"w-full max-w-md relative z-10\">\r\n                <div className=\"text-center mb-8\">\r\n                    <Link to=\"/\" className=\"inline-flex items-center gap-2 mb-4 group\">\r\n                        <div className=\"flex h-12 w-12 items-center justify-center rounded-xl overflow-hidden shadow-lg shadow-orange-500/20 group-hover:scale-105 transition-transform\">\r\n                            <img src=\"/docley-logo.png\" alt=\"Docley\" className=\"h-full w-full object-contain\" />\r\n                        </div>\r\n                    </Link>\r\n                    <h2 className={cn(\r\n                        \"text-3xl font-bold\",\r\n                        isDark ? \"text-white\" : \"text-slate-900\"\r\n                    )}>\r\n                        Create Account\r\n                    </h2>\r\n                    <p className={cn(\r\n                        \"mt-2\",\r\n                        isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                    )}>\r\n                        Start transforming your grades today.\r\n                    </p>\r\n                </div>\r\n\r\n                <Card className={cn(\r\n                    \"shadow-xl backdrop-blur-sm border\",\r\n                    isDark\r\n                        ? \"bg-white/5 border-white/10 shadow-black/20\"\r\n                        : \"border-slate-200 bg-white/80 shadow-indigo-500/5\"\r\n                )}>\r\n                    <CardContent className=\"pt-6\">\r\n                        {error && (\r\n                            <div className={cn(\r\n                                \"mb-4 p-3 border text-sm rounded-lg\",\r\n                                isDark\r\n                                    ? \"bg-red-500/20 border-red-500/30 text-red-400\"\r\n                                    : \"bg-red-50 border-red-200 text-red-700\"\r\n                            )}>\r\n                                {error}\r\n                            </div>\r\n                        )}\r\n\r\n                        <form onSubmit={handleSignup} className=\"space-y-4\">\r\n                            <div className=\"space-y-2\">\r\n                                <label className={cn(\r\n                                    \"text-sm font-medium\",\r\n                                    isDark ? \"text-slate-300\" : \"text-slate-700\"\r\n                                )}>\r\n                                    Full Name\r\n                                </label>\r\n                                <div className=\"relative\">\r\n                                    <User className={cn(\r\n                                        \"absolute left-3 top-2.5 h-5 w-5\",\r\n                                        isDark ? \"text-slate-500\" : \"text-slate-400\"\r\n                                    )} />\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        name=\"fullName\"\r\n                                        value={formData.fullName}\r\n                                        onChange={handleChange}\r\n                                        placeholder=\"John Doe\"\r\n                                        className={cn(\r\n                                            \"w-full pl-10 h-10 rounded-lg border text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all\",\r\n                                            isDark\r\n                                                ? \"bg-white/5 border-white/10 text-white placeholder-slate-500\"\r\n                                                : \"border-slate-200 bg-white text-slate-900\"\r\n                                        )}\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-2\">\r\n                                <label className={cn(\r\n                                    \"text-sm font-medium\",\r\n                                    isDark ? \"text-slate-300\" : \"text-slate-700\"\r\n                                )}>\r\n                                    Email Address\r\n                                </label>\r\n                                <div className=\"relative\">\r\n                                    <Mail className={cn(\r\n                                        \"absolute left-3 top-2.5 h-5 w-5\",\r\n                                        isDark ? \"text-slate-500\" : \"text-slate-400\"\r\n                                    )} />\r\n                                    <input\r\n                                        type=\"email\"\r\n                                        name=\"email\"\r\n                                        value={formData.email}\r\n                                        onChange={handleChange}\r\n                                        placeholder=\"student@university.edu\"\r\n                                        className={cn(\r\n                                            \"w-full pl-10 h-10 rounded-lg border text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all\",\r\n                                            isDark\r\n                                                ? \"bg-white/5 border-white/10 text-white placeholder-slate-500\"\r\n                                                : \"border-slate-200 bg-white text-slate-900\"\r\n                                        )}\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-2\">\r\n                                <label className={cn(\r\n                                    \"text-sm font-medium\",\r\n                                    isDark ? \"text-slate-300\" : \"text-slate-700\"\r\n                                )}>\r\n                                    Password\r\n                                </label>\r\n                                <div className=\"relative\">\r\n                                    <Lock className={cn(\r\n                                        \"absolute left-3 top-2.5 h-5 w-5\",\r\n                                        isDark ? \"text-slate-500\" : \"text-slate-400\"\r\n                                    )} />\r\n                                    <input\r\n                                        type=\"password\"\r\n                                        name=\"password\"\r\n                                        value={formData.password}\r\n                                        onChange={handleChange}\r\n                                        placeholder=\"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢\"\r\n                                        minLength={6}\r\n                                        className={cn(\r\n                                            \"w-full pl-10 h-10 rounded-lg border text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all\",\r\n                                            isDark\r\n                                                ? \"bg-white/5 border-white/10 text-white placeholder-slate-500\"\r\n                                                : \"border-slate-200 bg-white text-slate-900\"\r\n                                        )}\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                                <p className={cn(\r\n                                    \"text-xs\",\r\n                                    isDark ? \"text-slate-500\" : \"text-slate-500\"\r\n                                )}>\r\n                                    Minimum 6 characters\r\n                                </p>\r\n                            </div>\r\n\r\n                            <Button\r\n                                type=\"submit\"\r\n                                className=\"w-full bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white shadow-lg shadow-orange-500/25\"\r\n                                disabled={isLoading}\r\n                                isLoading={isLoading}\r\n                            >\r\n                                Create Free Account\r\n                            </Button>\r\n                        </form>\r\n\r\n                        <div className=\"relative my-6\">\r\n                            <div className=\"absolute inset-0 flex items-center\">\r\n                                <span className={cn(\r\n                                    \"w-full border-t\",\r\n                                    isDark ? \"border-white/10\" : \"border-slate-200\"\r\n                                )} />\r\n                            </div>\r\n                            <div className=\"relative flex justify-center text-xs uppercase\">\r\n                                <span className={cn(\r\n                                    \"px-2\",\r\n                                    isDark ? \"bg-slate-800 text-slate-400\" : \"bg-white text-slate-500\"\r\n                                )}>\r\n                                    Or continue with\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <Button\r\n                            variant=\"outline\"\r\n                            className={cn(\r\n                                \"w-full\",\r\n                                isDark && \"border-white/10 bg-white/5 text-white hover:bg-white/10\"\r\n                            )}\r\n                            type=\"button\"\r\n                            onClick={handleGoogleSignup}\r\n                            disabled={isGoogleLoading}\r\n                            isLoading={isGoogleLoading}\r\n                        >\r\n                            <GoogleIcon className=\"mr-2 h-4 w-4\" /> Google\r\n                        </Button>\r\n                    </CardContent>\r\n                    <CardFooter className={cn(\r\n                        \"justify-center border-t py-4\",\r\n                        isDark\r\n                            ? \"border-white/10 bg-white/5\"\r\n                            : \"border-slate-100 bg-slate-50/50\"\r\n                    )}>\r\n                        <p className={cn(\r\n                            \"text-sm\",\r\n                            isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                        )}>\r\n                            Already have an account?{' '}\r\n                            <Link to=\"/login\" className={cn(\r\n                                \"font-semibold hover:underline\",\r\n                                isDark ? \"text-orange-400 hover:text-orange-300\" : \"text-orange-600 hover:text-orange-500\"\r\n                            )}>\r\n                                Log in\r\n                            </Link>\r\n                        </p>\r\n                    </CardFooter>\r\n                </Card>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\pages\\Blog\\BlogList.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\pages\\Blog\\BlogPost.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadPost'. Either include it or remove the dependency array.","line":17,"column":8,"nodeType":"ArrayExpression","endLine":17,"endColumn":12,"suggestions":[{"desc":"Update the dependencies array to be: [id, loadPost]","fix":{"range":[715,719],"text":"[id, loadPost]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { useParams, Link } from 'react-router-dom';\r\nimport { Navbar } from '../../components/layout/Navbar';\r\nimport { Footer } from '../../components/layout/Footer';\r\nimport { getPostBySlug, getPostById } from '../../services/blogService';\r\nimport { Calendar, Clock, ArrowLeft, Loader2 } from 'lucide-react';\r\nimport { Button } from '../../components/ui/Button';\r\n\r\nexport default function BlogPost() {\r\n    const { id } = useParams(); // Can be slug or UUID\r\n    const [post, setPost] = useState(null);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [notFound, setNotFound] = useState(false);\r\n\r\n    useEffect(() => {\r\n        loadPost();\r\n    }, [id]);\r\n\r\n    const loadPost = async () => {\r\n        setIsLoading(true);\r\n        setNotFound(false);\r\n        try {\r\n            // Try fetching by slug first, then by ID\r\n            let data = await getPostBySlug(id);\r\n            if (!data) {\r\n                data = await getPostById(id);\r\n            }\r\n\r\n            if (data) {\r\n                setPost(data);\r\n            } else {\r\n                setNotFound(true);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error loading post:', error);\r\n            setNotFound(true);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    // Helper to estimate read time from content\r\n    const getReadTime = (content) => {\r\n        if (!content) return '2 min read';\r\n        const wordCount = content.replace(/<[^>]*>/g, '').split(/\\s+/).length;\r\n        const minutes = Math.max(1, Math.ceil(wordCount / 200));\r\n        return `${minutes} min read`;\r\n    };\r\n\r\n    // Helper to format date\r\n    const formatDate = (dateString) => {\r\n        if (!dateString) return '';\r\n        return new Date(dateString).toLocaleDateString('en-US', {\r\n            year: 'numeric',\r\n            month: 'short',\r\n            day: 'numeric'\r\n        });\r\n    };\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <div className=\"min-h-screen bg-white font-sans\">\r\n                <Navbar />\r\n                <div className=\"flex items-center justify-center h-96\">\r\n                    <Loader2 className=\"h-8 w-8 animate-spin text-orange-500\" />\r\n                </div>\r\n                <Footer />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (notFound || !post) {\r\n        return (\r\n            <div className=\"min-h-screen bg-slate-50 flex items-center justify-center\">\r\n                <div className=\"text-center\">\r\n                    <h1 className=\"text-2xl font-bold text-slate-900 mb-4\">Post not found</h1>\r\n                    <Link to=\"/blog\"><Button>Back to Blog</Button></Link>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-white font-sans\">\r\n            <Navbar />\r\n\r\n            <article className=\"pt-20 pb-24\">\r\n                {/* Header */}\r\n                <div className=\"container mx-auto px-4 md:px-6 max-w-3xl text-center mb-12\">\r\n                    <Link to=\"/blog\" className=\"inline-flex items-center text-slate-500 hover:text-indigo-600 mb-8 transition-colors\">\r\n                        <ArrowLeft className=\"h-4 w-4 mr-2\" /> Back to Articles\r\n                    </Link>\r\n                    <div className=\"flex items-center justify-center gap-4 text-sm text-slate-500 mb-6\">\r\n                        {post.tags && (\r\n                            <span className=\"bg-indigo-50 text-indigo-700 px-3 py-1 rounded-full font-medium\">\r\n                                {post.tags.split(',')[0]}\r\n                            </span>\r\n                        )}\r\n                        <span className=\"flex items-center\">\r\n                            <Calendar className=\"h-4 w-4 mr-1\" /> {formatDate(post.created_at)}\r\n                        </span>\r\n                        <span className=\"flex items-center\">\r\n                            <Clock className=\"h-4 w-4 mr-1\" /> {getReadTime(post.content)}\r\n                        </span>\r\n                    </div>\r\n                    <h1 className=\"text-3xl md:text-5xl font-bold text-slate-900 leading-tight mb-8\">\r\n                        {post.title}\r\n                    </h1>\r\n                </div>\r\n\r\n                {/* Hero Image */}\r\n                {post.cover_image && (\r\n                    <div className=\"container mx-auto px-4 md:px-6 max-w-4xl mb-16\">\r\n                        <div className=\"aspect-video rounded-2xl overflow-hidden shadow-2xl\">\r\n                            <img src={post.cover_image} alt={post.title} className=\"w-full h-full object-cover\" />\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Content */}\r\n                <div className=\"container mx-auto px-4 md:px-6 max-w-3xl\">\r\n                    <div\r\n                        className=\"prose prose-slate prose-lg mx-auto prose-headings:font-bold prose-headings:text-slate-900 prose-a:text-indigo-600 hover:prose-a:text-indigo-500\"\r\n                        dangerouslySetInnerHTML={{ __html: post.content }}\r\n                    />\r\n\r\n                    {/* CTA in blog */}\r\n                    <div className=\"mt-16 p-8 bg-gradient-to-br from-indigo-50 to-blue-50 rounded-2xl border border-indigo-100 text-center\">\r\n                        <h3 className=\"text-2xl font-bold text-slate-900 mb-4\">Want to fix these issues automatically?</h3>\r\n                        <p className=\"text-slate-600 mb-6\">Our AI Academic Transformer scans your work for these exact problems.</p>\r\n                        <Link to=\"/signup\">\r\n                            <Button className=\"shadow-lg shadow-orange-500/20 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 border-none text-white\">\r\n                                Try Academic Transformer Free\r\n                            </Button>\r\n                        </Link>\r\n                    </div>\r\n                </div>\r\n            </article>\r\n\r\n            <Footer />\r\n        </div>\r\n    );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\pages\\Dashboard\\Billing.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'isPremium' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":10,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"isPremium"},"fix":{"range":[486,518],"text":""},"desc":"Remove unused variable 'isPremium'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Card, CardContent, CardHeader, CardTitle, CardDescription } from '../../components/ui/Card';\r\nimport { CreditCard, CheckCircle2, ArrowLeft, Loader2 } from 'lucide-react';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport { cn } from '../../lib/utils';\r\nimport { useState } from 'react';\r\nimport { Button } from '../../components/ui/Button';\r\nimport BillingUpgradeModal from '../../components/modals/BillingUpgradeModal';\r\n\r\nexport default function Billing() {\r\n    const { isPremium } = useAuth();\r\n    const [showUpgradeModal, setShowUpgradeModal] = useState(false);\r\n\r\n    return (\r\n        <div className=\"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300\">\r\n            {/* Back to Settings */}\r\n            <button\r\n                onClick={() => window.history.back()}\r\n                className=\"inline-flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors\"\r\n            >\r\n                <ArrowLeft className=\"h-4 w-4\" />\r\n                Back to Settings\r\n            </button>\r\n\r\n            {/* Current Plan Card */}\r\n            <Card className=\"border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden bg-white dark:bg-slate-900\">\r\n                <CardHeader className=\"border-b border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50\">\r\n                    <CardTitle className=\"text-lg text-slate-900 dark:text-white\">Current Plan</CardTitle>\r\n                    <CardDescription className=\"text-slate-500 dark:text-slate-400\">View your subscription status.</CardDescription>\r\n                </CardHeader>\r\n                <CardContent className=\"p-6\">\r\n                    <div className={cn(\r\n                        \"relative overflow-hidden rounded-xl border p-8\",\r\n                        \"border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900\"\r\n                    )}>\r\n                        <div className=\"absolute top-0 right-0 p-4 opacity-10\">\r\n                            <CreditCard className=\"h-32 w-32 text-slate-600\" />\r\n                        </div>\r\n                        <div className=\"relative z-10 flex flex-col md:flex-row md:items-center justify-between gap-6\">\r\n                            <div>\r\n                                <div className=\"flex items-center gap-3 mb-2\">\r\n                                    <h3 className=\"text-2xl font-bold text-slate-900 dark:text-white\">\r\n                                        Free Plan\r\n                                    </h3>\r\n                                    <span className=\"px-3 py-1 rounded-full text-xs font-bold border bg-indigo-100 dark:bg-indigo-900/50 text-indigo-700 dark:text-indigo-300 border-indigo-200 dark:border-indigo-800\">\r\n                                        ACTIVE\r\n                                    </span>\r\n                                </div>\r\n                                <p className=\"text-slate-600 dark:text-slate-400 max-w-md\">\r\n                                    You are currently on the free tier. Upgrade to unlock all premium features.\r\n                                </p>\r\n                                <div className=\"mt-4\">\r\n                                    <Button\r\n                                        onClick={() => setShowUpgradeModal(true)}\r\n                                        className=\"bg-indigo-600 hover:bg-indigo-700 text-white\"\r\n                                    >\r\n                                        Upgrade to Pro\r\n                                    </Button>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"text-left md:text-right\">\r\n                                <div className=\"text-3xl font-bold text-slate-900 dark:text-white\">\r\n                                    $0\r\n                                </div>\r\n                                <div className=\"text-sm text-slate-500 dark:text-slate-400\">per month</div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n\r\n            {/* Features Info */}\r\n            <Card className=\"border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden bg-white dark:bg-slate-900\">\r\n                <CardHeader className=\"border-b border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50\">\r\n                    <CardTitle className=\"text-lg text-slate-900 dark:text-white\">Plan Features</CardTitle>\r\n                </CardHeader>\r\n                <CardContent className=\"p-6\">\r\n                    <div className=\"space-y-4\">\r\n                        {[\r\n                            { feature: 'Documents', value: '2 per lifetime' },\r\n                            { feature: 'AI Diagnostics', value: '2 per lifetime' },\r\n                            { feature: 'AI Upgrades', value: '2 per lifetime' },\r\n                            { feature: 'Export Formats', value: 'PDF & DOCX' },\r\n                            { feature: 'Support', value: 'Community' },\r\n                        ].map((item) => (\r\n                            <div key={item.feature} className=\"flex items-center justify-between py-3 border-b border-slate-100 dark:border-slate-800 last:border-0\">\r\n                                <span className=\"font-medium text-slate-900 dark:text-white\">{item.feature}</span>\r\n                                <span className=\"text-slate-600 dark:text-slate-400\">{item.value}</span>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n            <BillingUpgradeModal isOpen={showUpgradeModal} onClose={() => setShowUpgradeModal(false)} />\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\pages\\Dashboard\\DashboardDocuments.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'deleteDocument' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":32,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":38,"suggestions":[{"messageId":"removeVar","data":{"varName":"deleteDocument"},"fix":{"range":[925,941],"text":""},"desc":"Remove unused variable 'deleteDocument'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadDocuments'. Either include it or remove the dependency array.","line":59,"column":8,"nodeType":"ArrayExpression","endLine":59,"endColumn":17,"suggestions":[{"desc":"Update the dependencies array to be: [filters, loadDocuments]","fix":{"range":[2139,2148],"text":"[filters, loadDocuments]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Link } from 'react-router-dom';\r\nimport { Card, CardContent } from '../../components/ui/Card';\r\nimport { Button } from '../../components/ui/Button';\r\nimport {\r\n    FileText,\r\n    Clock,\r\n    MoreVertical,\r\n    Search,\r\n    Filter,\r\n    Plus,\r\n    ArrowUpRight,\r\n    CheckCircle2,\r\n    AlertCircle,\r\n    Grid3x3,\r\n    List,\r\n    SortAsc,\r\n    Loader2,\r\n    Trash2,\r\n    BarChart3,\r\n    ChevronDown,\r\n    X,\r\n    Share2,\r\n    Lock\r\n} from 'lucide-react';\r\nimport { useState, useEffect } from 'react';\r\nimport { useToast } from '../../context/ToastContext';\r\nimport { useTheme } from '../../context/ThemeContext';\r\nimport { cn } from '../../lib/utils';\r\nimport { ContentIntakeModal } from '../../components/modals/ContentIntakeModal';\r\nimport { IntakeModal } from '../../components/modals/IntakeModal';\r\nimport { TemplateSelectionModal } from '../../components/modals/TemplateSelectionModal.jsx';\r\nimport { getDocuments, deleteDocument, permanentlyDeleteDocument } from '../../services/documentsService';\r\n\r\nexport default function DashboardDocuments() {\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [showContentModal, setShowContentModal] = useState(false);\r\n    const [showIntakeModal, setShowIntakeModal] = useState(false);\r\n    const [showTemplateSelectionModal, setShowTemplateSelectionModal] = useState(false);\r\n    const [intakeContent, setIntakeContent] = useState(null);\r\n    const [viewMode, setViewMode] = useState('grid');\r\n    const [sortBy, setSortBy] = useState('recent');\r\n    const [documents, setDocuments] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [activeMenu, setActiveMenu] = useState(null);\r\n    const [deleteConfirmDoc, setDeleteConfirmDoc] = useState(null);\r\n    const [showFilterPopover, setShowFilterPopover] = useState(false);\r\n    const [filters, setFilters] = useState({\r\n        status: '',\r\n        academicLevel: '',\r\n        type: 'all'\r\n    });\r\n    const { addToast } = useToast();\r\n    const { theme } = useTheme();\r\n    const isDark = theme === 'dark';\r\n\r\n    // Load documents\r\n    useEffect(() => {\r\n        loadDocuments();\r\n    }, [filters]);\r\n\r\n    const loadDocuments = async () => {\r\n        setIsLoading(true);\r\n        try {\r\n            const docs = await getDocuments(filters);\r\n            setDocuments(docs);\r\n        } catch (error) {\r\n            console.error('Error loading documents:', error);\r\n            addToast('Failed to load documents', 'error');\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleContentContinue = (content) => {\r\n        setIntakeContent(content);\r\n        setShowContentModal(false);\r\n        setShowIntakeModal(true);\r\n    };\r\n\r\n    const handleTemplateSelection = (selectedTemplateContent) => {\r\n        setShowTemplateSelectionModal(false);\r\n        if (selectedTemplateContent) {\r\n            // Format template content for IntakeModal\r\n            const formattedContent = {\r\n                content: selectedTemplateContent,\r\n                // Add basic HTML formatting for the editor\r\n                contentHtml: `<div style=\"font-size: 12pt;\">${selectedTemplateContent.split('\\n').map(line => line.trim() ? `<p>${line}</p>` : '<p><br></p>').join('')}</div>`,\r\n                inputType: 'template'\r\n            };\r\n            setIntakeContent(formattedContent);\r\n            setShowIntakeModal(true);\r\n        } else {\r\n            // User chose \"Start from Scratch\" (default way)\r\n            setIntakeContent(null);\r\n            setShowContentModal(true);\r\n        }\r\n    };\r\n\r\n    const handleIntakeClose = () => {\r\n        setShowIntakeModal(false);\r\n        setIntakeContent(null);\r\n        loadDocuments();\r\n    };\r\n\r\n    const handleIntakeBack = () => {\r\n        setShowIntakeModal(false);\r\n        setShowContentModal(true);\r\n    };\r\n\r\n    const handleDelete = async () => {\r\n        if (!deleteConfirmDoc) return;\r\n\r\n        try {\r\n            await permanentlyDeleteDocument(deleteConfirmDoc.id);\r\n            addToast(`\"${deleteConfirmDoc.title}\" deleted permanently`, 'success');\r\n            loadDocuments();\r\n        } catch (error) {\r\n            console.error('Error deleting document:', error);\r\n            addToast(error.message || 'Failed to delete document', 'error');\r\n        } finally {\r\n            setDeleteConfirmDoc(null);\r\n            setActiveMenu(null);\r\n        }\r\n    };\r\n\r\n    const formatDate = (dateString) => {\r\n        const date = new Date(dateString);\r\n        const now = new Date();\r\n        const diffMs = now - date;\r\n        const diffMins = Math.floor(diffMs / 60000);\r\n        const diffHours = Math.floor(diffMs / 3600000);\r\n        const diffDays = Math.floor(diffMs / 86400000);\r\n\r\n        if (diffMins < 1) return 'Just now';\r\n        if (diffMins < 60) return `${diffMins}m ago`;\r\n        if (diffHours < 24) return `${diffHours}h ago`;\r\n        if (diffDays < 7) return `${diffDays}d ago`;\r\n        return date.toLocaleDateString();\r\n    };\r\n\r\n    // Filter documents\r\n    const filteredDocs = documents.filter(\r\n        (doc) =>\r\n            doc.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n            (doc.content && doc.content.toLowerCase().includes(searchTerm.toLowerCase()))\r\n    );\r\n\r\n    // Sort documents\r\n    const sortedDocs = [...filteredDocs].sort((a, b) => {\r\n        if (sortBy === 'recent') {\r\n            return new Date(b.updated_at) - new Date(a.updated_at);\r\n        } else if (sortBy === 'name') {\r\n            return a.title.localeCompare(b.title);\r\n        } else if (sortBy === 'status') {\r\n            return a.status.localeCompare(b.status);\r\n        }\r\n        return 0;\r\n    });\r\n\r\n    const clearFilters = () => {\r\n        setFilters({ status: '', academicLevel: '', type: 'all' });\r\n        setShowFilterPopover(false);\r\n    };\r\n\r\n    const activeFilterCount = Object.values(filters).filter(v => v !== '').length;\r\n\r\n    const getStatusBadge = (status) => {\r\n        switch (status) {\r\n            case 'upgraded':\r\n                return (\r\n                    <div className=\"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-green-50 border border-green-200\">\r\n                        <CheckCircle2 className=\"h-3 w-3 text-green-600\" />\r\n                        <span className=\"text-xs font-bold text-green-700 uppercase tracking-wide\">Upgraded</span>\r\n                    </div>\r\n                );\r\n            case 'diagnosed':\r\n                return (\r\n                    <div className=\"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-blue-50 border border-blue-200\">\r\n                        <BarChart3 className=\"h-3 w-3 text-blue-600\" />\r\n                        <span className=\"text-xs font-bold text-blue-700 uppercase tracking-wide\">Diagnosed</span>\r\n                    </div>\r\n                );\r\n            default:\r\n                return (\r\n                    <div className=\"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-amber-50 border border-amber-200\">\r\n                        <AlertCircle className=\"h-3 w-3 text-amber-600\" />\r\n                        <span className=\"text-xs font-bold text-amber-700 uppercase tracking-wide\">Draft</span>\r\n                    </div>\r\n                );\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Modals */}\r\n            <TemplateSelectionModal\r\n                isOpen={showTemplateSelectionModal}\r\n                onClose={() => setShowTemplateSelectionModal(false)}\r\n                onTemplateSelect={handleTemplateSelection}\r\n            />\r\n            <ContentIntakeModal\r\n                isOpen={showContentModal}\r\n                onClose={() => setShowContentModal(false)}\r\n                onContinue={handleContentContinue}\r\n            />\r\n            <IntakeModal\r\n                isOpen={showIntakeModal}\r\n                onClose={handleIntakeClose}\r\n                onBack={handleIntakeBack}\r\n                initialContent={intakeContent}\r\n            />\r\n\r\n            {/* Header */}\r\n            <div className=\"flex flex-col gap-4\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <div>\r\n                        <h1 className={cn(\r\n                            \"text-2xl md:text-3xl font-bold mb-2\",\r\n                            isDark ? \"text-white\" : \"text-slate-900\"\r\n                        )}>\r\n                            My Documents\r\n                        </h1>\r\n                        <p className={cn(\r\n                            \"text-sm\",\r\n                            isDark ? \"text-slate-400\" : \"text-slate-600\"\r\n                        )}>\r\n                            Manage and organize all your academic assignments in one place\r\n                        </p>\r\n                    </div>\r\n                    <Button\r\n                        onClick={() => setShowTemplateSelectionModal(true)}\r\n                        className=\"bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 border-none shadow-lg shadow-orange-500/20 text-white\"\r\n                    >\r\n                        <Plus className=\"mr-2 h-4 w-4\" /> New Document\r\n                    </Button>\r\n                </div>\r\n\r\n                {/* Search and Controls */}\r\n                <div className=\"flex flex-col sm:flex-row gap-3\">\r\n                    <div className=\"relative flex-1\">\r\n                        <Search className={cn(\r\n                            \"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4\",\r\n                            isDark ? \"text-slate-400\" : \"text-slate-400\"\r\n                        )} />\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Search documents by title or content...\"\r\n                            className={cn(\r\n                                \"w-full pl-10 pr-4 h-11 rounded-lg border text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all\",\r\n                                isDark\r\n                                    ? \"border-white/10 bg-white/5 text-white placeholder-slate-500\"\r\n                                    : \"border-slate-200 bg-white text-slate-900 placeholder-slate-400\"\r\n                            )}\r\n                            value={searchTerm}\r\n                            onChange={(e) => setSearchTerm(e.target.value)}\r\n                        />\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <div className=\"relative\">\r\n                            <select\r\n                                value={sortBy}\r\n                                onChange={(e) => setSortBy(e.target.value)}\r\n                                className={cn(\r\n                                    \"appearance-none pl-9 pr-4 h-11 rounded-lg border text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent cursor-pointer\",\r\n                                    isDark\r\n                                        ? \"border-white/10 bg-white/5 text-white\"\r\n                                        : \"border-slate-200 bg-white text-slate-900\"\r\n                                )}\r\n                            >\r\n                                <option value=\"recent\">Sort by Recent</option>\r\n                                <option value=\"name\">Sort by Name</option>\r\n                                <option value=\"status\">Sort by Status</option>\r\n                            </select>\r\n                            <SortAsc className={cn(\r\n                                \"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 pointer-events-none\",\r\n                                isDark ? \"text-slate-400\" : \"text-slate-400\"\r\n                            )} />\r\n                        </div>\r\n                        <div className=\"relative\">\r\n                            <Button\r\n                                variant=\"outline\"\r\n                                onClick={() => setShowFilterPopover(!showFilterPopover)}\r\n                                className={cn(\r\n                                    \"h-11 gap-2\",\r\n                                    isDark\r\n                                        ? activeFilterCount > 0\r\n                                            ? \"bg-orange-500/20 border-orange-500/30 text-orange-400\"\r\n                                            : \"border-white/10 bg-white/5 text-slate-200\"\r\n                                        : activeFilterCount > 0\r\n                                            ? \"bg-orange-50 border-orange-200 text-orange-600\"\r\n                                            : \"border-slate-200\"\r\n                                )}\r\n                            >\r\n                                <Filter className=\"h-4 w-4\" />\r\n                                <span className=\"hidden sm:inline\">Filter</span>\r\n                                {activeFilterCount > 0 && (\r\n                                    <span className={cn(\r\n                                        \"flex items-center justify-center text-white text-[10px] h-4 w-4 rounded-full\",\r\n                                        isDark ? \"bg-orange-500\" : \"bg-orange-600\"\r\n                                    )}>\r\n                                        {activeFilterCount}\r\n                                    </span>\r\n                                )}\r\n                            </Button>\r\n\r\n                            {showFilterPopover && (\r\n                                <>\r\n                                    <div className=\"fixed inset-0 z-40\" onClick={() => setShowFilterPopover(false)} />\r\n                                    <div className={cn(\r\n                                        \"absolute right-0 top-full mt-2 w-72 rounded-xl shadow-2xl border p-5 z-50 animate-in fade-in slide-in-from-top-2 duration-200\",\r\n                                        isDark\r\n                                            ? \"bg-slate-800 border-white/10\"\r\n                                            : \"bg-white border-slate-200\"\r\n                                    )}>\r\n                                        <div className=\"flex items-center justify-between mb-4\">\r\n                                            <h4 className={cn(\r\n                                                \"font-bold\",\r\n                                                isDark ? \"text-white\" : \"text-slate-900\"\r\n                                            )}>\r\n                                                Filter Documents\r\n                                            </h4>\r\n                                            {activeFilterCount > 0 && (\r\n                                                <button\r\n                                                    onClick={clearFilters}\r\n                                                    className={cn(\r\n                                                        \"text-xs font-medium transition-colors\",\r\n                                                        isDark\r\n                                                            ? \"text-orange-400 hover:text-orange-300\"\r\n                                                            : \"text-orange-600 hover:text-orange-700\"\r\n                                                    )}\r\n                                                >\r\n                                                    Clear all\r\n                                                </button>\r\n                                            )}\r\n                                        </div>\r\n\r\n                                        <div className=\"space-y-4\">\r\n                                            <div className=\"space-y-1.5\">\r\n                                                <label className={cn(\r\n                                                    \"text-xs font-semibold uppercase tracking-wider\",\r\n                                                    isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                                                )}>\r\n                                                    Status\r\n                                                </label>\r\n                                                <select\r\n                                                    value={filters.status}\r\n                                                    onChange={(e) => setFilters({ ...filters, status: e.target.value })}\r\n                                                    className={cn(\r\n                                                        \"w-full h-10 px-3 rounded-lg border text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 transition-all\",\r\n                                                        isDark\r\n                                                            ? \"border-white/10 bg-white/5 text-white\"\r\n                                                            : \"border-slate-200 bg-white text-slate-900\"\r\n                                                    )}\r\n                                                >\r\n                                                    <option value=\"\">All Statuses</option>\r\n                                                    <option value=\"draft\">Draft</option>\r\n                                                    <option value=\"diagnosed\">Diagnosed</option>\r\n                                                    <option value=\"upgraded\">Upgraded</option>\r\n                                                </select>\r\n                                            </div>\r\n\r\n                                            <div className=\"space-y-1.5\">\r\n                                                <label className={cn(\r\n                                                    \"text-xs font-semibold uppercase tracking-wider\",\r\n                                                    isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                                                )}>\r\n                                                    Academic Level\r\n                                                </label>\r\n                                                <select\r\n                                                    value={filters.academicLevel}\r\n                                                    onChange={(e) => setFilters({ ...filters, academicLevel: e.target.value })}\r\n                                                    className={cn(\r\n                                                        \"w-full h-10 px-3 rounded-lg border text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 transition-all\",\r\n                                                        isDark\r\n                                                            ? \"border-white/10 bg-white/5 text-white\"\r\n                                                            : \"border-slate-200 bg-white text-slate-900\"\r\n                                                    )}\r\n                                                >\r\n                                                    <option value=\"\">All Levels</option>\r\n                                                    <option value=\"High School\">High School</option>\r\n                                                    <option value=\"Undergraduate\">Undergraduate</option>\r\n                                                    <option value=\"Graduate\">Graduate</option>\r\n                                                    <option value=\"Doctoral\">Doctoral</option>\r\n                                                </select>\r\n                                            </div>\r\n\r\n                                            <div className=\"space-y-1.5\">\r\n                                                <label className={cn(\r\n                                                    \"text-xs font-semibold uppercase tracking-wider\",\r\n                                                    isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                                                )}>\r\n                                                    Workspace\r\n                                                </label>\r\n                                                <select\r\n                                                    value={filters.type}\r\n                                                    onChange={(e) => setFilters({ ...filters, type: e.target.value })}\r\n                                                    className={cn(\r\n                                                        \"w-full h-10 px-3 rounded-lg border text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 transition-all\",\r\n                                                        isDark\r\n                                                            ? \"border-white/10 bg-white/5 text-white\"\r\n                                                            : \"border-slate-200 bg-white text-slate-900\"\r\n                                                    )}\r\n                                                >\r\n                                                    <option value=\"all\">All Documents</option>\r\n                                                    <option value=\"owned\">Owned by me</option>\r\n                                                    <option value=\"shared\">Shared with me</option>\r\n                                                </select>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div className={cn(\r\n                                            \"mt-6 pt-4 border-t\",\r\n                                            isDark ? \"border-white/10\" : \"border-slate-100\"\r\n                                        )}>\r\n                                            <Button\r\n                                                className=\"w-full bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white shadow-md shadow-orange-500/20\"\r\n                                                onClick={() => setShowFilterPopover(false)}\r\n                                            >\r\n                                                Apply Filters\r\n                                            </Button>\r\n                                        </div>\r\n                                    </div>\r\n                                </>\r\n                            )}\r\n                        </div>\r\n                        <div className={cn(\r\n                            \"flex items-center border rounded-lg overflow-hidden h-11\",\r\n                            isDark ? \"border-white/10\" : \"border-slate-200\"\r\n                        )}>\r\n                            <button\r\n                                onClick={() => setViewMode('grid')}\r\n                                className={cn(\r\n                                    \"p-2.5 transition-colors\",\r\n                                    viewMode === 'grid'\r\n                                        ? isDark\r\n                                            ? 'bg-orange-500/20 text-orange-400'\r\n                                            : 'bg-orange-50 text-orange-600'\r\n                                        : isDark\r\n                                            ? 'bg-white/5 text-slate-400 hover:bg-white/10'\r\n                                            : 'bg-white text-slate-500 hover:bg-slate-50'\r\n                                )}\r\n                            >\r\n                                <Grid3x3 className=\"h-4 w-4\" />\r\n                            </button>\r\n                            <button\r\n                                onClick={() => setViewMode('list')}\r\n                                className={cn(\r\n                                    \"p-2.5 transition-colors border-l\",\r\n                                    isDark ? \"border-white/10\" : \"border-slate-200\",\r\n                                    viewMode === 'list'\r\n                                        ? isDark\r\n                                            ? 'bg-orange-500/20 text-orange-400'\r\n                                            : 'bg-orange-50 text-orange-600'\r\n                                        : isDark\r\n                                            ? 'bg-white/5 text-slate-400 hover:bg-white/10'\r\n                                            : 'bg-white text-slate-500 hover:bg-slate-50'\r\n                                )}\r\n                            >\r\n                                <List className=\"h-4 w-4\" />\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Documents Display */}\r\n            {isLoading ? (\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6\">\r\n                    {[1, 2, 3, 4, 5, 6].map((i) => (\r\n                        <Card key={i} className=\"h-48 animate-pulse bg-slate-100 border-slate-200\" />\r\n                    ))}\r\n                </div>\r\n            ) : sortedDocs.length > 0 ? (\r\n                viewMode === 'grid' ? (\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6\">\r\n                        {sortedDocs.map((doc) => (\r\n                            <Link\r\n                                to={`/dashboard/editor/${doc.id}`}\r\n                                key={doc.id}\r\n                                className=\"group block h-full\"\r\n                            >\r\n                                <Card className={cn(\r\n                                    \"h-full hover:shadow-lg transition-all duration-300\",\r\n                                    isDark\r\n                                        ? \"bg-white/5 border-white/10 hover:border-orange-500/30\"\r\n                                        : \"border-slate-200 hover:border-orange-300 bg-white\"\r\n                                )}>\r\n                                    <CardContent className=\"p-6 flex flex-col h-full\">\r\n                                        <div className=\"flex items-start justify-between mb-4\">\r\n                                            <div\r\n                                                className={`h-12 w-12 rounded-xl flex items-center justify-center flex-shrink-0 transition-colors ${doc.status === 'upgraded'\r\n                                                    ? 'bg-gradient-to-br from-indigo-100 to-indigo-50 text-indigo-600'\r\n                                                    : 'bg-slate-100 text-slate-500'\r\n                                                    }`}\r\n                                            >\r\n                                                <FileText className=\"h-6 w-6\" />\r\n                                            </div>\r\n                                            <div className=\"flex items-center gap-2\">\r\n                                                {getStatusBadge(doc.status)}\r\n                                                <div className=\"relative\">\r\n                                                    <button\r\n                                                        onClick={(e) => {\r\n                                                            e.preventDefault();\r\n                                                            e.stopPropagation();\r\n                                                            setActiveMenu(activeMenu === doc.id ? null : doc.id);\r\n                                                        }}\r\n                                                        className=\"p-1.5 rounded-lg text-slate-400 hover:text-slate-600 hover:bg-slate-100 transition-colors\"\r\n                                                    >\r\n                                                        <MoreVertical className=\"h-4 w-4\" />\r\n                                                    </button>\r\n                                                    {activeMenu === doc.id && (\r\n                                                        <>\r\n                                                            <div className=\"fixed inset-0 z-40\" onClick={(e) => { e.preventDefault(); setActiveMenu(null); }} />\r\n                                                            <div className=\"absolute right-0 top-full mt-1 w-40 bg-white rounded-lg shadow-xl border border-slate-200 py-1 z-50 animate-in fade-in slide-in-from-top-2 duration-150\">\r\n\r\n                                                                <button\r\n                                                                    onClick={(e) => { e.preventDefault(); e.stopPropagation(); setDeleteConfirmDoc(doc); }}\r\n                                                                    className=\"w-full px-3 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center gap-2 font-medium\"\r\n                                                                >\r\n                                                                    <Trash2 className=\"h-4 w-4\" />\r\n                                                                    Delete Document\r\n                                                                </button>\r\n                                                            </div>\r\n                                                        </>\r\n                                                    )}\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div className=\"flex-1 space-y-2 mb-4\">\r\n                                            <h3 className={cn(\r\n                                                \"text-base font-bold line-clamp-2 leading-snug transition-colors\",\r\n                                                isDark\r\n                                                    ? \"text-white group-hover:text-orange-400\"\r\n                                                    : \"text-slate-900 group-hover:text-orange-600\"\r\n                                            )}>\r\n                                                {doc.title}\r\n                                            </h3>\r\n                                            <p className={cn(\r\n                                                \"text-sm line-clamp-2 leading-relaxed\",\r\n                                                isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                                            )}>\r\n                                                {doc.content?.substring(0, 100) || 'No content yet...'}\r\n                                            </p>\r\n                                            <div className={cn(\r\n                                                \"flex items-center gap-3 text-xs pt-2\",\r\n                                                isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                                            )}>\r\n                                                <span className=\"flex items-center gap-1\">\r\n                                                    <Clock className=\"h-3.5 w-3.5\" />\r\n                                                    {formatDate(doc.updated_at)}\r\n                                                </span>\r\n                                                <span>â€¢</span>\r\n                                                <span>{doc.word_count?.toLocaleString() || 0} words</span>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div className={cn(\r\n                                            \"pt-4 border-t flex items-center justify-between\",\r\n                                            isDark ? \"border-white/10\" : \"border-slate-100\"\r\n                                        )}>\r\n                                            <span className={cn(\r\n                                                \"text-xs font-medium transition-colors\",\r\n                                                isDark\r\n                                                    ? \"text-slate-400 group-hover:text-orange-400\"\r\n                                                    : \"text-slate-500 group-hover:text-orange-600\"\r\n                                            )}>\r\n                                                Open Document\r\n                                            </span>\r\n                                            <ArrowUpRight className={cn(\r\n                                                \"h-4 w-4 transition-all\",\r\n                                                isDark\r\n                                                    ? \"text-slate-500 group-hover:text-orange-400 group-hover:translate-x-0.5 group-hover:-translate-y-0.5\"\r\n                                                    : \"text-slate-300 group-hover:text-orange-500 group-hover:translate-x-0.5 group-hover:-translate-y-0.5\"\r\n                                            )} />\r\n                                        </div>\r\n                                    </CardContent>\r\n                                </Card>\r\n                            </Link>\r\n                        ))}\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"space-y-3\">\r\n                        {sortedDocs.map((doc) => (\r\n                            <Link to={`/dashboard/editor/${doc.id}`} key={doc.id} className=\"block group\">\r\n                                <Card className=\"hover:border-indigo-300 transition-all duration-200 border-slate-200 hover:shadow-md bg-white\">\r\n                                    <CardContent className=\"p-5 flex items-center gap-5\">\r\n                                        <div\r\n                                            className={`h-14 w-14 rounded-xl flex items-center justify-center flex-shrink-0 transition-colors ${doc.status === 'upgraded'\r\n                                                ? 'bg-gradient-to-br from-indigo-100 to-indigo-50 text-indigo-600'\r\n                                                : 'bg-slate-100 text-slate-500'\r\n                                                }`}\r\n                                        >\r\n                                            <FileText className=\"h-7 w-7\" />\r\n                                        </div>\r\n\r\n                                        <div className=\"flex-1 min-w-0 grid md:grid-cols-4 gap-4 items-center\">\r\n                                            <div className=\"md:col-span-2\">\r\n                                                <div className=\"flex items-center gap-2 mb-1\">\r\n                                                    <h3 className=\"text-base font-semibold text-slate-900 truncate group-hover:text-indigo-600 transition-colors\">\r\n                                                        {doc.title}\r\n                                                    </h3>\r\n                                                    {getStatusBadge(doc.status)}\r\n                                                </div>\r\n                                                <p className=\"text-sm text-slate-500 truncate\">\r\n                                                    {doc.content?.substring(0, 80) || 'No content yet...'}\r\n                                                </p>\r\n                                            </div>\r\n\r\n                                            <div className=\"hidden md:flex items-center gap-2 text-sm text-slate-500\">\r\n                                                <Clock className=\"h-4 w-4\" />\r\n                                                <span>{formatDate(doc.updated_at)}</span>\r\n                                                <span className=\"mx-1\">â€¢</span>\r\n                                                <span>{doc.word_count?.toLocaleString() || 0} words</span>\r\n                                            </div>\r\n\r\n                                            <div className=\"flex items-center justify-end gap-3\">\r\n                                                <Button\r\n                                                    size=\"sm\"\r\n                                                    variant=\"ghost\"\r\n                                                    className=\"text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50 h-9 text-xs\"\r\n                                                >\r\n                                                    Open\r\n                                                    <ArrowUpRight className=\"ml-1 h-3 w-3\" />\r\n                                                </Button>\r\n                                                <Button\r\n                                                    variant=\"ghost\"\r\n                                                    size=\"icon\"\r\n                                                    className=\"h-9 w-9 text-slate-400 hover:text-red-600 hover:bg-red-50\"\r\n                                                    onClick={(e) => {\r\n                                                        e.preventDefault();\r\n                                                        e.stopPropagation();\r\n                                                        setDeleteConfirmDoc(doc);\r\n                                                    }}\r\n                                                    title=\"Delete Document\"\r\n                                                >\r\n                                                    <Trash2 className=\"h-4 w-4\" />\r\n                                                </Button>\r\n                                            </div>\r\n                                        </div>\r\n                                    </CardContent>\r\n                                </Card>\r\n                            </Link>\r\n                        ))}\r\n                    </div>\r\n                )\r\n            ) : (\r\n                <Card className={cn(\r\n                    \"border-dashed\",\r\n                    isDark\r\n                        ? \"border-white/10 bg-white/5\"\r\n                        : \"border-slate-200 bg-slate-50/50\"\r\n                )}>\r\n                    <CardContent className=\"p-12 text-center\">\r\n                        <div className={cn(\r\n                            \"mx-auto h-16 w-16 rounded-full flex items-center justify-center mb-4\",\r\n                            isDark ? \"bg-white/10 text-slate-400\" : \"bg-slate-100 text-slate-400\"\r\n                        )}>\r\n                            {searchTerm ? <Search className=\"h-8 w-8\" /> : <FileText className=\"h-8 w-8\" />}\r\n                        </div>\r\n                        <h3 className={cn(\r\n                            \"text-lg font-semibold mb-2\",\r\n                            isDark ? \"text-white\" : \"text-slate-900\"\r\n                        )}>\r\n                            {searchTerm ? 'No documents found' : 'No documents yet'}\r\n                        </h3>\r\n                        <p className={cn(\r\n                            \"text-sm mb-6 max-w-md mx-auto\",\r\n                            isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                        )}>\r\n                            {searchTerm\r\n                                ? 'Try adjusting your search terms or create a new document.'\r\n                                : 'Get started by creating your first academic assignment upgrade.'}\r\n                        </p>\r\n                        <div className=\"flex flex-col sm:flex-row gap-3 justify-center\">\r\n                            {searchTerm && (\r\n                                <Button variant=\"outline\" onClick={() => setSearchTerm('')}>\r\n                                    Clear Search\r\n                                </Button>\r\n                            )}\r\n                            <Button\r\n                                onClick={() => setShowContentModal(true)}\r\n                                className=\"bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 border-none text-white\"\r\n                            >\r\n                                <Plus className=\"mr-2 h-4 w-4\" /> Create New Document\r\n                            </Button>\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n            )}\r\n\r\n\r\n            {/* Delete Confirmation Modal */}\r\n            {deleteConfirmDoc && (\r\n                <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm\">\r\n                    <div className={cn(\r\n                        \"rounded-xl shadow-2xl w-full max-w-md p-6 animate-in zoom-in-95 duration-150\",\r\n                        isDark ? \"bg-slate-800 border border-white/10\" : \"bg-white\"\r\n                    )}>\r\n                        <div className=\"flex items-start gap-4 mb-6\">\r\n                            <div className={cn(\r\n                                \"w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0\",\r\n                                isDark ? \"bg-red-500/20\" : \"bg-red-100\"\r\n                            )}>\r\n                                <Trash2 className={cn(\r\n                                    \"h-6 w-6\",\r\n                                    isDark ? \"text-red-400\" : \"text-red-600\"\r\n                                )} />\r\n                            </div>\r\n                            <div>\r\n                                <h3 className={cn(\r\n                                    \"text-lg font-bold\",\r\n                                    isDark ? \"text-white\" : \"text-slate-900\"\r\n                                )}>\r\n                                    Delete Permanently?\r\n                                </h3>\r\n                                <p className={cn(\r\n                                    \"text-sm mt-1\",\r\n                                    isDark ? \"text-slate-400\" : \"text-slate-600\"\r\n                                )}>\r\n                                    Are you sure you want to delete \"{deleteConfirmDoc.title}\"? This action cannot be undone.\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"flex justify-end gap-3\">\r\n                            <Button variant=\"ghost\" onClick={() => setDeleteConfirmDoc(null)}>\r\n                                Cancel\r\n                            </Button>\r\n                            <Button\r\n                                onClick={handleDelete}\r\n                                className=\"bg-red-600 hover:bg-red-700 text-white\"\r\n                            >\r\n                                Delete Forever\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\pages\\Dashboard\\DashboardHome.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":463,"column":76,"nodeType":"Identifier","messageId":"unusedVar","endLine":463,"endColumn":81,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[22810,22817],"text":""},"desc":"Remove unused variable 'index'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Link } from 'react-router-dom';\r\nimport { Card, CardContent } from '../../components/ui/Card';\r\nimport { Button } from '../../components/ui/Button';\r\nimport {\r\n    FileText,\r\n    TrendingUp,\r\n    Clock,\r\n    AlertCircle,\r\n    Plus,\r\n    ChevronRight,\r\n    ShieldCheck,\r\n    Sparkles,\r\n    ArrowRight,\r\n    Zap,\r\n    CheckCircle2,\r\n    BarChart3,\r\n    Activity,\r\n    Target,\r\n    Award,\r\n    Rocket,\r\n    BookOpen,\r\n    Lightbulb,\r\n    TrendingDown,\r\n    Crown,\r\n    Gauge,\r\n    Flame,\r\n} from 'lucide-react';\r\nimport { useState, useEffect } from 'react';\r\nimport { ContentIntakeModal } from '../../components/modals/ContentIntakeModal';\r\nimport { IntakeModal } from '../../components/modals/IntakeModal';\r\nimport { getDocuments } from '../../services/documentsService';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport { useTheme } from '../../context/ThemeContext';\r\nimport { cn } from '../../lib/utils';\r\nimport { TemplateSelectionModal } from '../../components/modals/TemplateSelectionModal.jsx';\r\n\r\nexport default function DashboardHome() {\r\n    const { user, profile } = useAuth();\r\n    const { theme } = useTheme();\r\n    const isDark = theme === 'dark';\r\n    const [showContentModal, setShowContentModal] = useState(false);\r\n    const [showTemplateSelectionModal, setShowTemplateSelectionModal] = useState(false);\r\n    const [showIntakeModal, setShowIntakeModal] = useState(false);\r\n    const [intakeContent, setIntakeContent] = useState(null);\r\n    const [documents, setDocuments] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [stats, setStats] = useState({\r\n        totalDocuments: 0,\r\n        totalWords: 0,\r\n        upgradedCount: 0,\r\n        recentActivity: []\r\n    });\r\n\r\n    // Load recent documents\r\n    useEffect(() => {\r\n        loadDocuments();\r\n    }, []);\r\n\r\n    const loadDocuments = async () => {\r\n        try {\r\n            const docs = await getDocuments({ limit: 6 });\r\n            setDocuments(docs);\r\n\r\n            // Calculate stats\r\n            const allDocs = await getDocuments();\r\n            const totalWords = allDocs.reduce((sum, doc) => sum + (doc.word_count || 0), 0);\r\n            const upgradedCount = allDocs.filter(doc => doc.status === 'upgraded').length;\r\n\r\n            // Get recent activity (last 5 documents)\r\n            const recentActivity = allDocs\r\n                .sort((a, b) => new Date(b.updated_at) - new Date(a.updated_at))\r\n                .slice(0, 5);\r\n\r\n            setStats({\r\n                totalDocuments: allDocs.length,\r\n                totalWords,\r\n                upgradedCount,\r\n                recentActivity\r\n            });\r\n        } catch (error) {\r\n            console.error('Error loading documents:', error);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleContentContinue = (content) => {\r\n        setIntakeContent(content);\r\n        setShowContentModal(false);\r\n        setShowIntakeModal(true);\r\n    };\r\n\r\n    const handleIntakeClose = () => {\r\n        setShowIntakeModal(false);\r\n        setIntakeContent(null);\r\n        // Reload documents after creating new one\r\n        loadDocuments();\r\n    };\r\n\r\n    const handleIntakeBack = () => {\r\n        setShowIntakeModal(false);\r\n        setShowContentModal(true);\r\n    };\r\n\r\n    const handleTemplateSelection = (selectedTemplateContent) => {\r\n        setShowTemplateSelectionModal(false);\r\n        if (selectedTemplateContent) {\r\n            // Format template content for IntakeModal\r\n            const formattedContent = {\r\n                content: selectedTemplateContent,\r\n                contentHtml: `<div style=\"font-size: 12pt;\">${selectedTemplateContent.split('\\n').map(l => l.trim() ? `<p>${l}</p>` : '<p><br></p>').join('')}</div>`,\r\n                inputType: 'template'\r\n            };\r\n            setIntakeContent(formattedContent);\r\n            setShowIntakeModal(true); // Skip ContentIntakeModal\r\n        } else {\r\n            setIntakeContent(null); // Start with blank document\r\n            setShowContentModal(true); // Go to default workflow\r\n        }\r\n    };\r\n\r\n    const formatDate = (dateString) => {\r\n        const date = new Date(dateString);\r\n        const now = new Date();\r\n        const diffMs = now - date;\r\n        const diffMins = Math.floor(diffMs / 60000);\r\n        const diffHours = Math.floor(diffMs / 3600000);\r\n        const diffDays = Math.floor(diffMs / 86400000);\r\n\r\n        if (diffMins < 1) return 'Just now';\r\n        if (diffMins < 60) return `${diffMins}m ago`;\r\n        if (diffHours < 24) return `${diffHours}h ago`;\r\n        if (diffDays < 7) return `${diffDays}d ago`;\r\n        return date.toLocaleDateString();\r\n    };\r\n\r\n    // Get user's display name\r\n    const getUserDisplayName = () => {\r\n        if (profile?.full_name) {\r\n            return profile.full_name.split(' ')[0]; // First name only\r\n        }\r\n        if (user?.user_metadata?.full_name) {\r\n            return user.user_metadata.full_name.split(' ')[0]; // First name only\r\n        }\r\n        if (user?.email) {\r\n            return user.email.split('@')[0]; // Username from email\r\n        }\r\n        return 'there';\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-8\">\r\n            {/* Modals */}\r\n            <ContentIntakeModal\r\n                isOpen={showContentModal}\r\n                onClose={() => setShowContentModal(false)}\r\n                onContinue={handleContentContinue}\r\n            />\r\n            <IntakeModal\r\n                isOpen={showIntakeModal}\r\n                onClose={handleIntakeClose}\r\n                onBack={handleIntakeBack}\r\n                initialContent={intakeContent}\r\n            />\r\n\r\n            <TemplateSelectionModal\r\n                isOpen={showTemplateSelectionModal}\r\n                onClose={() => setShowTemplateSelectionModal(false)}\r\n                onTemplateSelect={handleTemplateSelection}\r\n            />\r\n\r\n            {/* Welcome Message with Quick Stats */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                {/* Welcome Card */}\r\n                <div className={cn(\r\n                    \"lg:col-span-2 rounded-2xl border p-8 backdrop-blur-xl relative overflow-hidden group transition-all duration-300\",\r\n                    isDark\r\n                        ? \"bg-white/5 border-white/10\"\r\n                        : \"bg-white border-slate-200 shadow-sm hover:shadow-md\"\r\n                )}>\r\n                    {/* Decorative Background Elements */}\r\n                    <div className=\"absolute -top-24 -right-24 w-48 h-48 bg-orange-500/10 blur-3xl rounded-full group-hover:bg-orange-500/20 transition-colors duration-700\" />\r\n                    <div className=\"absolute -bottom-24 -left-24 w-48 h-48 bg-blue-500/10 blur-3xl rounded-full group-hover:bg-blue-500/20 transition-colors duration-700\" />\r\n\r\n                    <div className=\"relative z-10\">\r\n                        <div className=\"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-orange-500/10 text-orange-600 dark:text-orange-400 text-xs font-bold uppercase tracking-wider mb-4\">\r\n                            <Sparkles className=\"h-3 w-3\" />\r\n                            Welcome Back\r\n                        </div>\r\n                        <h1 className={cn(\r\n                            \"text-3xl md:text-5xl font-black mb-4 tracking-tight\",\r\n                            isDark ? \"text-white\" : \"text-slate-900\"\r\n                        )}>\r\n                            Good {new Date().getHours() < 12 ? 'morning' : new Date().getHours() < 18 ? 'afternoon' : 'evening'}, <span className=\"bg-gradient-to-r from-orange-500 to-red-500 bg-clip-text text-transparent\">{getUserDisplayName()}!</span>\r\n                        </h1>\r\n                        <p className={cn(\r\n                            \"text-lg mb-8 leading-relaxed max-w-2xl\",\r\n                            isDark ? \"text-slate-400\" : \"text-slate-600\"\r\n                        )}>\r\n                            Ready to transform your academic journey? Create a new document or pick up where you left off.\r\n                        </p>\r\n\r\n                        {/* Quick Stats Row */}\r\n                        <div className=\"flex flex-wrap gap-4 mt-4\">\r\n                            <div className={cn(\r\n                                \"flex items-center gap-2 px-4 py-2 rounded-xl transition-all\",\r\n                                isDark ? \"bg-white/5 hover:bg-white/10\" : \"bg-slate-50 hover:bg-slate-100\"\r\n                            )}>\r\n                                <FileText className={cn(\r\n                                    \"h-4 w-4\",\r\n                                    isDark ? \"text-orange-400\" : \"text-orange-600\"\r\n                                )} />\r\n                                <span className={cn(\r\n                                    \"text-sm font-semibold\",\r\n                                    isDark ? \"text-white\" : \"text-slate-900\"\r\n                                )}>\r\n                                    {stats.totalDocuments} {stats.totalDocuments === 1 ? 'Document' : 'Documents'}\r\n                                </span>\r\n                            </div>\r\n                            <div className={cn(\r\n                                \"flex items-center gap-2 px-4 py-2 rounded-xl transition-all\",\r\n                                isDark ? \"bg-white/5 hover:bg-white/10\" : \"bg-slate-50 hover:bg-slate-100\"\r\n                            )}>\r\n                                <BookOpen className={cn(\r\n                                    \"h-4 w-4\",\r\n                                    isDark ? \"text-blue-400\" : \"text-blue-600\"\r\n                                )} />\r\n                                <span className={cn(\r\n                                    \"text-sm font-semibold\",\r\n                                    isDark ? \"text-white\" : \"text-slate-900\"\r\n                                )}>\r\n                                    {stats.totalWords.toLocaleString()} words\r\n                                </span>\r\n                            </div>\r\n                            <div className=\"flex-1\" />\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <Button\r\n                                    size=\"lg\"\r\n                                    onClick={() => setShowTemplateSelectionModal(true)}\r\n                                    className=\"bg-indigo-600 hover:bg-indigo-700 text-white border-none shadow-lg shadow-indigo-500/20 px-8 rounded-xl h-12\"\r\n                                >\r\n                                    <Plus className=\"h-5 w-5 mr-2\" />\r\n                                    New Document\r\n                                </Button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Usage Progress Card */}\r\n                {/* ... (no changes needed here) ... */}\r\n            </div>\r\n\r\n            {/* Compact Hero Section */}\r\n            <div className={cn(\r\n                \"rounded-xl border p-4 md:p-5 backdrop-blur-xl\",\r\n                isDark\r\n                    ? \"bg-white/5 border-white/10\"\r\n                    : \"bg-gradient-to-r from-indigo-50/50 to-orange-50/30 border-indigo-100/50\"\r\n            )}>\r\n                <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\r\n                    {/* ... (no changes) ... */}\r\n                    <div className=\"flex-1 min-w-0\">\r\n                        {/* ... (no changes) ... */}\r\n                    </div>\r\n                    <div className=\"flex flex-col sm:flex-row gap-2 flex-shrink-0\">\r\n                        <Button\r\n                            onClick={() => setShowTemplateSelectionModal(true)}\r\n                            className=\"shadow-lg shadow-indigo-500/20 bg-indigo-600 hover:bg-indigo-700 border-none text-white text-sm px-4 py-2 h-auto whitespace-nowrap\"\r\n                        >\r\n                            <Plus className=\"mr-1.5 h-4 w-4\" /> New Assignment\r\n                        </Button>\r\n                        <Link to=\"/dashboard/documents\">\r\n                            <Button\r\n                                variant=\"outline\"\r\n                                className={cn(\r\n                                    \"text-sm px-4 py-2 h-auto whitespace-nowrap\",\r\n                                    isDark\r\n                                        ? \"border-white/20 bg-white/5 text-white hover:bg-white/10\"\r\n                                        : \"border-slate-300 hover:bg-slate-50\"\r\n                                )}\r\n                            >\r\n                                View All\r\n                                <ChevronRight className=\"ml-1.5 h-3.5 w-3.5\" />\r\n                            </Button>\r\n                        </Link>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Quick Actions & Recent Activity */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                {/* Quick Actions */}\r\n                <Card className={cn(\r\n                    \"lg:col-span-1 hover:shadow-lg transition-all duration-300\",\r\n                    isDark\r\n                        ? \"bg-white/5 border-white/10\"\r\n                        : \"border-slate-200 bg-gradient-to-br from-white via-purple-50/30 to-white\"\r\n                )}>\r\n                    <CardContent className=\"p-6\">\r\n                        <div className=\"flex items-center gap-2 mb-4\">\r\n                            <Zap className={cn(\r\n                                \"h-5 w-5\",\r\n                                isDark ? \"text-purple-400\" : \"text-purple-600\"\r\n                            )} />\r\n                            <h3 className={cn(\r\n                                \"text-lg font-bold\",\r\n                                isDark ? \"text-white\" : \"text-slate-900\"\r\n                            )}>\r\n                                Quick Actions\r\n                            </h3>\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                            <button\r\n                                onClick={() => setShowTemplateSelectionModal(true)}\r\n                                className={cn(\r\n                                    \"w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all hover:scale-[1.02]\",\r\n                                    isDark\r\n                                        ? \"bg-white/5 hover:bg-white/10 text-white border border-white/10\"\r\n                                        : \"bg-white hover:bg-purple-50 text-slate-900 border border-slate-200 shadow-sm\"\r\n                                )}\r\n                            >\r\n                                <div className={cn(\r\n                                    \"h-10 w-10 rounded-lg flex items-center justify-center\",\r\n                                    isDark ? \"bg-orange-500/20\" : \"bg-orange-100\"\r\n                                )}>\r\n                                    <Plus className={cn(\r\n                                        \"h-5 w-5\",\r\n                                        isDark ? \"text-orange-400\" : \"text-orange-600\"\r\n                                    )} />\r\n                                </div>\r\n                                <div className=\"text-left flex-1\">\r\n                                    <p className={cn(\r\n                                        \"text-sm font-semibold\",\r\n                                        isDark ? \"text-white\" : \"text-slate-900\"\r\n                                    )}>\r\n                                        New Document\r\n                                    </p>\r\n                                    <p className={cn(\r\n                                        \"text-xs\",\r\n                                        isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                                    )}>\r\n                                        Start a new assignment\r\n                                    </p>\r\n                                </div>\r\n                            </button>\r\n                            <Link\r\n                                to=\"/dashboard/documents\"\r\n                                className={cn(\r\n                                    \"w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all hover:scale-[1.02]\",\r\n                                    isDark\r\n                                        ? \"bg-white/5 hover:bg-white/10 text-white border border-white/10\"\r\n                                        : \"bg-white hover:bg-purple-50 text-slate-900 border border-slate-200 shadow-sm\"\r\n                                )}\r\n                            >\r\n                                <div className={cn(\r\n                                    \"h-10 w-10 rounded-lg flex items-center justify-center\",\r\n                                    isDark ? \"bg-blue-500/20\" : \"bg-blue-100\"\r\n                                )}>\r\n                                    <FileText className={cn(\r\n                                        \"h-5 w-5\",\r\n                                        isDark ? \"text-blue-400\" : \"text-blue-600\"\r\n                                    )} />\r\n                                </div>\r\n                                <div className=\"text-left flex-1\">\r\n                                    <p className={cn(\r\n                                        \"text-sm font-semibold\",\r\n                                        isDark ? \"text-white\" : \"text-slate-900\"\r\n                                    )}>\r\n                                        View All Documents\r\n                                    </p>\r\n                                    <p className={cn(\r\n                                        \"text-xs\",\r\n                                        isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                                    )}>\r\n                                        Manage your work\r\n                                    </p>\r\n                                </div>\r\n                            </Link>\r\n                            <Link\r\n                                to=\"/dashboard/settings\"\r\n                                className={cn(\r\n                                    \"w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all hover:scale-[1.02]\",\r\n                                    isDark\r\n                                        ? \"bg-white/5 hover:bg-white/10 text-white border border-white/10\"\r\n                                        : \"bg-white hover:bg-purple-50 text-slate-900 border border-slate-200 shadow-sm\"\r\n                                )}\r\n                            >\r\n                                <div className={cn(\r\n                                    \"h-10 w-10 rounded-lg flex items-center justify-center\",\r\n                                    isDark ? \"bg-indigo-500/20\" : \"bg-indigo-100\"\r\n                                )}>\r\n                                    <Sparkles className={cn(\r\n                                        \"h-5 w-5\",\r\n                                        isDark ? \"text-indigo-400\" : \"text-indigo-600\"\r\n                                    )} />\r\n                                </div>\r\n                                <div className=\"text-left flex-1\">\r\n                                    <p className={cn(\r\n                                        \"text-sm font-semibold\",\r\n                                        isDark ? \"text-white\" : \"text-slate-900\"\r\n                                    )}>\r\n                                        Settings\r\n                                    </p>\r\n                                    <p className={cn(\r\n                                        \"text-xs\",\r\n                                        isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                                    )}>\r\n                                        Customize preferences\r\n                                    </p>\r\n                                </div>\r\n                            </Link>\r\n\r\n                            {/* Quick Action removed */}\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                {/* Recent Activity */}\r\n                <Card className={cn(\r\n                    \"lg:col-span-2 hover:shadow-lg transition-all duration-300\",\r\n                    isDark\r\n                        ? \"bg-white/5 border-white/10\"\r\n                        : \"border-slate-200 bg-gradient-to-br from-white via-blue-50/30 to-white\"\r\n                )}>\r\n                    <CardContent className=\"p-6\">\r\n                        <div className=\"flex items-center justify-between mb-4\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <Activity className={cn(\r\n                                    \"h-5 w-5\",\r\n                                    isDark ? \"text-blue-400\" : \"text-blue-600\"\r\n                                )} />\r\n                                <h3 className={cn(\r\n                                    \"text-lg font-bold\",\r\n                                    isDark ? \"text-white\" : \"text-slate-900\"\r\n                                )}>\r\n                                    Recent Activity\r\n                                </h3>\r\n                            </div>\r\n                            <Link\r\n                                to=\"/dashboard/documents\"\r\n                                className={cn(\r\n                                    \"text-xs font-medium transition-colors\",\r\n                                    isDark\r\n                                        ? \"text-blue-400 hover:text-blue-300\"\r\n                                        : \"text-blue-600 hover:text-blue-700\"\r\n                                )}\r\n                            >\r\n                                View All\r\n                            </Link>\r\n                        </div>\r\n                        <div className=\"space-y-3\">\r\n                            {stats.recentActivity.length === 0 ? (\r\n                                <div className={cn(\r\n                                    \"text-center py-8\",\r\n                                    isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                                )}>\r\n                                    <FileText className=\"h-8 w-8 mx-auto mb-2 opacity-50\" />\r\n                                    <p className=\"text-sm\">No activity yet</p>\r\n                                    <p className=\"text-xs mt-1\">Create your first document to get started</p>\r\n                                </div>\r\n                            ) : (\r\n                                stats.recentActivity.slice(0, 4).map((doc, index) => (\r\n                                    <Link\r\n                                        key={doc.id}\r\n                                        to={`/dashboard/editor/${doc.id}`}\r\n                                        className={cn(\r\n                                            \"flex items-center gap-3 p-3 rounded-lg transition-all hover:scale-[1.01]\",\r\n                                            isDark\r\n                                                ? \"hover:bg-white/5 border border-white/5\"\r\n                                                : \"hover:bg-white border border-slate-100\"\r\n                                        )}\r\n                                    >\r\n                                        <div className={cn(\r\n                                            \"h-10 w-10 rounded-lg flex items-center justify-center flex-shrink-0\",\r\n                                            doc.status === 'upgraded'\r\n                                                ? isDark ? \"bg-green-500/20\" : \"bg-green-100\"\r\n                                                : isDark ? \"bg-slate-700\" : \"bg-slate-100\"\r\n                                        )}>\r\n                                            {doc.status === 'upgraded' ? (\r\n                                                <CheckCircle2 className={cn(\r\n                                                    \"h-5 w-5\",\r\n                                                    isDark ? \"text-green-400\" : \"text-green-600\"\r\n                                                )} />\r\n                                            ) : (\r\n                                                <FileText className={cn(\r\n                                                    \"h-5 w-5\",\r\n                                                    isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                                                )} />\r\n                                            )}\r\n                                        </div>\r\n                                        <div className=\"flex-1 min-w-0\">\r\n                                            <p className={cn(\r\n                                                \"text-sm font-semibold truncate\",\r\n                                                isDark ? \"text-white\" : \"text-slate-900\"\r\n                                            )}>\r\n                                                {doc.title}\r\n                                            </p>\r\n                                            <div className=\"flex items-center gap-2 mt-1\">\r\n                                                <span className={cn(\r\n                                                    \"text-xs\",\r\n                                                    isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                                                )}>\r\n                                                    {formatDate(doc.updated_at)}\r\n                                                </span>\r\n                                                <span className={cn(\r\n                                                    \"text-xs\",\r\n                                                    isDark ? \"text-slate-500\" : \"text-slate-400\"\r\n                                                )}>\r\n                                                    â€¢\r\n                                                </span>\r\n                                                <span className={cn(\r\n                                                    \"text-xs\",\r\n                                                    isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                                                )}>\r\n                                                    {doc.word_count?.toLocaleString() || 0} words\r\n                                                </span>\r\n                                            </div>\r\n                                        </div>\r\n                                        <ChevronRight className={cn(\r\n                                            \"h-4 w-4 flex-shrink-0\",\r\n                                            isDark ? \"text-slate-500\" : \"text-slate-400\"\r\n                                        )} />\r\n                                    </Link>\r\n                                ))\r\n                            )}\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n\r\n            {/* Achievement Badges */}\r\n            {stats.totalDocuments > 0 && (\r\n                <Card className={cn(\r\n                    \"hover:shadow-lg transition-all duration-300\",\r\n                    isDark\r\n                        ? \"bg-white/5 border-white/10\"\r\n                        : \"border-slate-200 bg-gradient-to-br from-white via-amber-50/30 to-white\"\r\n                )}>\r\n                    <CardContent className=\"p-6\">\r\n                        <div className=\"flex items-center gap-2 mb-4\">\r\n                            <Award className={cn(\r\n                                \"h-5 w-5\",\r\n                                isDark ? \"text-amber-400\" : \"text-amber-600\"\r\n                            )} />\r\n                            <h3 className={cn(\r\n                                \"text-lg font-bold\",\r\n                                isDark ? \"text-white\" : \"text-slate-900\"\r\n                            )}>\r\n                                Achievements\r\n                            </h3>\r\n                        </div>\r\n                        <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-4\">\r\n                            {stats.totalDocuments >= 1 && (\r\n                                <div className={cn(\r\n                                    \"flex flex-col items-center p-4 rounded-xl border\",\r\n                                    isDark\r\n                                        ? \"bg-white/5 border-white/10\"\r\n                                        : \"bg-white border-slate-200\"\r\n                                )}>\r\n                                    <div className={cn(\r\n                                        \"h-12 w-12 rounded-full flex items-center justify-center mb-2\",\r\n                                        isDark ? \"bg-green-500/20\" : \"bg-green-100\"\r\n                                    )}>\r\n                                        <Target className={cn(\r\n                                            \"h-6 w-6\",\r\n                                            isDark ? \"text-green-400\" : \"text-green-600\"\r\n                                        )} />\r\n                                    </div>\r\n                                    <p className={cn(\r\n                                        \"text-xs font-semibold text-center\",\r\n                                        isDark ? \"text-white\" : \"text-slate-900\"\r\n                                    )}>\r\n                                        First Document\r\n                                    </p>\r\n                                </div>\r\n                            )}\r\n                            {stats.totalDocuments >= 5 && (\r\n                                <div className={cn(\r\n                                    \"flex flex-col items-center p-4 rounded-xl border\",\r\n                                    isDark\r\n                                        ? \"bg-white/5 border-white/10\"\r\n                                        : \"bg-white border-slate-200\"\r\n                                )}>\r\n                                    <div className={cn(\r\n                                        \"h-12 w-12 rounded-full flex items-center justify-center mb-2\",\r\n                                        isDark ? \"bg-blue-500/20\" : \"bg-blue-100\"\r\n                                    )}>\r\n                                        <Flame className={cn(\r\n                                            \"h-6 w-6\",\r\n                                            isDark ? \"text-blue-400\" : \"text-blue-600\"\r\n                                        )} />\r\n                                    </div>\r\n                                    <p className={cn(\r\n                                        \"text-xs font-semibold text-center\",\r\n                                        isDark ? \"text-white\" : \"text-slate-900\"\r\n                                    )}>\r\n                                        Getting Started\r\n                                    </p>\r\n                                </div>\r\n                            )}\r\n                            {stats.upgradedCount >= 1 && (\r\n                                <div className={cn(\r\n                                    \"flex flex-col items-center p-4 rounded-xl border\",\r\n                                    isDark\r\n                                        ? \"bg-white/5 border-white/10\"\r\n                                        : \"bg-white border-slate-200\"\r\n                                )}>\r\n                                    <div className={cn(\r\n                                        \"h-12 w-12 rounded-full flex items-center justify-center mb-2\",\r\n                                        isDark ? \"bg-purple-500/20\" : \"bg-purple-100\"\r\n                                    )}>\r\n                                        <Rocket className={cn(\r\n                                            \"h-6 w-6\",\r\n                                            isDark ? \"text-purple-400\" : \"text-purple-600\"\r\n                                        )} />\r\n                                    </div>\r\n                                    <p className={cn(\r\n                                        \"text-xs font-semibold text-center\",\r\n                                        isDark ? \"text-white\" : \"text-slate-900\"\r\n                                    )}>\r\n                                        First Upgrade\r\n                                    </p>\r\n                                </div>\r\n                            )}\r\n                            {stats.totalWords >= 10000 && (\r\n                                <div className={cn(\r\n                                    \"flex flex-col items-center p-4 rounded-xl border\",\r\n                                    isDark\r\n                                        ? \"bg-white/5 border-white/10\"\r\n                                        : \"bg-white border-slate-200\"\r\n                                )}>\r\n                                    <div className={cn(\r\n                                        \"h-12 w-12 rounded-full flex items-center justify-center mb-2\",\r\n                                        isDark ? \"bg-orange-500/20\" : \"bg-orange-100\"\r\n                                    )}>\r\n                                        <Crown className={cn(\r\n                                            \"h-6 w-6\",\r\n                                            isDark ? \"text-orange-400\" : \"text-orange-600\"\r\n                                        )} />\r\n                                    </div>\r\n                                    <p className={cn(\r\n                                        \"text-xs font-semibold text-center\",\r\n                                        isDark ? \"text-white\" : \"text-slate-900\"\r\n                                    )}>\r\n                                        10K Words\r\n                                    </p>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n            )}\r\n\r\n            {/* Quick Stats */}\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4 md:gap-6\">\r\n                <Card className={cn(\r\n                    \"hover:shadow-lg transition-all duration-300\",\r\n                    isDark\r\n                        ? \"bg-white/5 border-white/10\"\r\n                        : \"border-indigo-100 bg-gradient-to-br from-white via-indigo-50/30 to-white\"\r\n                )}>\r\n                    <CardContent className=\"p-6\">\r\n                        <div className=\"flex items-start justify-between\">\r\n                            <div className=\"space-y-2\">\r\n                                <div className={cn(\r\n                                    \"flex items-center gap-2 text-sm font-medium\",\r\n                                    isDark ? \"text-slate-300\" : \"text-slate-600\"\r\n                                )}>\r\n                                    <FileText className=\"h-4 w-4 hidden md:block\" />\r\n                                    Structure Quality\r\n                                </div>\r\n                                <div className=\"flex items-baseline gap-2\">\r\n                                    <h3 className={cn(\r\n                                        \"text-3xl font-bold\",\r\n                                        isDark ? \"text-white\" : \"text-slate-900\"\r\n                                    )}>\r\n                                        B+\r\n                                    </h3>\r\n                                    <span className={cn(\r\n                                        \"text-xs\",\r\n                                        isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                                    )}>\r\n                                        Average\r\n                                    </span>\r\n                                </div>\r\n                                <p className={cn(\r\n                                    \"text-xs leading-relaxed\",\r\n                                    isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                                )}>\r\n                                    Your drafts show solid outline and paragraph structure\r\n                                </p>\r\n                            </div>\r\n                            <div className={cn(\r\n                                \"h-12 w-12 rounded-xl flex items-center justify-center flex-shrink-0 hidden md:flex\",\r\n                                isDark\r\n                                    ? \"bg-indigo-500/20\"\r\n                                    : \"bg-indigo-100\"\r\n                            )}>\r\n                                <BarChart3 className={cn(\r\n                                    \"h-6 w-6\",\r\n                                    isDark ? \"text-indigo-400\" : \"text-indigo-600\"\r\n                                )} />\r\n                            </div>\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                <Card className={cn(\r\n                    \"hover:shadow-lg transition-all duration-300\",\r\n                    isDark\r\n                        ? \"bg-white/5 border-white/10\"\r\n                        : \"border-green-100 bg-gradient-to-br from-white via-green-50/30 to-white\"\r\n                )}>\r\n                    <CardContent className=\"p-6\">\r\n                        <div className=\"flex items-start justify-between\">\r\n                            <div className=\"space-y-2\">\r\n                                <div className={cn(\r\n                                    \"flex items-center gap-2 text-sm font-medium\",\r\n                                    isDark ? \"text-slate-300\" : \"text-slate-600\"\r\n                                )}>\r\n                                    <TrendingUp className=\"h-4 w-4 hidden md:block\" />\r\n                                    Academic Tone\r\n                                </div>\r\n                                <div className=\"flex items-baseline gap-2\">\r\n                                    <h3 className={cn(\r\n                                        \"text-3xl font-bold\",\r\n                                        isDark ? \"text-white\" : \"text-slate-900\"\r\n                                    )}>\r\n                                        A-\r\n                                    </h3>\r\n                                    <span className={cn(\r\n                                        \"text-xs\",\r\n                                        isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                                    )}>\r\n                                        Strong\r\n                                    </span>\r\n                                </div>\r\n                                <p className={cn(\r\n                                    \"text-xs leading-relaxed\",\r\n                                    isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                                )}>\r\n                                    Consistently matches formal academic language standards\r\n                                </p>\r\n                            </div>\r\n                            <div className={cn(\r\n                                \"h-12 w-12 rounded-xl flex items-center justify-center flex-shrink-0 hidden md:flex\",\r\n                                isDark\r\n                                    ? \"bg-green-500/20\"\r\n                                    : \"bg-green-100\"\r\n                            )}>\r\n                                <Zap className={cn(\r\n                                    \"h-6 w-6\",\r\n                                    isDark ? \"text-green-400\" : \"text-green-600\"\r\n                                )} />\r\n                            </div>\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                <Card className={cn(\r\n                    \"hover:shadow-lg transition-all duration-300\",\r\n                    isDark\r\n                        ? \"bg-white/5 border-white/10\"\r\n                        : \"border-amber-100 bg-gradient-to-br from-white via-amber-50/30 to-white\"\r\n                )}>\r\n                    <CardContent className=\"p-6\">\r\n                        <div className=\"flex items-start justify-between\">\r\n                            <div className=\"space-y-2\">\r\n                                <div className={cn(\r\n                                    \"flex items-center gap-2 text-sm font-medium\",\r\n                                    isDark ? \"text-slate-300\" : \"text-slate-600\"\r\n                                )}>\r\n                                    <ShieldCheck className=\"h-4 w-4 hidden md:block\" />\r\n                                    Plagiarism Risk\r\n                                </div>\r\n                                <div className=\"flex items-baseline gap-2\">\r\n                                    <h3 className={cn(\r\n                                        \"text-3xl font-bold\",\r\n                                        isDark ? \"text-white\" : \"text-slate-900\"\r\n                                    )}>\r\n                                        Low\r\n                                    </h3>\r\n                                    <span className={cn(\r\n                                        \"text-xs\",\r\n                                        isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                                    )}>\r\n                                        Safe\r\n                                    </span>\r\n                                </div>\r\n                                <p className={cn(\r\n                                    \"text-xs leading-relaxed\",\r\n                                    isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                                )}>\r\n                                    Transformations prioritize originality and safe paraphrasing\r\n                                </p>\r\n                            </div>\r\n                            <div className={cn(\r\n                                \"h-12 w-12 rounded-xl flex items-center justify-center flex-shrink-0 hidden md:flex\",\r\n                                isDark\r\n                                    ? \"bg-amber-500/20\"\r\n                                    : \"bg-amber-100\"\r\n                            )}>\r\n                                <ShieldCheck className={cn(\r\n                                    \"h-6 w-6\",\r\n                                    isDark ? \"text-amber-400\" : \"text-amber-600\"\r\n                                )} />\r\n                            </div>\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n\r\n\r\n            {/* Productivity Insights & Tips */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n                {/* Productivity Insights */}\r\n                <Card className={cn(\r\n                    \"hover:shadow-lg transition-all duration-300\",\r\n                    isDark\r\n                        ? \"bg-white/5 border-white/10\"\r\n                        : \"border-slate-200 bg-gradient-to-br from-white via-emerald-50/30 to-white\"\r\n                )}>\r\n                    <CardContent className=\"p-6\">\r\n                        <div className=\"flex items-center gap-2 mb-4\">\r\n                            <TrendingUp className={cn(\r\n                                \"h-5 w-5\",\r\n                                isDark ? \"text-emerald-400\" : \"text-emerald-600\"\r\n                            )} />\r\n                            <h3 className={cn(\r\n                                \"text-lg font-bold\",\r\n                                isDark ? \"text-white\" : \"text-slate-900\"\r\n                            )}>\r\n                                Productivity Insights\r\n                            </h3>\r\n                        </div>\r\n                        <div className=\"space-y-4\">\r\n                            <div className={cn(\r\n                                \"p-4 rounded-lg border\",\r\n                                isDark ? \"bg-white/5 border-white/10\" : \"bg-white border-slate-100\"\r\n                            )}>\r\n                                <div className=\"flex items-center justify-between mb-2\">\r\n                                    <span className={cn(\r\n                                        \"text-sm font-medium\",\r\n                                        isDark ? \"text-slate-300\" : \"text-slate-700\"\r\n                                    )}>\r\n                                        Total Words Written\r\n                                    </span>\r\n                                    <span className={cn(\r\n                                        \"text-lg font-bold\",\r\n                                        isDark ? \"text-emerald-400\" : \"text-emerald-600\"\r\n                                    )}>\r\n                                        {stats.totalWords.toLocaleString()}\r\n                                    </span>\r\n                                </div>\r\n                                <div className={cn(\r\n                                    \"h-2 rounded-full overflow-hidden\",\r\n                                    isDark ? \"bg-white/10\" : \"bg-slate-200\"\r\n                                )}>\r\n                                    <div\r\n                                        className=\"h-full bg-emerald-500 rounded-full transition-all duration-500\"\r\n                                        style={{ width: `${Math.min((stats.totalWords / 50000) * 100, 100)}%` }}\r\n                                    />\r\n                                </div>\r\n                                <p className={cn(\r\n                                    \"text-xs mt-2\",\r\n                                    isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                                )}>\r\n                                    {stats.totalWords >= 50000\r\n                                        ? \"ðŸŽ‰ Amazing progress! You've written over 50K words!\"\r\n                                        : `${(50000 - stats.totalWords).toLocaleString()} words until 50K milestone`}\r\n                                </p>\r\n                            </div>\r\n                            <div className={cn(\r\n                                \"p-4 rounded-lg border\",\r\n                                isDark ? \"bg-white/5 border-white/10\" : \"bg-white border-slate-100\"\r\n                            )}>\r\n                                <div className=\"flex items-center justify-between mb-2\">\r\n                                    <span className={cn(\r\n                                        \"text-sm font-medium\",\r\n                                        isDark ? \"text-slate-300\" : \"text-slate-700\"\r\n                                    )}>\r\n                                        Upgrade Rate\r\n                                    </span>\r\n                                    <span className={cn(\r\n                                        \"text-lg font-bold\",\r\n                                        isDark ? \"text-blue-400\" : \"text-blue-600\"\r\n                                    )}>\r\n                                        {stats.totalDocuments > 0\r\n                                            ? `${Math.round((stats.upgradedCount / stats.totalDocuments) * 100)}%`\r\n                                            : '0%'}\r\n                                    </span>\r\n                                </div>\r\n                                <p className={cn(\r\n                                    \"text-xs\",\r\n                                    isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                                )}>\r\n                                    {stats.upgradedCount} of {stats.totalDocuments} documents upgraded\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                {/* Quick Tips */}\r\n                <Card className={cn(\r\n                    \"hover:shadow-lg transition-all duration-300\",\r\n                    isDark\r\n                        ? \"bg-white/5 border-white/10\"\r\n                        : \"border-slate-200 bg-gradient-to-br from-white via-amber-50/30 to-white\"\r\n                )}>\r\n                    <CardContent className=\"p-6\">\r\n                        <div className=\"flex items-center gap-2 mb-4\">\r\n                            <Lightbulb className={cn(\r\n                                \"h-5 w-5\",\r\n                                isDark ? \"text-amber-400\" : \"text-amber-600\"\r\n                            )} />\r\n                            <h3 className={cn(\r\n                                \"text-lg font-bold\",\r\n                                isDark ? \"text-white\" : \"text-slate-900\"\r\n                            )}>\r\n                                Quick Tips\r\n                            </h3>\r\n                        </div>\r\n                        <div className=\"space-y-3\">\r\n                            <div className={cn(\r\n                                \"p-3 rounded-lg border-l-4\",\r\n                                isDark\r\n                                    ? \"bg-white/5 border-orange-500/50\"\r\n                                    : \"bg-white border-orange-500\"\r\n                            )}>\r\n                                <p className={cn(\r\n                                    \"text-sm font-medium mb-1\",\r\n                                    isDark ? \"text-white\" : \"text-slate-900\"\r\n                                )}>\r\n                                    ðŸ’¡ Start with Diagnostics\r\n                                </p>\r\n                                <p className={cn(\r\n                                    \"text-xs\",\r\n                                    isDark ? \"text-slate-400\" : \"text-slate-600\"\r\n                                )}>\r\n                                    Run diagnostics first to identify areas for improvement before upgrading.\r\n                                </p>\r\n                            </div>\r\n                            <div className={cn(\r\n                                \"p-3 rounded-lg border-l-4\",\r\n                                isDark\r\n                                    ? \"bg-white/5 border-blue-500/50\"\r\n                                    : \"bg-white border-blue-500\"\r\n                            )}>\r\n                                <p className={cn(\r\n                                    \"text-sm font-medium mb-1\",\r\n                                    isDark ? \"text-white\" : \"text-slate-900\"\r\n                                )}>\r\n                                    ðŸ“ Review Before Submitting\r\n                                </p>\r\n                                <p className={cn(\r\n                                    \"text-xs\",\r\n                                    isDark ? \"text-slate-400\" : \"text-slate-600\"\r\n                                )}>\r\n                                    Always review the upgraded content and make final adjustments to match your voice.\r\n                                </p>\r\n                            </div>\r\n                            <div className={cn(\r\n                                \"p-3 rounded-lg border-l-4\",\r\n                                isDark\r\n                                    ? \"bg-white/5 border-green-500/50\"\r\n                                    : \"bg-white border-green-500\"\r\n                            )}>\r\n                                <p className={cn(\r\n                                    \"text-sm font-medium mb-1\",\r\n                                    isDark ? \"text-white\" : \"text-slate-900\"\r\n                                )}>\r\n                                    ðŸŽ¯ Use Citations\r\n                                </p>\r\n                                <p className={cn(\r\n                                    \"text-xs\",\r\n                                    isDark ? \"text-slate-400\" : \"text-slate-600\"\r\n                                )}>\r\n                                    Add citations to strengthen your arguments and avoid plagiarism concerns.\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n\r\n            {/* Recent Documents */}\r\n            <div>\r\n                <div className=\"flex items-center justify-between mb-6\">\r\n                    <div>\r\n                        <h2 className={cn(\r\n                            \"text-2xl font-bold mb-1\",\r\n                            isDark ? \"text-white\" : \"text-slate-900\"\r\n                        )}>\r\n                            Recent Documents\r\n                        </h2>\r\n                        <p className={cn(\r\n                            \"text-sm\",\r\n                            isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                        )}>\r\n                            Pick up where you left off, compare before/after, or refine one more time.\r\n                        </p>\r\n                    </div>\r\n                    <Link to=\"/dashboard/documents\">\r\n                        <Button\r\n                            variant=\"ghost\"\r\n                            className={cn(\r\n                                isDark\r\n                                    ? \"text-orange-400 hover:text-orange-300 hover:bg-white/10\"\r\n                                    : \"text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50\"\r\n                            )}\r\n                        >\r\n                            View All\r\n                            <ArrowRight className=\"ml-2 h-4 w-4\" />\r\n                        </Button>\r\n                    </Link>\r\n                </div>\r\n\r\n                {isLoading ? (\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6\">\r\n                        {[1, 2, 3].map((i) => (\r\n                            <Card key={i} className=\"h-48 animate-pulse bg-slate-100 border-slate-200\" />\r\n                        ))}\r\n                    </div>\r\n                ) : documents.length === 0 ? (\r\n                    <Card className={cn(\r\n                        \"border-dashed border-2\",\r\n                        isDark\r\n                            ? \"border-white/10 bg-white/5\"\r\n                            : \"border-slate-200 bg-slate-50/50\"\r\n                    )}>\r\n                        <CardContent className=\"p-12 text-center\">\r\n                            <div className={cn(\r\n                                \"mx-auto w-16 h-16 rounded-full flex items-center justify-center mb-4\",\r\n                                isDark ? \"bg-white/10\" : \"bg-slate-100\"\r\n                            )}>\r\n                                <FileText className={cn(\r\n                                    \"h-8 w-8\",\r\n                                    isDark ? \"text-slate-500\" : \"text-slate-400\"\r\n                                )} />\r\n                            </div>\r\n                            <h3 className={cn(\r\n                                \"text-lg font-semibold mb-2\",\r\n                                isDark ? \"text-white\" : \"text-slate-900\"\r\n                            )}>\r\n                                No documents yet\r\n                            </h3>\r\n                            <p className={cn(\r\n                                \"text-sm mb-6\",\r\n                                isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                            )}>\r\n                                Create your first document to start transforming your academic work.\r\n                            </p>\r\n                            <Button\r\n                                onClick={() => setShowContentModal(true)}\r\n                                className=\"bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white\"\r\n                            >\r\n                                <Plus className=\"mr-2 h-4 w-4\" /> Create Document\r\n                            </Button>\r\n                        </CardContent>\r\n                    </Card>\r\n                ) : (\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6\">\r\n                        {documents.map((doc) => (\r\n                            <Link\r\n                                to={`/dashboard/editor/${doc.id}`}\r\n                                key={doc.id}\r\n                                className=\"group block h-full\"\r\n                            >\r\n                                <Card className={cn(\r\n                                    \"h-full hover:shadow-lg transition-all duration-300\",\r\n                                    isDark\r\n                                        ? \"bg-white/5 border-white/10 hover:border-orange-500/30\"\r\n                                        : \"border-slate-200 hover:border-indigo-300 bg-white\"\r\n                                )}>\r\n                                    <CardContent className=\"p-6 flex flex-col h-full\">\r\n                                        <div className=\"flex items-start justify-between mb-4\">\r\n                                            <div\r\n                                                className={`h-12 w-12 rounded-xl flex items-center justify-center flex-shrink-0 transition-colors ${doc.status === 'upgraded'\r\n                                                    ? 'bg-gradient-to-br from-indigo-100 to-indigo-50 text-indigo-600'\r\n                                                    : 'bg-slate-100 text-slate-500'\r\n                                                    }`}\r\n                                            >\r\n                                                <FileText className=\"h-6 w-6\" />\r\n                                            </div>\r\n                                            {doc.status === 'upgraded' ? (\r\n                                                <div className=\"text-right\">\r\n                                                    <div className=\"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-green-50 border border-green-200\">\r\n                                                        <CheckCircle2 className=\"h-3 w-3 text-green-600\" />\r\n                                                        <span className=\"text-xs font-bold text-green-700 uppercase tracking-wide\">\r\n                                                            Upgraded\r\n                                                        </span>\r\n                                                    </div>\r\n                                                </div>\r\n                                            ) : (\r\n                                                <div className=\"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-amber-50 border border-amber-200\">\r\n                                                    <AlertCircle className=\"h-3 w-3 text-amber-600\" />\r\n                                                    <span className=\"text-xs font-bold text-amber-700 uppercase tracking-wide\">\r\n                                                        {doc.status === 'diagnosed' ? 'Diagnosed' : 'Draft'}\r\n                                                    </span>\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n\r\n                                        <div className=\"flex-1 space-y-2\">\r\n                                            <h3 className={cn(\r\n                                                \"text-base font-bold line-clamp-2 leading-snug transition-colors\",\r\n                                                isDark\r\n                                                    ? \"text-white group-hover:text-orange-400\"\r\n                                                    : \"text-slate-900 group-hover:text-indigo-600\"\r\n                                            )}>\r\n                                                {doc.title}\r\n                                            </h3>\r\n                                            <div className={cn(\r\n                                                \"flex items-center gap-3 text-xs\",\r\n                                                isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                                            )}>\r\n                                                <span className=\"flex items-center gap-1\">\r\n                                                    <Clock className=\"h-3.5 w-3.5 hidden md:block\" />\r\n                                                    {formatDate(doc.updated_at)}\r\n                                                </span>\r\n                                                <span>â€¢</span>\r\n                                                <span>{doc.word_count?.toLocaleString() || 0} words</span>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div className={cn(\r\n                                            \"pt-4 mt-4 border-t flex items-center justify-between\",\r\n                                            isDark ? \"border-white/10\" : \"border-slate-100\"\r\n                                        )}>\r\n                                            <span className={cn(\r\n                                                \"text-xs font-medium transition-colors\",\r\n                                                isDark\r\n                                                    ? \"text-slate-400 group-hover:text-orange-400\"\r\n                                                    : \"text-slate-500 group-hover:text-indigo-600\"\r\n                                            )}>\r\n                                                View & Edit\r\n                                            </span>\r\n                                            <ChevronRight className={cn(\r\n                                                \"h-4 w-4 transition-all\",\r\n                                                isDark\r\n                                                    ? \"text-slate-500 group-hover:text-orange-400 group-hover:translate-x-1\"\r\n                                                    : \"text-slate-300 group-hover:text-indigo-500 group-hover:translate-x-1\"\r\n                                            )} />\r\n                                        </div>\r\n                                    </CardContent>\r\n                                </Card>\r\n                            </Link>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\pages\\Dashboard\\DashboardSettings.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'response' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":60,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":60,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"response"},"fix":{"range":[2126,2217],"text":""},"desc":"Remove unused variable 'response'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'response' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":89,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":89,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"response"},"fix":{"range":[3163,3261],"text":""},"desc":"Remove unused variable 'response'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Button } from '../../components/ui/Button';\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '../../components/ui/Card';\r\nimport {\r\n    User, Bell, CreditCard, Shield, Mail, Save, Key, Trash2,\r\n    AlertTriangle, Eye, EyeOff, CheckCircle2, Moon, Sun,\r\n    Monitor, Globe, Clock, ChevronRight, LogOut\r\n} from 'lucide-react';\r\nimport { useToast } from '../../context/ToastContext';\r\nimport { useState, useEffect } from 'react';\r\nimport { supabase } from '../../lib/supabase';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport { useTheme } from '../../context/ThemeContext';\r\nimport { cn } from '../../lib/utils';\r\nimport apiClient from '../../api/client';\r\nimport BillingUpgradeModal from '../../components/modals/BillingUpgradeModal';\r\n\r\n\r\nexport default function DashboardSettings() {\r\n    const { addToast } = useToast();\r\n    const { user, profile, signOut, refreshProfile } = useAuth();\r\n    const { theme, setTheme } = useTheme();\r\n    const [activeTab, setActiveTab] = useState('general');\r\n    const [isSaving, setIsSaving] = useState(false);\r\n    const [showBillingModal, setShowBillingModal] = useState(false);\r\n\r\n\r\n    // Form Data\r\n    const [formData, setFormData] = useState({\r\n        fullName: '',\r\n        email: '',\r\n        emailAlerts: true,\r\n        marketing: false,\r\n        language: 'en',\r\n        timezone: 'UTC',\r\n        twoFactor: false\r\n    });\r\n\r\n    // Password State\r\n    const [passwordData, setPasswordData] = useState({\r\n        newPassword: '',\r\n        confirmPassword: '',\r\n    });\r\n    const [showPasswords, setShowPasswords] = useState(false);\r\n    const [isUpdatingPassword, setIsUpdatingPassword] = useState(false);\r\n\r\n    // Populate data from Auth Context Profile\r\n    useEffect(() => {\r\n        if (profile) {\r\n            setFormData(prev => ({\r\n                ...prev,\r\n                fullName: profile.full_name || '',\r\n                email: profile.email || user?.email || '',\r\n            }));\r\n        }\r\n    }, [profile, user]);\r\n\r\n    const handleSave = async () => {\r\n        setIsSaving(true);\r\n        try {\r\n            const response = await apiClient.patch('/users/profile', { full_name: formData.fullName });\r\n\r\n            // Sync with Supabase Auth metadata for consistency\r\n            await supabase.auth.updateUser({\r\n                data: { full_name: formData.fullName }\r\n            });\r\n\r\n            await refreshProfile();\r\n            addToast('Settings saved successfully!', 'success');\r\n        } catch (error) {\r\n            addToast('Failed to save settings: ' + error.message, 'error');\r\n        } finally {\r\n            setIsSaving(false);\r\n        }\r\n    };\r\n\r\n    const handlePasswordChange = async (e) => {\r\n        e.preventDefault();\r\n        if (passwordData.newPassword !== passwordData.confirmPassword) {\r\n            addToast('Passwords do not match', 'error');\r\n            return;\r\n        }\r\n        if (passwordData.newPassword.length < 8) {\r\n            addToast('Password must be at least 8 characters long', 'warning');\r\n            return;\r\n        }\r\n\r\n        setIsUpdatingPassword(true);\r\n        try {\r\n            const response = await apiClient.patch('/users/password', { password: passwordData.newPassword });\r\n\r\n            addToast('Password updated successfully', 'success');\r\n            setPasswordData({ newPassword: '', confirmPassword: '' });\r\n        } catch (error) {\r\n            addToast(error.message || 'Failed to update password', 'error');\r\n        } finally {\r\n            setIsUpdatingPassword(false);\r\n        }\r\n    };\r\n\r\n    const tabs = [\r\n        { id: 'general', label: 'General', icon: User, desc: 'Profile & preferences' },\r\n        { id: 'appearance', label: 'Appearance', icon: Monitor, desc: 'Theme & display' },\r\n        { id: 'billing', label: 'Billing', icon: CreditCard, desc: 'Plan & subscription' },\r\n        { id: 'notifications', label: 'Notifications', icon: Bell, desc: 'Email alerts' },\r\n\r\n        { id: 'security', label: 'Security', icon: Shield, desc: 'Password & 2FA' },\r\n    ];\r\n\r\n    const renderContent = () => {\r\n        switch (activeTab) {\r\n            case 'general':\r\n                return (\r\n                    <div className=\"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300\">\r\n                        <Card className=\"border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden bg-white dark:bg-slate-900\">\r\n                            <CardHeader className=\"border-b border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50\">\r\n                                <CardTitle className=\"text-lg text-slate-900 dark:text-white\">Profile Information</CardTitle>\r\n                                <CardDescription className=\"text-slate-500 dark:text-slate-400\">Update your photo and personal details.</CardDescription>\r\n                            </CardHeader>\r\n                            <CardContent className=\"p-6 space-y-6\">\r\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                                    <div className=\"space-y-2\">\r\n                                        <label className=\"text-sm font-medium text-slate-700 dark:text-slate-300\">Full Name</label>\r\n                                        <div className=\"relative\">\r\n                                            <User className=\"absolute left-3 top-2.5 h-4 w-4 text-slate-400\" />\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                value={formData.fullName}\r\n                                                onChange={(e) => setFormData({ ...formData, fullName: e.target.value })}\r\n                                                className=\"w-full pl-10 h-10 px-3 rounded-md border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-950 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all text-slate-900 dark:text-slate-100 placeholder:text-slate-400\"\r\n                                                placeholder=\"Your full name\"\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"space-y-2\">\r\n                                        <label className=\"text-sm font-medium text-slate-700 dark:text-slate-300\">Email Address</label>\r\n                                        <div className=\"relative\">\r\n                                            <Mail className=\"absolute left-3 top-2.5 h-4 w-4 text-slate-400\" />\r\n                                            <input\r\n                                                type=\"email\"\r\n                                                value={formData.email}\r\n                                                onChange={(e) => setFormData({ ...formData, email: e.target.value })}\r\n                                                className=\"w-full pl-10 h-10 px-3 rounded-md border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-950 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all text-slate-900 dark:text-slate-100 placeholder:text-slate-400\"\r\n                                                placeholder=\"your@email.com\"\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </CardContent>\r\n                        </Card>\r\n\r\n                        <Card className=\"border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden bg-white dark:bg-slate-900\">\r\n                            <CardHeader className=\"border-b border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50\">\r\n                                <CardTitle className=\"text-lg text-slate-900 dark:text-white\">Regional Preferences</CardTitle>\r\n                                <CardDescription className=\"text-slate-500 dark:text-slate-400\">Manage your language and timezone settings.</CardDescription>\r\n                            </CardHeader>\r\n                            <CardContent className=\"p-6 space-y-6\">\r\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                                    <div className=\"space-y-2\">\r\n                                        <label className=\"text-sm font-medium text-slate-700 dark:text-slate-300\">Language</label>\r\n                                        <div className=\"relative\">\r\n                                            <Globe className=\"absolute left-3 top-2.5 h-4 w-4 text-slate-400\" />\r\n                                            <select\r\n                                                value={formData.language}\r\n                                                onChange={(e) => setFormData({ ...formData, language: e.target.value })}\r\n                                                className=\"w-full pl-10 h-10 px-3 rounded-md border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-950 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all text-slate-900 dark:text-slate-100 appearance-none\"\r\n                                            >\r\n                                                <option value=\"en\">English</option>\r\n                                                <option value=\"es\">Spanish</option>\r\n                                                <option value=\"fr\">French</option>\r\n                                                <option value=\"de\">German</option>\r\n                                            </select>\r\n                                            <div className=\"absolute right-3 top-3 pointer-events-none\">\r\n                                                <ChevronRight className=\"h-4 w-4 text-slate-400 rotate-90\" />\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"space-y-2\">\r\n                                        <label className=\"text-sm font-medium text-slate-700 dark:text-slate-300\">Timezone</label>\r\n                                        <div className=\"relative\">\r\n                                            <Clock className=\"absolute left-3 top-2.5 h-4 w-4 text-slate-400\" />\r\n                                            <select\r\n                                                value={formData.timezone}\r\n                                                onChange={(e) => setFormData({ ...formData, timezone: e.target.value })}\r\n                                                className=\"w-full pl-10 h-10 px-3 rounded-md border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-950 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all text-slate-900 dark:text-slate-100 appearance-none\"\r\n                                            >\r\n                                                <option value=\"UTC\">UTC (GMT+0)</option>\r\n                                                <option value=\"EST\">Eastern Time (GMT-5)</option>\r\n                                                <option value=\"PST\">Pacific Time (GMT-8)</option>\r\n                                                <option value=\"CET\">Central European Time (GMT+1)</option>\r\n                                            </select>\r\n                                            <div className=\"absolute right-3 top-3 pointer-events-none\">\r\n                                                <ChevronRight className=\"h-4 w-4 text-slate-400 rotate-90\" />\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </CardContent>\r\n                        </Card>\r\n\r\n                        <div className=\"flex justify-end pt-2\">\r\n                            <Button\r\n                                onClick={handleSave}\r\n                                isLoading={isSaving}\r\n                                className=\"bg-indigo-600 hover:bg-indigo-700 text-white shadow-lg shadow-indigo-500/20 px-8\"\r\n                            >\r\n                                <Save className=\"mr-2 h-4 w-4\" /> Save Changes\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                );\r\n\r\n            case 'appearance':\r\n                return (\r\n                    <div className=\"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300\">\r\n                        <Card className=\"border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden bg-white dark:bg-slate-900\">\r\n                            <CardHeader className=\"border-b border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50\">\r\n                                <CardTitle className=\"text-lg text-slate-900 dark:text-white\">Theme Preferences</CardTitle>\r\n                                <CardDescription className=\"text-slate-500 dark:text-slate-400\">Choose how Docley looks on your device.</CardDescription>\r\n                            </CardHeader>\r\n                            <CardContent className=\"p-6\">\r\n                                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                                    <button\r\n                                        onClick={() => setTheme('light')}\r\n                                        className={cn(\r\n                                            \"group relative flex flex-col items-center justify-center p-4 rounded-xl border-2 transition-all duration-200\",\r\n                                            theme === 'light'\r\n                                                ? \"border-indigo-600 bg-indigo-50/50 dark:bg-indigo-900/10 ring-1 ring-indigo-600/20\"\r\n                                                : \"border-slate-200 dark:border-slate-800 hover:bg-slate-50 dark:hover:bg-slate-800\"\r\n                                        )}\r\n                                    >\r\n                                        <div className=\"h-24 w-full bg-slate-100 rounded-lg mb-4 flex items-center justify-center border border-slate-200 shadow-inner overflow-hidden relative\">\r\n                                            <div className=\"absolute inset-x-4 top-4 h-full bg-white rounded-t-lg border border-slate-200 shadow-sm\"></div>\r\n                                            <Sun className={cn(\"relative z-10 h-8 w-8 text-amber-500 transition-transform duration-300\", theme === 'light' ? \"scale-110\" : \"group-hover:scale-110\")} />\r\n                                        </div>\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                            <span className=\"font-semibold text-sm text-slate-900 dark:text-slate-100\">Light Mode</span>\r\n                                            {theme === 'light' && <CheckCircle2 className=\"h-4 w-4 text-indigo-600\" />}\r\n                                        </div>\r\n                                    </button>\r\n\r\n                                    <button\r\n                                        onClick={() => setTheme('dark')}\r\n                                        className={cn(\r\n                                            \"group relative flex flex-col items-center justify-center p-4 rounded-xl border-2 transition-all duration-200\",\r\n                                            theme === 'dark'\r\n                                                ? \"border-indigo-600 bg-indigo-50/50 dark:bg-indigo-900/10 ring-1 ring-indigo-600/20\"\r\n                                                : \"border-slate-200 dark:border-slate-800 hover:bg-slate-50 dark:hover:bg-slate-800\"\r\n                                        )}\r\n                                    >\r\n                                        <div className=\"h-24 w-full bg-slate-950 rounded-lg mb-4 flex items-center justify-center border border-slate-800 shadow-inner overflow-hidden relative\">\r\n                                            <div className=\"absolute inset-x-4 top-4 h-full bg-slate-900 rounded-t-lg border border-slate-800 shadow-sm\"></div>\r\n                                            <Moon className={cn(\"relative z-10 h-8 w-8 text-indigo-400 transition-transform duration-300\", theme === 'dark' ? \"scale-110\" : \"group-hover:scale-110\")} />\r\n                                        </div>\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                            <span className=\"font-semibold text-sm text-slate-900 dark:text-slate-100\">Dark Mode</span>\r\n                                            {theme === 'dark' && <CheckCircle2 className=\"h-4 w-4 text-indigo-600\" />}\r\n                                        </div>\r\n                                    </button>\r\n\r\n                                    <button\r\n                                        onClick={() => {\r\n                                            const systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\r\n                                            setTheme(systemTheme);\r\n                                            addToast(`System theme detected: ${systemTheme}`, 'info');\r\n                                        }}\r\n                                        className={cn(\r\n                                            \"group relative flex flex-col items-center justify-center p-4 rounded-xl border-2 transition-all duration-200 border-slate-200 dark:border-slate-800 hover:bg-slate-50 dark:hover:bg-slate-800\"\r\n                                        )}\r\n                                    >\r\n                                        <div className=\"h-24 w-full bg-gradient-to-br from-slate-100 to-slate-900 rounded-lg mb-4 flex items-center justify-center border border-slate-200 dark:border-slate-800 shadow-inner\">\r\n                                            <Monitor className=\"h-8 w-8 text-slate-500 group-hover:text-slate-700 dark:group-hover:text-slate-300 transition-colors\" />\r\n                                        </div>\r\n                                        <span className=\"font-semibold text-sm text-slate-900 dark:text-slate-100\">System</span>\r\n                                    </button>\r\n                                </div>\r\n                            </CardContent>\r\n                        </Card>\r\n                    </div>\r\n                );\r\n\r\n            case 'notifications':\r\n                return (\r\n                    <div className=\"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300\">\r\n                        <Card className=\"border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden bg-white dark:bg-slate-900\">\r\n                            <CardHeader className=\"border-b border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50\">\r\n                                <CardTitle className=\"text-lg text-slate-900 dark:text-white\">Email Preferences</CardTitle>\r\n                                <CardDescription className=\"text-slate-500 dark:text-slate-400\">Manage what emails you receive from us.</CardDescription>\r\n                            </CardHeader>\r\n                            <CardContent className=\"p-6 space-y-6\">\r\n                                <div className=\"flex items-center justify-between p-4 rounded-lg bg-slate-50 dark:bg-slate-900/50 border border-slate-100 dark:border-slate-800\">\r\n                                    <div className=\"space-y-0.5\">\r\n                                        <div className=\"font-medium text-slate-900 dark:text-slate-100\">Communication Emails</div>\r\n                                        <div className=\"text-sm text-slate-500 dark:text-slate-400\">Receive emails about your account activity and security.</div>\r\n                                    </div>\r\n                                    <label className=\"relative inline-flex items-center cursor-pointer\">\r\n                                        <input\r\n                                            type=\"checkbox\"\r\n                                            className=\"sr-only peer\"\r\n                                            checked={formData.emailAlerts}\r\n                                            onChange={(e) => {\r\n                                                setFormData({ ...formData, emailAlerts: e.target.checked });\r\n                                                addToast('Notification settings updated', 'info');\r\n                                            }}\r\n                                        />\r\n                                        <div className=\"w-11 h-6 bg-slate-200 dark:bg-slate-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600\"></div>\r\n                                    </label>\r\n                                </div>\r\n                                <div className=\"flex items-center justify-between p-4 rounded-lg bg-slate-50 dark:bg-slate-900/50 border border-slate-100 dark:border-slate-800\">\r\n                                    <div className=\"space-y-0.5\">\r\n                                        <div className=\"font-medium text-slate-900 dark:text-slate-100\">Marketing Emails</div>\r\n                                        <div className=\"text-sm text-slate-500 dark:text-slate-400\">Receive emails about new products, features, and offers.</div>\r\n                                    </div>\r\n                                    <label className=\"relative inline-flex items-center cursor-pointer\">\r\n                                        <input\r\n                                            type=\"checkbox\"\r\n                                            className=\"sr-only peer\"\r\n                                            checked={formData.marketing}\r\n                                            onChange={(e) => {\r\n                                                setFormData({ ...formData, marketing: e.target.checked });\r\n                                                addToast('Marketing preferences updated', 'info');\r\n                                            }}\r\n                                        />\r\n                                        <div className=\"w-11 h-6 bg-slate-200 dark:bg-slate-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600\"></div>\r\n                                    </label>\r\n                                </div>\r\n                            </CardContent>\r\n                        </Card>\r\n                    </div>\r\n                );\r\n\r\n\r\n\r\n            case 'billing':\r\n                return (\r\n                    <div className=\"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300\">\r\n                        <Card className=\"border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden bg-white dark:bg-slate-900\">\r\n                            <CardHeader className=\"border-b border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50\">\r\n                                <CardTitle className=\"text-lg text-slate-900 dark:text-white\">Current Plan</CardTitle>\r\n                                <CardDescription className=\"text-slate-500 dark:text-slate-400\">Manage your billing and subscription.</CardDescription>\r\n                            </CardHeader>\r\n                            <CardContent className=\"p-6\">\r\n                                <div className=\"relative overflow-hidden rounded-xl border border-indigo-100 dark:border-indigo-900/50 bg-gradient-to-br from-indigo-50 to-white dark:from-indigo-900/20 dark:to-slate-900 p-8\">\r\n                                    <div className=\"absolute top-0 right-0 p-4 opacity-10\">\r\n                                        <CreditCard className=\"h-32 w-32 text-indigo-600\" />\r\n                                    </div>\r\n                                    <div className=\"relative z-10 flex flex-col md:flex-row md:items-center justify-between gap-6\">\r\n                                        <div>\r\n                                            <div className=\"flex items-center gap-3 mb-2\">\r\n                                                <h3 className=\"text-2xl font-bold text-slate-900 dark:text-white\">Free Plan</h3>\r\n                                                <span className=\"px-3 py-1 rounded-full bg-indigo-100 dark:bg-indigo-900/50 text-xs font-bold text-indigo-700 dark:text-indigo-300 border border-indigo-200 dark:border-indigo-800\">\r\n                                                    ACTIVE\r\n                                                </span>\r\n                                            </div>\r\n                                            <p className=\"text-slate-600 dark:text-slate-400 max-w-md\">\r\n                                                You are currently on the free tier. Upgrade to unlock more document processing power and premium features.\r\n                                            </p>\r\n                                        </div>\r\n                                        <div className=\"text-left md:text-right\">\r\n                                            <div className=\"text-3xl font-bold text-slate-900 dark:text-white\">$0</div>\r\n                                            <div className=\"text-sm text-slate-500 dark:text-slate-400\">per month</div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"mt-8 pt-8 border-t border-indigo-100 dark:border-indigo-900/30\">\r\n                                        <div className=\"flex flex-col sm:flex-row gap-4\">\r\n                                            <Button\r\n                                                onClick={() => setShowBillingModal(true)}\r\n                                                className=\"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white shadow-md shadow-indigo-500/20\"\r\n                                            >\r\n                                                Upgrade to Pro\r\n                                            </Button>\r\n                                            <Button\r\n                                                variant=\"outline\"\r\n                                                className=\"flex-1 border-slate-200 dark:border-slate-700 hover:bg-white dark:hover:bg-slate-800 text-slate-700 dark:text-slate-300\"\r\n                                                onClick={() => addToast('Use the upgrade button to manage billing', 'info')}\r\n                                            >\r\n                                                Billing History\r\n                                            </Button>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </CardContent>\r\n                        </Card>\r\n                    </div>\r\n                );\r\n\r\n            case 'security':\r\n                return (\r\n                    <div className=\"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300\">\r\n                        <Card className=\"border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden bg-white dark:bg-slate-900\">\r\n                            <CardHeader className=\"border-b border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50\">\r\n                                <CardTitle className=\"text-lg\">Change Password</CardTitle>\r\n                                <CardDescription>Update your password to keep your account secure.</CardDescription>\r\n                            </CardHeader>\r\n                            <CardContent className=\"p-6\">\r\n                                <form onSubmit={handlePasswordChange} className=\"space-y-4 max-w-lg\">\r\n                                    <div className=\"space-y-2\">\r\n                                        <label className=\"text-sm font-medium text-slate-700 dark:text-slate-300\">New Password</label>\r\n                                        <div className=\"relative\">\r\n                                            <Key className=\"absolute left-3 top-2.5 h-4 w-4 text-slate-400\" />\r\n                                            <input\r\n                                                type={showPasswords ? \"text\" : \"password\"}\r\n                                                value={passwordData.newPassword}\r\n                                                onChange={(e) => setPasswordData({ ...passwordData, newPassword: e.target.value })}\r\n                                                className=\"w-full pl-10 pr-10 h-10 px-3 rounded-md border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-950 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all text-slate-900 dark:text-slate-100 placeholder:text-slate-400\"\r\n                                                placeholder=\"Min. 8 characters\"\r\n                                            />\r\n                                            <button\r\n                                                type=\"button\"\r\n                                                onClick={() => setShowPasswords(!showPasswords)}\r\n                                                className=\"absolute right-3 top-2.5 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300\"\r\n                                            >\r\n                                                {showPasswords ? <EyeOff className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"space-y-2\">\r\n                                        <label className=\"text-sm font-medium text-slate-700 dark:text-slate-300\">Confirm Password</label>\r\n                                        <div className=\"relative\">\r\n                                            <Key className=\"absolute left-3 top-2.5 h-4 w-4 text-slate-400\" />\r\n                                            <input\r\n                                                type={showPasswords ? \"text\" : \"password\"}\r\n                                                value={passwordData.confirmPassword}\r\n                                                onChange={(e) => setPasswordData({ ...passwordData, confirmPassword: e.target.value })}\r\n                                                className=\"w-full pl-10 h-10 px-3 rounded-md border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-950 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all text-slate-900 dark:text-slate-100 placeholder:text-slate-400\"\r\n                                                placeholder=\"Confirm new password\"\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"pt-2\">\r\n                                        <Button\r\n                                            type=\"submit\"\r\n                                            isLoading={isUpdatingPassword}\r\n                                            className=\"bg-indigo-600 hover:bg-indigo-700 text-white shadow-md shadow-indigo-500/20\"\r\n                                        >\r\n                                            Update Password\r\n                                        </Button>\r\n                                    </div>\r\n                                </form>\r\n                            </CardContent>\r\n                        </Card>\r\n\r\n                        <Card className=\"border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden bg-white dark:bg-slate-900\">\r\n                            <CardHeader className=\"border-b border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50\">\r\n                                <div className=\"flex items-center justify-between\">\r\n                                    <div>\r\n                                        <CardTitle className=\"text-lg text-slate-900 dark:text-white\">Two-Factor Authentication</CardTitle>\r\n                                        <CardDescription className=\"text-slate-500 dark:text-slate-400\">Add an extra layer of security to your account.</CardDescription>\r\n                                    </div>\r\n                                    <div className={cn(\r\n                                        \"px-2.5 py-0.5 rounded-full text-xs font-semibold border\",\r\n                                        formData.twoFactor\r\n                                            ? \"bg-green-50 text-green-700 border-green-200 dark:bg-green-900/20 dark:text-green-400 dark:border-green-900/50\"\r\n                                            : \"bg-slate-100 text-slate-600 border-slate-200 dark:bg-slate-800 dark:text-slate-400 dark:border-slate-700\"\r\n                                    )}>\r\n                                        {formData.twoFactor ? 'ENABLED' : 'DISABLED'}\r\n                                    </div>\r\n                                </div>\r\n                            </CardHeader>\r\n                            <CardContent className=\"p-6 flex items-center justify-between\">\r\n                                <div className=\"max-w-md\">\r\n                                    <p className=\"font-medium text-slate-900 dark:text-white\">Authenticator App</p>\r\n                                    <p className=\"text-sm text-slate-500 dark:text-slate-400 mt-1\">\r\n                                        Use an authenticator app like Google Authenticator or Authy to generate verification codes.\r\n                                    </p>\r\n                                </div>\r\n                                <label className=\"relative inline-flex items-center cursor-pointer\">\r\n                                    <input\r\n                                        type=\"checkbox\"\r\n                                        className=\"sr-only peer\"\r\n                                        checked={formData.twoFactor}\r\n                                        onChange={(e) => {\r\n                                            setFormData({ ...formData, twoFactor: e.target.checked });\r\n                                            addToast(e.target.checked ? '2FA Enabled' : '2FA Disabled', 'success');\r\n                                        }}\r\n                                    />\r\n                                    <div className=\"w-11 h-6 bg-slate-200 dark:bg-slate-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600\"></div>\r\n                                </label>\r\n                            </CardContent>\r\n                        </Card>\r\n\r\n                        <Card className=\"border-red-100 dark:border-red-900/30 shadow-sm overflow-hidden bg-red-50/30 dark:bg-red-950/10\">\r\n                            <CardHeader className=\"border-b border-red-100 dark:border-red-900/30 bg-red-50/50 dark:bg-red-900/20\">\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <AlertTriangle className=\"h-5 w-5 text-red-600 dark:text-red-400\" />\r\n                                    <CardTitle className=\"text-lg text-red-700 dark:text-red-400\">Danger Zone</CardTitle>\r\n                                </div>\r\n                                <CardDescription className=\"text-red-600/70 dark:text-red-400/70\">\r\n                                    Irreversible actions for your account.\r\n                                </CardDescription>\r\n                            </CardHeader>\r\n                            <CardContent className=\"p-6\">\r\n                                <div className=\"flex items-center justify-between\">\r\n                                    <div>\r\n                                        <p className=\"font-medium text-slate-900 dark:text-white\">Delete Account</p>\r\n                                        <p className=\"text-sm text-slate-500 dark:text-slate-400\">Permanently remove your account and all data.</p>\r\n                                    </div>\r\n                                    <Button\r\n                                        variant=\"destructive\"\r\n                                        onClick={() => addToast('Account deletion is disabled for safety.', 'error')}\r\n                                        className=\"bg-red-600 hover:bg-red-700 text-white shadow-md shadow-red-600/20\"\r\n                                    >\r\n                                        <Trash2 className=\"mr-2 h-4 w-4\" /> Delete Account\r\n                                    </Button>\r\n                                </div>\r\n                            </CardContent>\r\n                        </Card>\r\n                    </div>\r\n                );\r\n\r\n            default:\r\n                return null;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"max-w-6xl mx-auto pb-10\">\r\n            <div className=\"mb-8\">\r\n                <h1 className=\"text-3xl font-bold text-slate-900 dark:text-white\">Settings</h1>\r\n                <p className=\"text-slate-500 dark:text-slate-400 mt-2\">Manage your account settings and preferences.</p>\r\n            </div>\r\n\r\n            <div className=\"flex flex-col lg:flex-row gap-8\">\r\n                {/* Modern Sidebar */}\r\n                <nav className=\"w-full lg:w-72 flex-shrink-0 space-y-2\">\r\n                    {tabs.map((tab) => {\r\n                        const Icon = tab.icon;\r\n                        const isActive = activeTab === tab.id;\r\n                        return (\r\n                            <button\r\n                                key={tab.id}\r\n                                onClick={() => setActiveTab(tab.id)}\r\n                                className={cn(\r\n                                    \"group w-full flex items-center gap-4 px-4 py-3.5 rounded-xl text-left transition-all duration-200 border\",\r\n                                    isActive\r\n                                        ? \"bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-800 shadow-sm\"\r\n                                        : \"bg-transparent border-transparent hover:bg-slate-100 dark:hover:bg-slate-800/50\"\r\n                                )}\r\n                            >\r\n                                <div className={cn(\r\n                                    \"p-2 rounded-lg transition-colors\",\r\n                                    isActive\r\n                                        ? \"bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400\"\r\n                                        : \"text-slate-400 group-hover:text-slate-600 dark:group-hover:text-slate-300\"\r\n                                )}>\r\n                                    <Icon className=\"h-5 w-5\" />\r\n                                </div>\r\n                                <div className=\"flex-1 min-w-0\">\r\n                                    <div className=\"font-medium text-slate-900 dark:text-white\">{tab.label}</div>\r\n                                    <div className=\"text-xs text-slate-500 dark:text-slate-500 line-clamp-1\">\r\n                                        {tab.desc}\r\n                                    </div>\r\n                                </div>\r\n                                {isActive && <ChevronRight className=\"h-4 w-4 text-indigo-500 animate-in fade-in slide-in-from-left-2\" />}\r\n                            </button>\r\n                        );\r\n                    })}\r\n\r\n                    <div className=\"pt-6 mt-6 border-t border-slate-200 dark:border-slate-800\">\r\n                        <button\r\n                            onClick={() => signOut()}\r\n                            className=\"w-full flex items-center gap-4 px-4 py-3.5 text-sm font-medium text-red-600 dark:text-red-400 rounded-xl hover:bg-red-50 dark:hover:bg-red-900/10 transition-all duration-200 border border-transparent hover:border-red-100 dark:hover:border-red-900/30\"\r\n                        >\r\n                            <div className=\"p-2 rounded-lg bg-red-50 dark:bg-red-900/20 text-red-500\">\r\n                                <LogOut className=\"h-5 w-5\" />\r\n                            </div>\r\n                            <span>Sign Out</span>\r\n                        </button>\r\n                    </div>\r\n                </nav>\r\n\r\n                {/* Main Content Area */}\r\n                <div className=\"flex-1 min-w-0\">\r\n                    {renderContent()}\r\n                </div>\r\n            </div>\r\n\r\n\r\n            {/* Billing Modal */}\r\n            <BillingUpgradeModal isOpen={showBillingModal} onClose={() => setShowBillingModal(false)} />\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\pages\\Dashboard\\TimetableGenerator\\TimetableGenerator.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":56,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":56,"endColumn":19},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":56,"column":21,"nodeType":"BlockStatement","messageId":"unexpected","endLine":56,"endColumn":23,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[2283,2283],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef } from 'react';\nimport { useTheme } from '../../../context/ThemeContext';\nimport { cn } from '../../../lib/utils';\nimport { Button } from '../../../components/ui/Button';\nimport { Card } from '../../../components/ui/Card';\nimport { \n    Calendar, \n    Clock, \n    BookOpen, \n    Settings, \n    ChevronRight, \n    ChevronLeft, \n    Save, \n    Download, \n    RefreshCw,\n    CheckCircle2,\n    AlertCircle\n} from 'lucide-react';\nimport html2canvas from 'html2canvas';\n\n// Components\nimport AcademicContextForm from './components/AcademicContextForm';\nimport AvailabilityForm from './components/AvailabilityForm';\nimport CoursesForm from './components/CoursesForm';\nimport TimetableView from './components/TimetableView';\nimport { generateTimetable } from './utils';\n\n// Sanitize OKLCH/OKLAB/var() colors before export\nfunction sanitizeElementColors(root) {\n    if (!root) return;\n    const colorProps = [\n        'color', 'background-color', 'border-color',\n        'border-top-color', 'border-right-color', 'border-bottom-color', 'border-left-color',\n        'outline-color', 'text-decoration-color', 'fill', 'stroke'\n    ];\n    const isProblematic = (v) => v && (v.includes('oklch') || v.includes('oklab') || v.includes('var('));\n    const walk = (el) => {\n        try {\n            const computed = window.getComputedStyle(el);\n            colorProps.forEach((prop) => {\n                const value = computed.getPropertyValue(prop);\n                if (prop === 'color') el.style.setProperty(prop, '#0b0b0b', 'important');\n                if (prop === 'fill') el.style.setProperty(prop, '#0b0b0b', 'important');\n                if (prop === 'stroke') el.style.setProperty(prop, '#0b0b0b', 'important');\n                if (prop.includes('background')) {\n                    if (isProblematic(value) || value.includes('gradient') || value === 'transparent') {\n                        el.style.setProperty(prop, '#ffffff', 'important');\n                    }\n                }\n                if (prop.includes('border')) {\n                    if (isProblematic(value) || value === 'transparent') {\n                        el.style.setProperty(prop, '#e2e8f0', 'important');\n                    }\n                }\n            });\n        } catch (e) {}\n        Array.from(el.children).forEach(walk);\n    };\n    walk(root);\n}\n\nexport default function TimetableGenerator() {\n    const { theme } = useTheme();\n    const isDark = theme === 'dark';\n    const [step, setStep] = useState(1);\n    const [isGenerating, setIsGenerating] = useState(false);\n    const [timetable, setTimetable] = useState(null);\n    const timetableRef = useRef(null);\n\n    const [formData, setFormData] = useState({\n        // Academic Context & Preferences\n        studyGoal: '',\n        examDate: '',\n        sessionLength: 60, // minutes\n        breakDuration: 10, // minutes\n        maxSessionsPerDay: 4,\n        \n        // Availability\n        availability: {\n            Monday: { available: true, hours: 4, preferredTime: 'morning' },\n            Tuesday: { available: true, hours: 4, preferredTime: 'morning' },\n            Wednesday: { available: true, hours: 4, preferredTime: 'morning' },\n            Thursday: { available: true, hours: 4, preferredTime: 'morning' },\n            Friday: { available: true, hours: 4, preferredTime: 'morning' },\n            Saturday: { available: true, hours: 6, preferredTime: 'afternoon' },\n            Sunday: { available: false, hours: 0, preferredTime: 'any' },\n        },\n\n        // Courses\n        courses: [\n            { id: 1, name: '', priority: 'medium', difficulty: 'medium' }\n        ]\n    });\n\n    const updateFormData = (section, data) => {\n        setFormData(prev => ({\n            ...prev,\n            [section]: data\n        }));\n    };\n\n    const handleNext = () => {\n        if (step < 3) setStep(step + 1);\n        else handleGenerate();\n    };\n\n    const handleBack = () => {\n        if (step > 1) setStep(step - 1);\n        else if (step === 4) setStep(3); // Go back to editing from result\n    };\n\n    const handleGenerate = async () => {\n        setIsGenerating(true);\n        // Simulate processing time for UX\n        setTimeout(() => {\n            try {\n                const result = generateTimetable(formData);\n                setTimetable(result);\n                setStep(4);\n            } catch (error) {\n                console.error(\"Generation failed\", error);\n                // Handle error\n            } finally {\n                setIsGenerating(false);\n            }\n        }, 1500);\n    };\n\n    const handleExport = async () => {\n        if (timetableRef.current) {\n            try {\n                const original = timetableRef.current;\n                const cloneWrapper = document.createElement('div');\n                cloneWrapper.style.position = 'fixed';\n                cloneWrapper.style.left = '-99999px';\n                cloneWrapper.style.top = '0';\n                cloneWrapper.style.background = '#ffffff';\n                cloneWrapper.style.padding = '16px';\n                const clone = original.cloneNode(true);\n                cloneWrapper.appendChild(clone);\n                document.body.appendChild(cloneWrapper);\n                sanitizeElementColors(cloneWrapper);\n                const canvas = await html2canvas(cloneWrapper, {\n                    backgroundColor: isDark ? '#0f172a' : '#ffffff',\n                    scale: 2,\n                    useCORS: true,\n                    logging: false\n                });\n                document.body.removeChild(cloneWrapper);\n                const link = document.createElement('a');\n                link.download = 'Docley-Timetable.png';\n                link.href = canvas.toDataURL();\n                link.click();\n            } catch (err) {\n                console.error(\"Export failed\", err);\n            }\n        }\n    };\n\n    const steps = [\n        { id: 1, title: 'Preferences', icon: Settings },\n        { id: 2, title: 'Availability', icon: Clock },\n        { id: 3, title: 'Courses', icon: BookOpen },\n        { id: 4, title: 'Timetable', icon: Calendar },\n    ];\n\n    return (\n        <div className=\"max-w-6xl mx-auto p-6 min-h-[calc(100vh-80px)]\">\n            <div className=\"mb-8\">\n                <h1 className={cn(\"text-3xl font-bold mb-2\", isDark ? \"text-white\" : \"text-slate-900\")}>\n                    Smart Study Timetable\n                </h1>\n                <p className={cn(\"text-lg\", isDark ? \"text-slate-400\" : \"text-slate-600\")}>\n                    Generate a personalized study schedule based on your goals and availability.\n                </p>\n            </div>\n\n            {/* Stepper */}\n            <div className=\"mb-12\">\n                <div className=\"flex items-center justify-between relative max-w-3xl mx-auto\">\n                    <div className={cn(\"absolute left-0 top-1/2 -translate-y-1/2 w-full h-1 -z-10\", isDark ? \"bg-slate-800\" : \"bg-slate-200\")}></div>\n                    <div className={cn(\"absolute left-0 top-1/2 -translate-y-1/2 h-1 transition-all duration-500 -z-10 bg-orange-500\")} \n                         style={{ width: `${((step - 1) / (steps.length - 1)) * 100}%` }}></div>\n                    \n                    {steps.map((s) => (\n                        <div key={s.id} className=\"flex flex-col items-center gap-2 bg-transparent\">\n                            <div className={cn(\n                                \"w-10 h-10 rounded-full flex items-center justify-center transition-all duration-300 border-2 z-10\",\n                                step >= s.id \n                                    ? \"bg-orange-500 border-orange-500 text-white shadow-lg shadow-orange-500/30\" \n                                    : isDark ? \"bg-slate-900 border-slate-700 text-slate-500\" : \"bg-white border-slate-300 text-slate-400\"\n                            )}>\n                                <s.icon className=\"w-5 h-5\" />\n                            </div>\n                            <span className={cn(\n                                \"text-xs font-medium absolute top-12 whitespace-nowrap\",\n                                step >= s.id ? (isDark ? \"text-white\" : \"text-slate-900\") : \"text-slate-500\"\n                            )}>{s.title}</span>\n                        </div>\n                    ))}\n                </div>\n            </div>\n\n            {/* Content */}\n            <div className=\"mb-8 mt-16\">\n                {step === 1 && (\n                    <AcademicContextForm \n                        data={formData} \n                        updateField={(field, value) => setFormData(prev => ({ ...prev, [field]: value }))}\n                        isDark={isDark}\n                    />\n                )}\n                {step === 2 && (\n                    <AvailabilityForm \n                        data={formData.availability} \n                        onChange={(data) => updateFormData('availability', data)}\n                        isDark={isDark}\n                    />\n                )}\n                {step === 3 && (\n                    <CoursesForm \n                        data={formData.courses} \n                        onChange={(data) => updateFormData('courses', data)}\n                        isDark={isDark}\n                    />\n                )}\n                {step === 4 && timetable && (\n                    <div ref={timetableRef} className=\"rounded-xl overflow-hidden\">\n                        <TimetableView timetable={timetable} isDark={isDark} />\n                    </div>\n                )}\n            </div>\n\n            {/* Actions */}\n            <div className=\"flex justify-between mt-12 pt-6 border-t border-slate-200 dark:border-white/10\">\n                <Button \n                    variant=\"outline\" \n                    onClick={handleBack}\n                    disabled={isGenerating || step === 1}\n                    className={cn(step === 1 && \"invisible\")}\n                >\n                    <ChevronLeft className=\"w-4 h-4 mr-2\" /> Back\n                </Button>\n\n                {step < 3 ? (\n                    <Button onClick={handleNext} className=\"bg-orange-500 hover:bg-orange-600 text-white\">\n                        Next <ChevronRight className=\"w-4 h-4 ml-2\" />\n                    </Button>\n                ) : step === 3 ? (\n                    <Button onClick={handleGenerate} disabled={isGenerating} className=\"bg-orange-500 hover:bg-orange-600 text-white min-w-[160px]\">\n                        {isGenerating ? (\n                            <>\n                                <RefreshCw className=\"w-4 h-4 mr-2 animate-spin\" /> Generating...\n                            </>\n                        ) : (\n                            <>\n                                Generate Timetable <ChevronRight className=\"w-4 h-4 ml-2\" />\n                            </>\n                        )}\n                    </Button>\n                ) : (\n                    <div className=\"flex gap-3\">\n                        <Button variant=\"outline\" onClick={() => setStep(3)}>\n                            <Settings className=\"w-4 h-4 mr-2\" /> Adjust Inputs\n                        </Button>\n                        <Button onClick={handleExport} className=\"bg-blue-600 hover:bg-blue-700 text-white\">\n                            <Download className=\"w-4 h-4 mr-2\" /> Export Image\n                        </Button>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\pages\\Dashboard\\TimetableGenerator\\components\\AcademicContextForm.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\pages\\Dashboard\\TimetableGenerator\\components\\AvailabilityForm.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\pages\\Dashboard\\TimetableGenerator\\components\\CoursesForm.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":54,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":54,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[2168,2175],"text":""},"desc":"Remove unused variable 'index'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { cn } from '../../../../lib/utils';\nimport { Card } from '../../../../components/ui/Card';\nimport { Button } from '../../../../components/ui/Button';\nimport { BookOpen, Plus, Trash2, AlertCircle } from 'lucide-react';\n\nexport default function CoursesForm({ data, onChange, isDark }) {\n    \n    const addCourse = () => {\n        onChange([\n            ...data,\n            { \n                id: Date.now(), \n                name: '', \n                priority: 'medium', \n                difficulty: 'medium' \n            }\n        ]);\n    };\n\n    const removeCourse = (id) => {\n        if (data.length > 1) {\n            onChange(data.filter(c => c.id !== id));\n        }\n    };\n\n    const updateCourse = (id, field, value) => {\n        onChange(data.map(c => c.id === id ? { ...c, [field]: value } : c));\n    };\n\n    return (\n        <div className=\"max-w-4xl mx-auto animate-in fade-in slide-in-from-bottom-4 duration-500\">\n            <Card className=\"p-6\">\n                <div className=\"flex items-center justify-between mb-6\">\n                    <div className=\"flex items-center gap-3\">\n                        <div className=\"p-2 bg-purple-100 dark:bg-purple-500/20 rounded-lg\">\n                            <BookOpen className=\"w-5 h-5 text-purple-600 dark:text-purple-400\" />\n                        </div>\n                        <div>\n                            <h3 className={cn(\"text-lg font-semibold\", isDark ? \"text-white\" : \"text-slate-900\")}>\n                                Courses & Subjects\n                            </h3>\n                            <p className={cn(\"text-sm\", isDark ? \"text-slate-400\" : \"text-slate-500\")}>\n                                List the subjects you need to study.\n                            </p>\n                        </div>\n                    </div>\n                    <Button onClick={addCourse} size=\"sm\" className=\"bg-orange-500 hover:bg-orange-600 text-white\">\n                        <Plus className=\"w-4 h-4 mr-1\" /> Add Course\n                    </Button>\n                </div>\n\n                <div className=\"space-y-4\">\n                    {data.map((course, index) => (\n                        <div key={course.id} className={cn(\n                            \"group relative p-4 rounded-xl border transition-all animate-in fade-in slide-in-from-left-2\",\n                            isDark \n                                ? \"bg-slate-900/50 border-slate-700 hover:border-slate-600\" \n                                : \"bg-white border-slate-200 hover:border-slate-300\"\n                        )}>\n                            <div className=\"grid md:grid-cols-12 gap-4 items-end\">\n                                {/* Course Name */}\n                                <div className=\"md:col-span-6\">\n                                    <label className={cn(\"block text-xs font-medium mb-1.5\", isDark ? \"text-slate-400\" : \"text-slate-500\")}>\n                                        Course Name\n                                    </label>\n                                    <input\n                                        type=\"text\"\n                                        value={course.name}\n                                        onChange={(e) => updateCourse(course.id, 'name', e.target.value)}\n                                        placeholder=\"e.g. Advanced Calculus\"\n                                        className={cn(\n                                            \"w-full px-4 py-2 rounded-lg border outline-none transition-all\",\n                                            isDark \n                                                ? \"bg-slate-800 border-slate-700 text-white focus:border-orange-500\" \n                                                : \"bg-white border-slate-200 text-slate-900 focus:border-orange-500\"\n                                        )}\n                                    />\n                                </div>\n\n                                {/* Priority */}\n                                <div className=\"md:col-span-3\">\n                                    <label className={cn(\"block text-xs font-medium mb-1.5\", isDark ? \"text-slate-400\" : \"text-slate-500\")}>\n                                        Priority\n                                    </label>\n                                    <select\n                                        value={course.priority}\n                                        onChange={(e) => updateCourse(course.id, 'priority', e.target.value)}\n                                        className={cn(\n                                            \"w-full px-3 py-2 rounded-lg border outline-none transition-all appearance-none\",\n                                            course.priority === 'high' \n                                                ? \"border-red-200 bg-red-50 text-red-700 dark:bg-red-900/20 dark:border-red-800 dark:text-red-400\"\n                                                : course.priority === 'low'\n                                                    ? \"border-green-200 bg-green-50 text-green-700 dark:bg-green-900/20 dark:border-green-800 dark:text-green-400\"\n                                                    : isDark \n                                                        ? \"bg-slate-800 border-slate-700 text-white\" \n                                                        : \"bg-white border-slate-200 text-slate-900\"\n                                        )}\n                                    >\n                                        <option value=\"high\">High Priority</option>\n                                        <option value=\"medium\">Medium</option>\n                                        <option value=\"low\">Low Priority</option>\n                                    </select>\n                                </div>\n\n                                {/* Difficulty */}\n                                <div className=\"md:col-span-2\">\n                                    <label className={cn(\"block text-xs font-medium mb-1.5\", isDark ? \"text-slate-400\" : \"text-slate-500\")}>\n                                        Difficulty\n                                    </label>\n                                    <select\n                                        value={course.difficulty}\n                                        onChange={(e) => updateCourse(course.id, 'difficulty', e.target.value)}\n                                        className={cn(\n                                            \"w-full px-3 py-2 rounded-lg border outline-none transition-all appearance-none\",\n                                            isDark \n                                                ? \"bg-slate-800 border-slate-700 text-white\" \n                                                : \"bg-white border-slate-200 text-slate-900\"\n                                        )}\n                                    >\n                                        <option value=\"hard\">Hard</option>\n                                        <option value=\"medium\">Medium</option>\n                                        <option value=\"easy\">Easy</option>\n                                    </select>\n                                </div>\n\n                                {/* Remove Button */}\n                                <div className=\"md:col-span-1 flex justify-end\">\n                                    <button\n                                        onClick={() => removeCourse(course.id)}\n                                        disabled={data.length === 1}\n                                        className={cn(\n                                            \"p-2 rounded-lg transition-colors\",\n                                            data.length === 1 \n                                                ? \"text-slate-300 cursor-not-allowed\" \n                                                : \"text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20\"\n                                        )}\n                                    >\n                                        <Trash2 className=\"w-5 h-5\" />\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n                    ))}\n                </div>\n\n                {data.length === 0 && (\n                    <div className=\"text-center py-8 text-slate-500\">\n                        <AlertCircle className=\"w-8 h-8 mx-auto mb-2 opacity-50\" />\n                        <p>Add at least one course to generate a timetable.</p>\n                    </div>\n                )}\n            </Card>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\pages\\Dashboard\\TimetableGenerator\\components\\TimetableView.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\pages\\Dashboard\\TimetableGenerator\\utils.js","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'preferences' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":8,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"preferences"},"fix":{"range":[294,307],"text":""},"desc":"Remove unused variable 'preferences'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'_' is defined but never used.","line":13,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"_"},"fix":{"range":[687,688],"text":""},"desc":"Remove unused variable '_'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\n/**\n * Generates a study timetable based on user inputs.\n * @param {Object} data - The form data containing preferences, availability, and courses.\n * @returns {Object} - The generated timetable structured by day.\n */\nexport function generateTimetable(data) {\n    const { availability, courses, preferences } = data; // Note: data passed here matches the structure in TimetableGenerator.jsx state\n    // But in the component I passed individual sections. Let's assume the main component passes the full `formData`.\n    \n    // Normalize data (handle if structure is slightly different)\n    const availableDays = Object.entries(availability || data.availability || {})\n        .filter(([_, dayData]) => dayData.available && dayData.hours > 0);\n    \n    const courseList = (courses || data.courses || []).filter(c => c.name.trim() !== '');\n    \n    const sessionLength = data.sessionLength || 60; // minutes\n    const maxSessionsPerDay = data.maxSessionsPerDay || 4;\n    \n    if (availableDays.length === 0 || courseList.length === 0) {\n        throw new Error(\"Insufficient data to generate timetable\");\n    }\n\n    // 1. Calculate Course Weights\n    // Priority: high=3, medium=2, low=1\n    // Difficulty: hard=3, medium=2, easy=1\n    const weightedCourses = courseList.map(course => {\n        let weight = 0;\n        if (course.priority === 'high') weight += 3;\n        else if (course.priority === 'medium') weight += 2;\n        else weight += 1;\n\n        if (course.difficulty === 'hard') weight += 2; // Difficulty adds less weight than priority\n        else if (course.difficulty === 'medium') weight += 1;\n        \n        return { ...course, weight, sessionsAssigned: 0 };\n    });\n\n    const totalWeight = weightedCourses.reduce((sum, c) => sum + c.weight, 0);\n\n    // 2. Calculate Total Available Slots\n    // Each slot is 1 sessionLength\n    const timetable = {};\n    let totalSlotsAvailable = 0;\n\n    availableDays.forEach(([day, info]) => {\n        const availableMinutes = info.hours * 60;\n        const maxSlotsByTime = Math.floor(availableMinutes / sessionLength);\n        const slots = Math.min(maxSlotsByTime, maxSessionsPerDay);\n        \n        timetable[day] = {\n            slots: slots,\n            sessions: [],\n            preferredTime: info.preferredTime\n        };\n        totalSlotsAvailable += slots;\n    });\n\n    // 3. Distribute Sessions\n    // Target sessions for each course = (weight / totalWeight) * totalSlotsAvailable\n    weightedCourses.forEach(course => {\n        course.targetSessions = Math.round((course.weight / totalWeight) * totalSlotsAvailable);\n        // Ensure at least 1 session if possible\n        if (course.targetSessions === 0 && totalSlotsAvailable >= courseList.length) {\n            course.targetSessions = 1;\n        }\n    });\n\n    // Re-adjust if total exceeds available\n    let totalAssigned = weightedCourses.reduce((sum, c) => sum + c.targetSessions, 0);\n    while (totalAssigned > totalSlotsAvailable) {\n        // Remove from lowest priority course with > 0 sessions\n        const reducer = weightedCourses\n            .filter(c => c.targetSessions > 0)\n            .sort((a, b) => a.weight - b.weight)[0];\n        if (reducer) {\n            reducer.targetSessions--;\n            totalAssigned--;\n        } else {\n            break; \n        }\n    }\n\n    // 4. Fill the Timetable\n    // Round-robin distribution based on remaining target sessions to avoid clustering\n    const days = availableDays.map(d => d[0]);\n    let dayIndex = 0;\n    \n    // Sort courses by weight desc for initial placement\n    const allocationQueue = [];\n    weightedCourses.sort((a, b) => b.weight - a.weight).forEach(c => {\n        for (let i = 0; i < c.targetSessions; i++) {\n            allocationQueue.push(c);\n        }\n    });\n\n    // Shuffle slightly or distribute intelligently?\n    // Let's just fill slots day by day, balancing hard subjects\n    \n    // Simple greedy allocation: Fill days one by one? No, round robin across days is better.\n    let safetyCounter = 0;\n    while (allocationQueue.length > 0 && safetyCounter < 1000) {\n        safetyCounter++;\n        const currentDay = days[dayIndex];\n        const daySchedule = timetable[currentDay];\n        \n        if (daySchedule.sessions.length < daySchedule.slots) {\n            const course = allocationQueue.shift();\n            \n            // Assign time based on preferred time + slot index\n            // Simple logic: Start time depends on preference\n            let startTime = \"09:00\";\n            if (daySchedule.preferredTime === 'afternoon') startTime = \"13:00\";\n            else if (daySchedule.preferredTime === 'evening') startTime = \"17:00\";\n            else if (daySchedule.preferredTime === 'night') startTime = \"20:00\";\n            \n            // Add offset based on existing sessions (assuming contiguous for now)\n            const offsetMinutes = daySchedule.sessions.length * (sessionLength + (data.breakDuration || 10));\n            \n            // Parse time, add minutes, format back\n            const [h, m] = startTime.split(':').map(Number);\n            const totalMin = h * 60 + m + offsetMinutes;\n            const newH = Math.floor(totalMin / 60) % 24;\n            const newM = totalMin % 60;\n            const timeString = `${newH.toString().padStart(2, '0')}:${newM.toString().padStart(2, '0')}`;\n\n            daySchedule.sessions.push({\n                courseId: course.id,\n                courseName: course.name,\n                difficulty: course.difficulty,\n                startTime: timeString,\n                duration: sessionLength\n            });\n        }\n        \n        dayIndex = (dayIndex + 1) % days.length;\n    }\n\n    return timetable;\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\pages\\Editor\\EditorPage.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'deleteDocument' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":187,"column":57,"nodeType":"Identifier","messageId":"unusedVar","endLine":187,"endColumn":71,"suggestions":[{"messageId":"removeVar","data":{"varName":"deleteDocument"},"fix":{"range":[6068,6084],"text":""},"desc":"Remove unused variable 'deleteDocument'."}]},{"ruleId":"react-hooks/preserve-manual-memoization","severity":2,"message":"Compilation Skipped: Existing memoization could not be preserved\n\nReact Compiler has skipped optimizing this component because the existing manual memoization could not be preserved. The inferred dependencies did not match the manually specified dependencies, which could cause the value to change more or less frequently than expected. The inferred dependency was `editor`, but the source dependencies were [editor?.state.selection, editor?.state.storedMarks, editorStateToken]. Inferred less specific property than source.\n\n  257 |     // Memoize current font size to avoid recalculation\n  258 |     // Memoize current font size to avoid recalculation, handling both selection and stored marks\n> 259 |     const currentFontSize = useMemo(() => {\n      |                                     ^^^^^^^\n> 260 |         if (!editor) return '12';\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 261 |         // Check for stored marks first (pending style)\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 262 |         const storedMarks = editor.getAttributes('textStyle');\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 263 |         if (storedMarks && storedMarks.fontSize) {\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 264 |             return storedMarks.fontSize;\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 265 |         }\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 266 |         // Fallback to selection attributes\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 267 |         return editor.getAttributes('textStyle').fontSize || '12';\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 268 |     }, [editor?.state.selection, editor?.state.storedMarks, editorStateToken]);\n      | ^^^^^^ Could not preserve existing manual memoization\n  269 |\n  270 |     // Optimize formatting callbacks with useCallback\n  271 |     const updateFontSize = useCallback((newSize) => {","line":259,"column":37,"nodeType":null,"endLine":268,"endColumn":6},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has a missing dependency: 'editor'. Either include it or remove the dependency array.","line":268,"column":8,"nodeType":"ArrayExpression","endLine":268,"endColumn":78,"suggestions":[{"desc":"Update the dependencies array to be: [editor]","fix":{"range":[10001,10071],"text":"[editor]"}}]},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useCallback\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":382,"column":31,"nodeType":"Identifier","endLine":382,"endColumn":42},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useCallback\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":388,"column":32,"nodeType":"Identifier","endLine":388,"endColumn":43},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'doc?.permission'. Either include it or remove the dependency array.","line":1021,"column":8,"nodeType":"ArrayExpression","endLine":1021,"endColumn":21,"suggestions":[{"desc":"Update the dependencies array to be: [id, doc.id, doc?.permission]","fix":{"range":[46848,46861],"text":"[id, doc.id, doc?.permission]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'doc?.permission'. Either include it or remove the dependency array.","line":1173,"column":8,"nodeType":"ArrayExpression","endLine":1173,"endColumn":26,"suggestions":[{"desc":"Update the dependencies array to be: [editor, doc?.permission, addToast]","fix":{"range":[52040,52058],"text":"[editor, doc?.permission, addToast]"}}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEditor, EditorContent } from '@tiptap/react';\r\nimport StarterKit from '@tiptap/starter-kit';\r\nimport { Placeholder } from '@tiptap/extension-placeholder';\r\nimport { TextStyle } from '@tiptap/extension-text-style';\r\nimport { Color } from '@tiptap/extension-color';\r\nimport { Highlight } from '@tiptap/extension-highlight';\r\nimport { FontFamily } from '@tiptap/extension-font-family';\r\nimport { TextAlign } from '@tiptap/extension-text-align';\r\nimport { ResizableImage } from './extensions/ResizableImage';\r\nimport { Extension } from '@tiptap/core';\r\nimport { useEffect, useState, useMemo, useCallback, memo, useRef } from 'react';\r\n\r\nconst FontSize = Extension.create({\r\n    name: 'fontSize',\r\n    addOptions() {\r\n        return {\r\n            types: ['textStyle'],\r\n        };\r\n    },\r\n    addGlobalAttributes() {\r\n        return [\r\n            {\r\n                types: this.options.types,\r\n                attributes: {\r\n                    fontSize: {\r\n                        default: '12',\r\n                        parseHTML: element => element.style.fontSize.replace('pt', '') || '12',\r\n                        renderHTML: attributes => {\r\n                            if (!attributes.fontSize || attributes.fontSize === '12') {\r\n                                return {\r\n                                    style: 'font-size: 12pt',\r\n                                };\r\n                            }\r\n                            return {\r\n                                style: `font-size: ${attributes.fontSize}pt`,\r\n                            };\r\n                        },\r\n                    },\r\n                },\r\n            },\r\n        ];\r\n    },\r\n    addCommands() {\r\n        return {\r\n            setFontSize: fontSize => ({ chain }) => {\r\n                return chain()\r\n                    .setMark('textStyle', { fontSize })\r\n                    .run();\r\n            },\r\n            unsetFontSize: () => ({ chain }) => {\r\n                return chain()\r\n                    .setMark('textStyle', { fontSize: null })\r\n                    .removeEmptyTextStyle()\r\n                    .run();\r\n            },\r\n        };\r\n    },\r\n});\r\n\r\nconst LineHeight = Extension.create({\r\n    name: 'lineHeight',\r\n    addOptions() {\r\n        return {\r\n            types: ['paragraph', 'heading'],\r\n            defaultLineHeight: '1.5',\r\n        };\r\n    },\r\n    addGlobalAttributes() {\r\n        return [\r\n            {\r\n                types: this.options.types,\r\n                attributes: {\r\n                    lineHeight: {\r\n                        default: this.options.defaultLineHeight,\r\n                        parseHTML: element => element.style.lineHeight || this.options.defaultLineHeight,\r\n                        renderHTML: attributes => {\r\n                            if (!attributes.lineHeight) {\r\n                                return {};\r\n                            }\r\n                            return {\r\n                                style: `line-height: ${attributes.lineHeight}`,\r\n                            };\r\n                        },\r\n                    },\r\n                },\r\n            },\r\n        ];\r\n    },\r\n    addCommands() {\r\n        return {\r\n            setLineHeight: lineHeight => ({ commands }) => {\r\n                return this.options.types.every(type => commands.updateAttributes(type, { lineHeight }));\r\n            },\r\n            unsetLineHeight: () => ({ commands }) => {\r\n                return this.options.types.every(type => commands.resetAttributes(type, 'lineHeight'));\r\n            },\r\n        };\r\n    },\r\n});\r\n\r\n// Import list extensions to extend them\r\nimport BulletList from '@tiptap/extension-bullet-list';\r\nimport OrderedList from '@tiptap/extension-ordered-list';\r\nimport ListItem from '@tiptap/extension-list-item';\r\n\r\nconst CustomBulletList = BulletList.extend({\r\n    addAttributes() {\r\n        return {\r\n            ...this.parent?.(),\r\n            listStyleType: {\r\n                default: 'disc',\r\n                parseHTML: element => element.getAttribute('data-list-style-type'),\r\n                renderHTML: attributes => ({\r\n                    'data-list-style-type': attributes.listStyleType,\r\n                    style: `list-style-type: ${attributes.listStyleType}`,\r\n                }),\r\n            },\r\n        };\r\n    },\r\n});\r\n\r\nconst CustomOrderedList = OrderedList.extend({\r\n    addAttributes() {\r\n        return {\r\n            ...this.parent?.(),\r\n            listStyleType: {\r\n                default: 'decimal',\r\n                parseHTML: element => element.getAttribute('data-list-style-type'),\r\n                renderHTML: attributes => ({\r\n                    'data-list-style-type': attributes.listStyleType,\r\n                    style: `list-style-type: ${attributes.listStyleType}`,\r\n                }),\r\n            },\r\n        };\r\n    },\r\n});\r\n\r\nimport { Button } from '../../components/ui/Button';\r\nimport {\r\n    ArrowLeft,\r\n    Save,\r\n    Download,\r\n    Wand2,\r\n    Bold,\r\n    Italic,\r\n    Underline as UnderlineIcon,\r\n    List,\r\n    ListOrdered,\r\n    Quote,\r\n    Type,\r\n    Heading1,\r\n    Heading2,\r\n    Heading3,\r\n    Undo,\r\n    Redo,\r\n    Loader2,\r\n    CheckCircle,\r\n    MoreHorizontal,\r\n    FileText,\r\n    BarChart3,\r\n    Sparkles,\r\n    Settings,\r\n    Trash2,\r\n    Clock,\r\n    AlignLeft,\r\n    AlignCenter,\r\n    AlignRight,\r\n    AlignJustify,\r\n    Palette,\r\n    Highlighter,\r\n    Type as FontIcon,\r\n    ChevronDown,\r\n    Eraser,\r\n    Layout,\r\n    ImageIcon,\r\n} from 'lucide-react';\r\nimport { Link, useParams, useNavigate, useLocation } from 'react-router-dom';\r\n\r\nimport { cn } from '../../lib/utils';\r\nimport { useToast } from '../../context/ToastContext';\r\nimport { DiagnosticReport } from '../../components/modals/DiagnosticReport';\r\nimport { EDITOR_CONFIG } from './editorConfig';\r\nimport { Pagination } from './extensions/Pagination';\r\nimport './Editor.css';\r\nimport { ColorPicker } from '../../components/ui/ColorPicker';\r\nimport { exportToPDF, exportToWord } from './lib/exportUtils';\r\nimport { getDocument, updateDocument, autoSaveDocument, deleteDocument, permanentlyDeleteDocument } from '../../services/documentsService';\r\nimport { upgradeDocument } from '../../services/aiService';\r\nimport { DocumentSettingsModal } from '../../components/modals/DocumentSettingsModal';\r\nimport { CitationModal } from '../../components/modals/CitationModal';\r\n\r\n// Memoized MenuBar component to prevent unnecessary re-renders\r\nconst MenuBar = memo(({ editor, zoom, setZoom, onImageUpload, onCitationClick, imageInputRef, editorStateToken }) => {\r\n    const [showFontFamily, setShowFontFamily] = useState(false);\r\n    const [showHeadings, setShowHeadings] = useState(false);\r\n    const [showLineHeight, setShowLineHeight] = useState(false);\r\n    const [showPageSetup, setShowPageSetup] = useState(false);\r\n    const [showTextColor, setShowTextColor] = useState(false);\r\n    const [showHighlightColor, setShowHighlightColor] = useState(false);\r\n    const [showImageOptions, setShowImageOptions] = useState(false);\r\n    const [showBulletDropdown, setShowBulletDropdown] = useState(false);\r\n    const [showOrderedDropdown, setShowOrderedDropdown] = useState(false);\r\n\r\n    // Memoize static data\r\n    const lineHeights = useMemo(() => [\r\n        { label: 'Single', value: '1.0' },\r\n        { label: '1.15', value: '1.15' },\r\n        { label: '1.5', value: '1.5' },\r\n        { label: 'Double', value: '2.0' },\r\n    ], []);\r\n\r\n    const fonts = useMemo(() => [\r\n        { name: 'Arial', value: 'Arial' },\r\n        { name: 'Calibri', value: 'Calibri' }, // System font\r\n        { name: 'Cambria', value: 'Cambria' }, // System font\r\n        { name: 'Consolas', value: 'Consolas' }, // System font\r\n        { name: 'Courier New', value: 'Courier New' },\r\n        { name: 'EB Garamond', value: 'EB Garamond' }, // Google Font\r\n        { name: 'Georgia', value: 'Georgia' },\r\n        { name: 'Lora', value: 'Lora' }, // Google Font\r\n        { name: 'Merriweather', value: 'Merriweather' }, // Google Font\r\n        { name: 'Montserrat', value: 'Montserrat' }, // Google Font\r\n        { name: 'Open Sans', value: 'Open Sans' }, // Google Font\r\n        { name: 'Roboto', value: 'Roboto' }, // Google Font\r\n        { name: 'Roboto Mono', value: 'Roboto Mono' }, // Google Font\r\n        { name: 'Source Code Pro', value: 'Source Code Pro' }, // Google Font\r\n        { name: 'Times New Roman', value: 'Times New Roman' },\r\n    ], []);\r\n\r\n    const headingLevels = useMemo(() => [\r\n        { label: 'Normal Text', level: 0 },\r\n        { label: 'Heading 1', level: 1 },\r\n        { label: 'Heading 2', level: 2 },\r\n        { label: 'Heading 3', level: 3 },\r\n    ], []);\r\n\r\n    const bulletStyles = useMemo(() => [\r\n        { label: 'Default', value: 'disc', icon: 'â—' },\r\n        { label: 'Hollow', value: 'circle', icon: 'â—‹' },\r\n        { label: 'Square', value: 'square', icon: 'â– ' },\r\n        { label: 'Dash', value: 'none', icon: 'â€”' },\r\n    ], []);\r\n\r\n    const numberedStyles = useMemo(() => [\r\n        { label: '1. 2. 3.', value: 'decimal', icon: '1.' },\r\n        { label: 'a. b. c.', value: 'lower-alpha', icon: 'a.' },\r\n        { label: 'i. ii. iii.', value: 'lower-roman', icon: 'i.' },\r\n    ], []);\r\n\r\n    // Helper for Font Size Clamping\r\n    const clampFontSize = (val) => {\r\n        const size = parseInt(val);\r\n        if (isNaN(size)) return 12;\r\n        return Math.min(Math.max(size, 6), 72);\r\n    };\r\n\r\n    // Memoize current font size to avoid recalculation\r\n    // Memoize current font size to avoid recalculation, handling both selection and stored marks\r\n    const currentFontSize = useMemo(() => {\r\n        if (!editor) return '12';\r\n        // Check for stored marks first (pending style)\r\n        const storedMarks = editor.getAttributes('textStyle');\r\n        if (storedMarks && storedMarks.fontSize) {\r\n            return storedMarks.fontSize;\r\n        }\r\n        // Fallback to selection attributes\r\n        return editor.getAttributes('textStyle').fontSize || '12';\r\n    }, [editor?.state.selection, editor?.state.storedMarks, editorStateToken]);\r\n\r\n    // Optimize formatting callbacks with useCallback\r\n    const updateFontSize = useCallback((newSize) => {\r\n        if (!editor || !newSize) return;\r\n        const clamped = clampFontSize(newSize);\r\n        editor.chain().focus().setFontSize(clamped.toString()).run();\r\n    }, [editor]);\r\n\r\n    const incrementFontSize = useCallback(() => {\r\n        if (!editor) return;\r\n        // Logic to toggle stored mark if empty selection is missing here in simple implementation\r\n        // But setFontSize chain helper usually handles it.\r\n        const size = parseInt(currentFontSize) || 12;\r\n        updateFontSize((size + 1).toString());\r\n    }, [currentFontSize, updateFontSize, editor]);\r\n\r\n    const decrementFontSize = useCallback(() => {\r\n        if (!editor) return;\r\n        const size = parseInt(currentFontSize) || 12;\r\n        if (size > 1) {\r\n            updateFontSize((size - 1).toString());\r\n        }\r\n    }, [currentFontSize, updateFontSize, editor]);\r\n\r\n    const addColor = useCallback((color) => {\r\n        if (!editor) return;\r\n        editor.chain().focus().setColor(color).run();\r\n        setShowTextColor(false);\r\n    }, [editor]);\r\n\r\n    const addHighlight = useCallback((color) => {\r\n        if (!editor) return;\r\n        if (color === null) {\r\n            editor.chain().focus().unsetHighlight().run();\r\n        } else {\r\n            editor.chain().focus().toggleHighlight({ color }).run();\r\n        }\r\n        setShowHighlightColor(false);\r\n    }, [editor]);\r\n\r\n    // Memoize formatting button handlers\r\n    const handleBold = useCallback(() => editor?.chain().focus().toggleBold().run(), [editor]);\r\n    const handleItalic = useCallback(() => editor?.chain().focus().toggleItalic().run(), [editor]);\r\n    const handleUnderline = useCallback(() => editor?.chain().focus().toggleUnderline().run(), [editor]);\r\n    const handleUndo = useCallback(() => editor?.chain().focus().undo().run(), [editor]);\r\n    const handleRedo = useCallback(() => editor?.chain().focus().redo().run(), [editor]);\r\n\r\n    // Memoize heading handlers\r\n    const handleHeading = useCallback((level) => {\r\n        if (!editor) return;\r\n        if (level === 0) {\r\n            editor.chain().focus().setParagraph().run();\r\n        } else {\r\n            editor.chain().focus().toggleHeading({ level }).run();\r\n        }\r\n        setShowHeadings(false);\r\n    }, [editor]);\r\n\r\n    // Memoize font family handler\r\n    const handleFontFamily = useCallback((value) => {\r\n        if (!editor) return;\r\n        editor.chain().focus().setFontFamily(value).run();\r\n        setShowFontFamily(false);\r\n    }, [editor]);\r\n\r\n    // Memoize line height handler\r\n    const handleLineHeight = useCallback((value) => {\r\n        if (!editor) return;\r\n        editor.chain().focus().setLineHeight(value).run();\r\n        setShowLineHeight(false);\r\n    }, [editor]);\r\n\r\n    const handleImageUrl = useCallback(() => {\r\n        const url = window.prompt('Enter image URL');\r\n        if (url) {\r\n            editor.chain().focus().setImage({ src: url }).run();\r\n        }\r\n        setShowImageOptions(false);\r\n    }, [editor]);\r\n\r\n    // Memoize alignment handlers\r\n    const handleAlign = useCallback((align) => {\r\n        if (!editor) return;\r\n        editor.chain().focus().setTextAlign(align).run();\r\n    }, [editor]);\r\n\r\n    // Memoize list handlers\r\n    const handleBulletList = useCallback(() => editor?.chain().focus().toggleBulletList().run(), [editor]);\r\n    const handleOrderedList = useCallback(() => editor?.chain().focus().toggleOrderedList().run(), [editor]);\r\n\r\n    // Memoize clear formatting\r\n    const handleClearFormatting = useCallback(() => {\r\n        if (!editor) return;\r\n        editor.chain().focus().unsetAllMarks().clearNodes().run();\r\n    }, [editor]);\r\n\r\n    if (!editor) {\r\n        return null;\r\n    }\r\n\r\n    // Get active states (memoized)\r\n    const isBold = editor.isActive('bold');\r\n    const isItalic = editor.isActive('italic');\r\n    const isUnderline = editor.isActive('underline');\r\n    const canUndo = editor.can().undo();\r\n    const canRedo = editor.can().redo();\r\n    const activeHeading = editor.isActive('heading', { level: 1 }) ? 1 :\r\n        editor.isActive('heading', { level: 2 }) ? 2 :\r\n            editor.isActive('heading', { level: 3 }) ? 3 : 0;\r\n    const activeFontFamily = fonts.find(f => editor.isActive('textStyle', { fontFamily: f.value }))?.value || '';\r\n    const activeLineHeight = editor.getAttributes('paragraph').lineHeight || '1.5';\r\n    const textAlign = editor.getAttributes('textAlign') || 'left';\r\n\r\n    const handleBulletStyle = useCallback((style) => {\r\n        if (!editor) return;\r\n        editor.chain().focus().toggleBulletList().updateAttributes('bulletList', { listStyleType: style }).run();\r\n        setShowBulletDropdown(false);\r\n    }, [editor]);\r\n\r\n    const handleOrderedStyle = useCallback((style) => {\r\n        if (!editor) return;\r\n        editor.chain().focus().toggleOrderedList().updateAttributes('orderedList', { listStyleType: style }).run();\r\n        setShowOrderedDropdown(false);\r\n    }, [editor]);\r\n\r\n    return (\r\n        <div className=\"flex flex-wrap items-center gap-0.5 px-3 py-1.5 bg-slate-50 border-b border-slate-200 sticky top-0 z-30\">\r\n            {/* History */}\r\n            <div className=\"flex items-center\">\r\n                <button\r\n                    onClick={handleUndo}\r\n                    disabled={!canUndo}\r\n                    className=\"p-1.5 rounded hover:bg-slate-200 text-slate-600 disabled:opacity-30 transition-colors\"\r\n                    title=\"Undo\"\r\n                >\r\n                    <Undo className=\"h-4 w-4\" />\r\n                </button>\r\n                <button\r\n                    onClick={handleRedo}\r\n                    disabled={!canRedo}\r\n                    className=\"p-1.5 rounded hover:bg-slate-200 text-slate-600 disabled:opacity-30 transition-colors\"\r\n                    title=\"Redo\"\r\n                >\r\n                    <Redo className=\"h-4 w-4\" />\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"w-px h-6 bg-slate-200 mx-1\" />\r\n\r\n            {/* Headings */}\r\n            <div className=\"relative group\">\r\n                <button\r\n                    onClick={() => setShowHeadings(!showHeadings)}\r\n                    className=\"flex items-center gap-1 px-2 py-1.5 rounded hover:bg-slate-200 text-sm text-slate-700 min-w-[100px] transition-colors\"\r\n                >\r\n                    {headingLevels.find(h => h.level === activeHeading)?.label || 'Normal Text'}\r\n                    <ChevronDown className=\"h-3 w-3\" />\r\n                </button>\r\n                {showHeadings && (\r\n                    <>\r\n                        <div className=\"fixed inset-0 z-39\" onClick={() => setShowHeadings(false)} />\r\n                        <div className=\"absolute top-full left-0 mt-1 w-40 bg-white shadow-lg border border-slate-200 rounded-md py-1 z-40\">\r\n                            {headingLevels.map(h => (\r\n                                <button\r\n                                    key={h.level}\r\n                                    onClick={() => handleHeading(h.level)}\r\n                                    className={cn(\r\n                                        \"w-full px-3 py-1.5 text-left text-sm hover:bg-slate-100 transition-colors\",\r\n                                        activeHeading === h.level && \"text-indigo-600 bg-indigo-50 font-medium\"\r\n                                    )}\r\n                                >\r\n                                    {h.label}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </>\r\n                )}\r\n            </div>\r\n\r\n            <div className=\"w-px h-6 bg-slate-200 mx-1\" />\r\n\r\n            {/* Font Family */}\r\n            <div className=\"relative group\">\r\n                <button\r\n                    onClick={() => setShowFontFamily(!showFontFamily)}\r\n                    className=\"flex items-center gap-1 px-2 py-1.5 rounded hover:bg-slate-200 text-sm text-slate-700 min-w-[100px] transition-colors\"\r\n                >\r\n                    <span className=\"truncate\">{fonts.find(f => f.value === activeFontFamily)?.name || 'Arial'}</span>\r\n                    <ChevronDown className=\"h-3 w-3\" />\r\n                </button>\r\n                {showFontFamily && (\r\n                    <>\r\n                        <div className=\"fixed inset-0 z-39\" onClick={() => setShowFontFamily(false)} />\r\n                        <div className=\"absolute top-full left-0 mt-1 w-40 bg-white shadow-lg border border-slate-200 rounded-md py-1 z-40\">\r\n                            {fonts.map(f => (\r\n                                <button\r\n                                    key={f.name}\r\n                                    onClick={() => handleFontFamily(f.value)}\r\n                                    style={{ fontFamily: f.value }}\r\n                                    className={cn(\r\n                                        \"w-full px-3 py-1.5 text-left text-sm hover:bg-slate-100 transition-colors\",\r\n                                        activeFontFamily === f.value && \"text-indigo-600 bg-indigo-50 font-medium\"\r\n                                    )}\r\n                                >\r\n                                    {f.name}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </>\r\n                )}\r\n            </div>\r\n\r\n            <div className=\"w-px h-6 bg-slate-200 mx-1\" />\r\n\r\n            {/* Font Size */}\r\n            <div className=\"flex items-center gap-1\">\r\n                <button\r\n                    onClick={decrementFontSize}\r\n                    className=\"p-1.5 rounded hover:bg-slate-200 text-slate-600 transition-colors\"\r\n                    title=\"Decrease font size\"\r\n                >\r\n                    <span className=\"text-lg font-bold\">-</span>\r\n                </button>\r\n                <input\r\n                    type=\"text\"\r\n                    value={currentFontSize}\r\n                    onChange={(e) => {\r\n                        const value = e.target.value.replace(/\\D/g, '');\r\n                        if (value) updateFontSize(value);\r\n                    }}\r\n                    className=\"w-10 h-7 text-center text-sm border border-slate-200 rounded hover:border-slate-400 focus:outline-none focus:ring-1 focus:ring-indigo-500 transition-colors\"\r\n                />\r\n                <button\r\n                    onClick={incrementFontSize}\r\n                    className=\"p-1.5 rounded hover:bg-slate-200 text-slate-600 transition-colors\"\r\n                    title=\"Increase font size\"\r\n                >\r\n                    <span className=\"text-lg font-bold\">+</span>\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"w-px h-6 bg-slate-200 mx-1\" />\r\n\r\n            {/* Basic Formatting */}\r\n            <div className=\"flex items-center gap-0.5\">\r\n                <button\r\n                    onClick={handleBold}\r\n                    className={cn(\r\n                        \"p-1.5 rounded hover:bg-slate-200 text-slate-600 transition-colors\",\r\n                        isBold && \"bg-indigo-100 text-indigo-700 hover:bg-indigo-200\"\r\n                    )}\r\n                    title=\"Bold (Ctrl+B)\"\r\n                >\r\n                    <Bold className=\"h-4 w-4\" />\r\n                </button>\r\n                <button\r\n                    onClick={handleItalic}\r\n                    className={cn(\r\n                        \"p-1.5 rounded hover:bg-slate-200 text-slate-600 transition-colors\",\r\n                        isItalic && \"bg-indigo-100 text-indigo-700 hover:bg-indigo-200\"\r\n                    )}\r\n                    title=\"Italic (Ctrl+I)\"\r\n                >\r\n                    <Italic className=\"h-4 w-4\" />\r\n                </button>\r\n                <button\r\n                    onClick={handleUnderline}\r\n                    className={cn(\r\n                        \"p-1.5 rounded hover:bg-slate-200 text-slate-600 transition-colors\",\r\n                        isUnderline && \"bg-indigo-100 text-indigo-700 hover:bg-indigo-200\"\r\n                    )}\r\n                    title=\"Underline (Ctrl+U)\"\r\n                >\r\n                    <UnderlineIcon className=\"h-4 w-4\" />\r\n                </button>\r\n\r\n                {/* Text Color */}\r\n                <div className=\"relative group\">\r\n                    <button\r\n                        onClick={() => setShowTextColor(!showTextColor)}\r\n                        className=\"flex items-center gap-1 p-1.5 rounded hover:bg-slate-200 text-slate-600 transition-colors\"\r\n                        title=\"Text Color\"\r\n                    >\r\n                        <div className=\"flex flex-col items-center\">\r\n                            <span className=\"font-serif font-bold text-sm leading-none\">A</span>\r\n                            <div className=\"h-1 w-4 mt-0.5\" style={{ backgroundColor: editor.getAttributes('textStyle').color || '#000000' }} />\r\n                        </div>\r\n                        <ChevronDown className=\"h-3 w-3 ml-0.5\" />\r\n                    </button>\r\n                    {showTextColor && (\r\n                        <>\r\n                            <div className=\"fixed inset-0 z-39\" onClick={() => setShowTextColor(false)} />\r\n                            <div className=\"absolute top-full left-0 mt-1 bg-white shadow-lg border border-slate-200 rounded-md py-1 z-40\">\r\n                                <ColorPicker\r\n                                    value={editor.getAttributes('textStyle').color || '#000000'}\r\n                                    onChange={addColor}\r\n                                    onClose={() => setShowTextColor(false)}\r\n                                />\r\n                            </div>\r\n                        </>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Highlight Color */}\r\n                <div className=\"relative group\">\r\n                    <button\r\n                        onClick={() => setShowHighlightColor(!showHighlightColor)}\r\n                        className=\"flex items-center gap-1 p-1.5 rounded hover:bg-slate-200 text-slate-600 transition-colors\"\r\n                        title=\"Highlight Color\"\r\n                    >\r\n                        <div className=\"flex flex-col items-center\">\r\n                            <Highlighter className=\"h-3.5 w-3.5\" />\r\n                            <div className=\"h-1 w-4 mt-0.5\" style={{ backgroundColor: editor.getAttributes('highlight').color || 'transparent' }} />\r\n                        </div>\r\n                        <ChevronDown className=\"h-3 w-3 ml-0.5\" />\r\n                    </button>\r\n                    {showHighlightColor && (\r\n                        <>\r\n                            <div className=\"fixed inset-0 z-39\" onClick={() => setShowHighlightColor(false)} />\r\n                            <div className=\"absolute top-full left-0 mt-1 bg-white shadow-lg border border-slate-200 rounded-md py-1 z-40\">\r\n                                <ColorPicker\r\n                                    type=\"highlight\"\r\n                                    value={editor.getAttributes('highlight').color}\r\n                                    onChange={addHighlight}\r\n                                    onClose={() => setShowHighlightColor(false)}\r\n                                />\r\n                            </div>\r\n                        </>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"w-px h-6 bg-slate-200 mx-1\" />\r\n\r\n            {/* Alignment */}\r\n            <div className=\"flex items-center gap-0.5\">\r\n                <button\r\n                    onClick={() => handleAlign('left')}\r\n                    className={cn(\r\n                        \"p-1.5 rounded hover:bg-slate-200 text-slate-600 transition-colors\",\r\n                        textAlign === 'left' && \"bg-indigo-100 text-indigo-700 hover:bg-indigo-200\"\r\n                    )}\r\n                    title=\"Align Left\"\r\n                >\r\n                    <AlignLeft className=\"h-4 w-4\" />\r\n                </button>\r\n                <button\r\n                    onClick={() => handleAlign('center')}\r\n                    className={cn(\r\n                        \"p-1.5 rounded hover:bg-slate-200 text-slate-600 transition-colors\",\r\n                        textAlign === 'center' && \"bg-indigo-100 text-indigo-700 hover:bg-indigo-200\"\r\n                    )}\r\n                    title=\"Align Center\"\r\n                >\r\n                    <AlignCenter className=\"h-4 w-4\" />\r\n                </button>\r\n                <button\r\n                    onClick={() => handleAlign('right')}\r\n                    className={cn(\r\n                        \"p-1.5 rounded hover:bg-slate-200 text-slate-600 transition-colors\",\r\n                        textAlign === 'right' && \"bg-indigo-100 text-indigo-700 hover:bg-indigo-200\"\r\n                    )}\r\n                    title=\"Align Right\"\r\n                >\r\n                    <AlignRight className=\"h-4 w-4\" />\r\n                </button>\r\n                <button\r\n                    onClick={() => handleAlign('justify')}\r\n                    className={cn(\r\n                        \"p-1.5 rounded hover:bg-slate-200 text-slate-600 transition-colors\",\r\n                        textAlign === 'justify' && \"bg-indigo-100 text-indigo-700 hover:bg-indigo-200\"\r\n                    )}\r\n                    title=\"Justify\"\r\n                >\r\n                    <AlignJustify className=\"h-4 w-4\" />\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"w-px h-6 bg-slate-200 mx-1\" />\r\n\r\n            {/* Lists */}\r\n            <div className=\"flex items-center gap-0.5\">\r\n                {/* Bullet List Dropdown */}\r\n                <div className=\"relative group\">\r\n                    <div className=\"flex items-center\">\r\n                        <button\r\n                            onClick={handleBulletList}\r\n                            className={cn(\r\n                                \"p-1.5 rounded-l hover:bg-slate-200 text-slate-600 transition-colors border-r border-slate-200\",\r\n                                editor.isActive('bulletList') && \"bg-indigo-100 text-indigo-700 hover:bg-indigo-200\"\r\n                            )}\r\n                            title=\"Bullet List\"\r\n                        >\r\n                            <List className=\"h-4 w-4\" />\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setShowBulletDropdown(!showBulletDropdown)}\r\n                            className={cn(\r\n                                \"p-1.5 px-1 rounded-r hover:bg-slate-200 text-slate-600 transition-colors\",\r\n                                editor.isActive('bulletList') && \"bg-indigo-100 text-indigo-700 hover:bg-indigo-200\"\r\n                            )}\r\n                        >\r\n                            <ChevronDown className=\"h-3 w-3\" />\r\n                        </button>\r\n                    </div>\r\n                    {showBulletDropdown && (\r\n                        <>\r\n                            <div className=\"fixed inset-0 z-39\" onClick={() => setShowBulletDropdown(false)} />\r\n                            <div className=\"absolute top-full left-0 mt-1 w-32 bg-white shadow-lg border border-slate-200 rounded-md py-1 z-40\">\r\n                                {bulletStyles.map(s => (\r\n                                    <button\r\n                                        key={s.value}\r\n                                        onClick={() => handleBulletStyle(s.value)}\r\n                                        className={cn(\r\n                                            \"w-full px-3 py-1.5 text-left text-sm hover:bg-slate-100 flex items-center gap-2 transition-colors\",\r\n                                            editor.isActive('bulletList', { listStyleType: s.value }) && \"text-indigo-600 bg-indigo-50 font-medium\"\r\n                                        )}\r\n                                    >\r\n                                        <span className=\"text-lg leading-none\">{s.icon}</span>\r\n                                        {s.label}\r\n                                    </button>\r\n                                ))}\r\n                            </div>\r\n                        </>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Ordered List Dropdown */}\r\n                <div className=\"relative group ml-0.5\">\r\n                    <div className=\"flex items-center\">\r\n                        <button\r\n                            onClick={handleOrderedList}\r\n                            className={cn(\r\n                                \"p-1.5 rounded-l hover:bg-slate-200 text-slate-600 transition-colors border-r border-slate-200\",\r\n                                editor.isActive('orderedList') && \"bg-indigo-100 text-indigo-700 hover:bg-indigo-200\"\r\n                            )}\r\n                            title=\"Numbered List\"\r\n                        >\r\n                            <ListOrdered className=\"h-4 w-4\" />\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setShowOrderedDropdown(!showOrderedDropdown)}\r\n                            className={cn(\r\n                                \"p-1.5 px-1 rounded-r hover:bg-slate-200 text-slate-600 transition-colors\",\r\n                                editor.isActive('orderedList') && \"bg-indigo-100 text-indigo-700 hover:bg-indigo-200\"\r\n                            )}\r\n                        >\r\n                            <ChevronDown className=\"h-3 w-3\" />\r\n                        </button>\r\n                    </div>\r\n                    {showOrderedDropdown && (\r\n                        <>\r\n                            <div className=\"fixed inset-0 z-39\" onClick={() => setShowOrderedDropdown(false)} />\r\n                            <div className=\"absolute top-full left-0 mt-1 w-32 bg-white shadow-lg border border-slate-200 rounded-md py-1 z-40\">\r\n                                {numberedStyles.map(s => (\r\n                                    <button\r\n                                        key={s.value}\r\n                                        onClick={() => handleOrderedStyle(s.value)}\r\n                                        className={cn(\r\n                                            \"w-full px-3 py-1.5 text-left text-sm hover:bg-slate-100 flex items-center gap-2 transition-colors\",\r\n                                            editor.isActive('orderedList', { listStyleType: s.value }) && \"text-indigo-600 bg-indigo-50 font-medium\"\r\n                                        )}\r\n                                    >\r\n                                        <span className=\"text-sm font-bold min-w-[20px]\">{s.icon}</span>\r\n                                        {s.label}\r\n                                    </button>\r\n                                ))}\r\n                            </div>\r\n                        </>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"w-px h-6 bg-slate-200 mx-1\" />\r\n\r\n            {/* AI Citation Assistant */}\r\n            <button\r\n                onClick={onCitationClick}\r\n                className=\"p-1.5 rounded hover:bg-indigo-100 text-indigo-600 hover:text-indigo-700 transition-colors\"\r\n                title=\"AI Citation Assistant\"\r\n            >\r\n                <Quote className=\"h-4 w-4\" />\r\n            </button>\r\n\r\n            <div className=\"w-px h-6 bg-slate-200 mx-1\" />\r\n\r\n            {/* Line Spacing */}\r\n            <div className=\"relative group\">\r\n                <button\r\n                    onClick={() => setShowLineHeight(!showLineHeight)}\r\n                    className=\"p-1.5 rounded hover:bg-slate-200 text-slate-600 transition-colors\"\r\n                    title=\"Line spacing\"\r\n                >\r\n                    <div className=\"flex flex-col items-center leading-[0.5]\">\r\n                        <span className=\"text-[10px] font-bold\">---</span>\r\n                        <span className=\"text-[10px] font-bold\">---</span>\r\n                    </div>\r\n                </button>\r\n                {showLineHeight && (\r\n                    <>\r\n                        <div className=\"fixed inset-0 z-39\" onClick={() => setShowLineHeight(false)} />\r\n                        <div className=\"absolute top-full left-0 mt-1 w-32 bg-white shadow-lg border border-slate-200 rounded-md py-1 z-40\">\r\n                            {lineHeights.map(lh => (\r\n                                <button\r\n                                    key={lh.value}\r\n                                    onClick={() => handleLineHeight(lh.value)}\r\n                                    className={cn(\r\n                                        \"w-full px-3 py-1.5 text-left text-sm hover:bg-slate-100 transition-colors\",\r\n                                        activeLineHeight === lh.value && \"text-indigo-600 bg-indigo-50 font-medium\"\r\n                                    )}\r\n                                >\r\n                                    {lh.label}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </>\r\n                )}\r\n            </div>\r\n\r\n            <div className=\"w-px h-6 bg-slate-200 mx-1\" />\r\n\r\n            {/* Add Image */}\r\n            <div className=\"relative group\">\r\n                <input\r\n                    ref={imageInputRef}\r\n                    type=\"file\"\r\n                    accept=\"image/*\"\r\n                    onChange={onImageUpload}\r\n                    className=\"hidden\"\r\n                />\r\n                <button\r\n                    onClick={() => setShowImageOptions(!showImageOptions)}\r\n                    className=\"flex items-center gap-1 p-1.5 rounded hover:bg-slate-200 text-slate-600 transition-colors\"\r\n                    title=\"Insert Image\"\r\n                >\r\n                    <ImageIcon className=\"h-4 w-4\" />\r\n                    <ChevronDown className=\"h-3 w-3\" />\r\n                </button>\r\n                {showImageOptions && (\r\n                    <>\r\n                        <div className=\"fixed inset-0 z-39\" onClick={() => setShowImageOptions(false)} />\r\n                        <div className=\"absolute top-full left-0 mt-1 w-40 bg-white shadow-lg border border-slate-200 rounded-md py-1 z-40\">\r\n                            <button\r\n                                onClick={() => {\r\n                                    imageInputRef.current?.click();\r\n                                    setShowImageOptions(false);\r\n                                }}\r\n                                className=\"w-full px-3 py-1.5 text-left text-sm hover:bg-slate-100 transition-colors\"\r\n                            >\r\n                                Upload from Computer\r\n                            </button>\r\n                            <button\r\n                                onClick={handleImageUrl}\r\n                                className=\"w-full px-3 py-1.5 text-left text-sm hover:bg-slate-100 transition-colors\"\r\n                            >\r\n                                By URL\r\n                            </button>\r\n                        </div>\r\n                    </>\r\n                )}\r\n            </div>\r\n\r\n            <div className=\"w-px h-6 bg-slate-200 mx-1\" />\r\n\r\n            {/* Clear Formatting */}\r\n            <button\r\n                onClick={handleClearFormatting}\r\n                className=\"p-1.5 rounded hover:bg-slate-200 text-slate-600 transition-colors\"\r\n                title=\"Clear Formatting\"\r\n            >\r\n                <Eraser className=\"h-4 w-4\" />\r\n            </button>\r\n\r\n            {/* Zoom Controls */}\r\n            <div className=\"flex items-center gap-1 ml-auto border-l border-slate-200 pl-2\">\r\n                <button\r\n                    onClick={() => {\r\n                        const currentIndex = EDITOR_CONFIG.ZOOM_LEVELS.findIndex(z => z.value === zoom);\r\n                        if (currentIndex > 0) setZoom(EDITOR_CONFIG.ZOOM_LEVELS[currentIndex - 1].value);\r\n                    }}\r\n                    className=\"p-1.5 rounded hover:bg-slate-200 text-slate-600 transition-colors\"\r\n                    title=\"Zoom Out\"\r\n                >\r\n                    <span className=\"text-lg font-bold\">-</span>\r\n                </button>\r\n                <select\r\n                    value={zoom}\r\n                    onChange={(e) => setZoom(parseFloat(e.target.value))}\r\n                    className=\"appearance-none bg-transparent hover:bg-slate-200 px-2 py-1 rounded text-sm font-medium text-slate-600 focus:outline-none cursor-pointer transition-colors\"\r\n                >\r\n                    {EDITOR_CONFIG.ZOOM_LEVELS.map(z => (\r\n                        <option key={z.value} value={z.value}>{z.label}</option>\r\n                    ))}\r\n                </select>\r\n                <button\r\n                    onClick={() => {\r\n                        const currentIndex = EDITOR_CONFIG.ZOOM_LEVELS.findIndex(z => z.value === zoom);\r\n                        if (currentIndex < EDITOR_CONFIG.ZOOM_LEVELS.length - 1) setZoom(EDITOR_CONFIG.ZOOM_LEVELS[currentIndex + 1].value);\r\n                    }}\r\n                    className=\"p-1.5 rounded hover:bg-slate-200 text-slate-600 transition-colors\"\r\n                    title=\"Zoom In\"\r\n                >\r\n                    <span className=\"text-lg font-bold\">+</span>\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"w-px h-6 bg-slate-200 mx-1\" />\r\n\r\n            {/* Page Setup */}\r\n            <div className=\"relative group\">\r\n                <button\r\n                    onClick={() => setShowPageSetup(!showPageSetup)}\r\n                    className=\"flex items-center gap-1.5 px-2 py-1.5 rounded hover:bg-slate-200 text-sm text-slate-700 transition-colors\"\r\n                    title=\"Page Setup\"\r\n                >\r\n                    <Layout className=\"h-4 w-4 text-slate-600\" />\r\n                    <span>Page Setup</span>\r\n                    <ChevronDown className=\"h-3 w-3\" />\r\n                </button>\r\n                {showPageSetup && (\r\n                    <>\r\n                        <div className=\"fixed inset-0 z-39\" onClick={() => setShowPageSetup(false)} />\r\n                        <div className=\"absolute top-full right-0 mt-1 w-56 bg-white shadow-xl border border-slate-200 rounded-md py-2 z-40 animate-in fade-in slide-in-from-top-1\">\r\n                            <div className=\"px-3 py-1.5 text-xs font-bold text-slate-400 uppercase\">Page Numbers</div>\r\n                            <button\r\n                                onClick={() => {\r\n                                    editor.setOptions({\r\n                                        pagination: { showPageNumbers: true, pageNumberPosition: 'footer-right' }\r\n                                    });\r\n                                    setShowPageSetup(false);\r\n                                }}\r\n                                className=\"w-full px-3 py-1.5 text-left text-sm hover:bg-slate-50 flex items-center justify-between transition-colors\"\r\n                            >\r\n                                <span>Bottom Right</span>\r\n                                <div className=\"w-2 h-2 rounded-full bg-indigo-500\" />\r\n                            </button>\r\n                            <button\r\n                                onClick={() => {\r\n                                    editor.setOptions({\r\n                                        pagination: { showPageNumbers: true, pageNumberPosition: 'footer-center' }\r\n                                    });\r\n                                    setShowPageSetup(false);\r\n                                }}\r\n                                className=\"w-full px-3 py-1.5 text-left text-sm hover:bg-slate-50 transition-colors\"\r\n                            >\r\n                                Bottom Center\r\n                            </button>\r\n                            <button\r\n                                onClick={() => {\r\n                                    editor.setOptions({\r\n                                        pagination: { showPageNumbers: true, pageNumberPosition: 'header-right' }\r\n                                    });\r\n                                    setShowPageSetup(false);\r\n                                }}\r\n                                className=\"w-full px-3 py-1.5 text-left text-sm hover:bg-slate-50 transition-colors\"\r\n                            >\r\n                                Top Right\r\n                            </button>\r\n                            <div className=\"h-px bg-slate-100 my-1\" />\r\n                            <button\r\n                                onClick={() => {\r\n                                    editor.setOptions({\r\n                                        pagination: { showPageNumbers: false }\r\n                                    });\r\n                                    setShowPageSetup(false);\r\n                                }}\r\n                                className=\"w-full px-3 py-1.5 text-left text-sm text-red-600 hover:bg-red-50 transition-colors\"\r\n                            >\r\n                                Disable Page Numbers\r\n                            </button>\r\n                        </div>\r\n                    </>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n});\r\n\r\nMenuBar.displayName = 'MenuBar';\r\n\r\nexport default function EditorPage() {\r\n    const { id } = useParams();\r\n    const location = useLocation();\r\n    const navigate = useNavigate();\r\n    const [doc, setDoc] = useState(null);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [isSaving, setIsSaving] = useState(false);\r\n    const [lastSaved, setLastSaved] = useState(null);\r\n    const [isExporting, setIsExporting] = useState(false);\r\n    const [isUpgrading, setIsUpgrading] = useState(false);\r\n    const [zoom, setZoom] = useState(1.0);\r\n    const [showReport, setShowReport] = useState(false);\r\n    const [showSettings, setShowSettings] = useState(false);\r\n    const [showDocSettings, setShowDocSettings] = useState(false);\r\n    const [showCitationModal, setShowCitationModal] = useState(false);\r\n    const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\r\n    const { addToast } = useToast();\r\n    const autoSaveTimeoutRef = useRef(null);\r\n    const editorRef = useRef(null);\r\n    const imageInputRef = useRef(null);\r\n    const [editorStateToken, setEditorStateToken] = useState(0);\r\n\r\n    // Load document\r\n    useEffect(() => {\r\n        const loadDocument = async () => {\r\n            if (id === 'new') {\r\n                const initialState = location.state || {};\r\n                setDoc({\r\n                    id: 'new',\r\n                    title: initialState.title || 'Untitled Document',\r\n                    content: initialState.content || '',\r\n                    content_html: initialState.contentHtml || '',\r\n                    academic_level: initialState.level || 'undergraduate',\r\n                    citation_style: initialState.style || 'APA 7th Edition',\r\n                    document_type: initialState.type || 'Essay',\r\n                    status: 'draft',\r\n                    word_count: 0,\r\n                });\r\n                setIsLoading(false);\r\n                return;\r\n            }\r\n\r\n            try {\r\n                const document = await getDocument(id);\r\n                setDoc(document);\r\n                setLastSaved(new Date(document.updated_at));\r\n            } catch (error) {\r\n                console.error('Error loading document:', error);\r\n                addToast('Failed to load document', 'error');\r\n                navigate('/dashboard/documents');\r\n            } finally {\r\n                setIsLoading(false);\r\n            }\r\n        };\r\n\r\n        loadDocument();\r\n    }, [id, location.state, navigate, addToast]);\r\n\r\n    // Optimized auto-save with debouncing\r\n    const handleAutoSave = useCallback(async (content, html) => {\r\n        if (id === 'new' || !doc?.id || doc?.permission === 'read') return;\r\n\r\n        setIsSaving(true);\r\n        try {\r\n            const result = await autoSaveDocument(doc.id, content, html);\r\n            setLastSaved(new Date(result.updated_at));\r\n            setDoc(prev => ({ ...prev, word_count: result.word_count }));\r\n        } catch (error) {\r\n            console.error('Auto-save failed:', error);\r\n        } finally {\r\n            setIsSaving(false);\r\n        }\r\n    }, [id, doc?.id]);\r\n\r\n    // Optimized editor configuration\r\n    const editorExtensions = useMemo(() => [\r\n        StarterKit.configure({\r\n            history: true,\r\n            bulletList: false,\r\n            orderedList: false,\r\n            listItem: false,\r\n        }),\r\n        Placeholder.configure({\r\n            placeholder: 'Start writing or paste your assignment here...',\r\n        }),\r\n        TextStyle,\r\n        Color,\r\n        Highlight.configure({ multicolor: true }),\r\n        FontFamily,\r\n        TextAlign.configure({\r\n            types: ['heading', 'paragraph'],\r\n        }),\r\n        ResizableImage,\r\n        FontSize,\r\n        LineHeight,\r\n        CustomBulletList,\r\n        CustomOrderedList,\r\n        ListItem,\r\n        Pagination.configure({\r\n            pageWidth: EDITOR_CONFIG.PAGE_WIDTH,\r\n            pageHeight: EDITOR_CONFIG.PAGE_HEIGHT,\r\n            margins: EDITOR_CONFIG.DEFAULT_MARGINS,\r\n        }),\r\n    ], []);\r\n\r\n    const editor = useEditor(\r\n        {\r\n            extensions: editorExtensions,\r\n            content: doc?.content_html || doc?.content || '',\r\n            editable: doc?.permission !== 'read',\r\n            editorProps: {\r\n                attributes: {\r\n                    class: 'focus:outline-none relative outline-none border-none shadow-none',\r\n                },\r\n            },\r\n            onUpdate: ({ editor }) => {\r\n                // Debounced auto-save - increased delay for better performance\r\n                if (autoSaveTimeoutRef.current) {\r\n                    clearTimeout(autoSaveTimeoutRef.current);\r\n                }\r\n                autoSaveTimeoutRef.current = setTimeout(() => {\r\n                    const text = editor.getText();\r\n                    const html = editor.getHTML();\r\n                    handleAutoSave(text, html);\r\n                }, 3000); // Increased to 3 seconds for better performance\r\n            },\r\n            onTransaction: () => {\r\n                setEditorStateToken(prev => prev + 1);\r\n            },\r\n        },\r\n        [doc?.content_html, doc?.content, doc?.permission, handleAutoSave]\r\n    );\r\n\r\n    // Handle image upload\r\n    const handleImageSelect = useCallback((e) => {\r\n        const file = e.target.files?.[0];\r\n        if (!file) return;\r\n\r\n        if (!file.type.startsWith('image/')) {\r\n            addToast('Please select an image file', 'error');\r\n            return;\r\n        }\r\n\r\n        if (file.size > 5 * 1024 * 1024) { // 5MB limit\r\n            addToast('Image size must be less than 5MB', 'error');\r\n            return;\r\n        }\r\n\r\n        const reader = new FileReader();\r\n        reader.onload = (event) => {\r\n            const src = event.target.result;\r\n            if (editor) {\r\n                editor.chain().focus().setImage({ src }).run();\r\n                addToast('Image added successfully', 'success');\r\n            }\r\n        };\r\n        reader.onerror = () => {\r\n            addToast('Failed to load image', 'error');\r\n        };\r\n        reader.readAsDataURL(file);\r\n\r\n        // Reset input\r\n        if (imageInputRef.current) {\r\n            imageInputRef.current.value = '';\r\n        }\r\n    }, [editor, addToast]);\r\n\r\n    // Update content when doc loads\r\n    useEffect(() => {\r\n        if (editor && doc) {\r\n            const content = doc.content_html || doc.content || '';\r\n            if (editor.isEmpty && content) {\r\n                editor.commands.setContent(content);\r\n            }\r\n        }\r\n    }, [doc, editor]);\r\n\r\n    // Cleanup timeout on unmount\r\n    useEffect(() => {\r\n        return () => {\r\n            if (autoSaveTimeoutRef.current) {\r\n                clearTimeout(autoSaveTimeoutRef.current);\r\n            }\r\n        };\r\n    }, []);\r\n\r\n    const handleTitleChange = useCallback(async (newTitle) => {\r\n        setDoc(prev => ({ ...prev, title: newTitle }));\r\n        if (id !== 'new' && doc?.id) {\r\n            try {\r\n                await updateDocument(doc.id, { title: newTitle });\r\n            } catch (error) {\r\n                console.error('Failed to update title:', error);\r\n            }\r\n        }\r\n    }, [id, doc?.id]);\r\n\r\n    const handleUpgrade = useCallback(async () => {\r\n        if (!editor || doc?.permission === 'read') return;\r\n\r\n        setIsUpgrading(true);\r\n        addToast('Starting context expansion and academic analysis...', 'info');\r\n\r\n        try {\r\n            const currentContent = editor.getText();\r\n            // If content is too short, warn user? Or just proceed.\r\n            if (currentContent.trim().length < 10) {\r\n                addToast('Document is too short to upgrade.', 'error');\r\n                setIsUpgrading(false);\r\n                return;\r\n            }\r\n\r\n            const upgradedText = await upgradeDocument(currentContent);\r\n\r\n            if (upgradedText) {\r\n                editor.commands.setContent(upgradedText);\r\n                addToast('Upgrade complete! Content expanded and improved.', 'success');\r\n            }\r\n        } catch (error) {\r\n            console.error('Upgrade failed:', error);\r\n            addToast('Failed to upgrade document: ' + error.message, 'error');\r\n        } finally {\r\n            setIsUpgrading(false);\r\n        }\r\n    }, [editor, addToast]);\r\n\r\n    const handleExport = useCallback(async (format) => {\r\n        setIsExporting(true);\r\n        addToast(`Preparing ${format} export...`, 'info');\r\n\r\n        try {\r\n            const fileName = `${doc?.title || 'Document'}.${format === 'PDF' ? 'pdf' : 'docx'}`;\r\n\r\n            if (format === 'PDF') {\r\n                // Wait for editor to be ready\r\n                await new Promise(resolve => setTimeout(resolve, 100));\r\n                const editorElement = document.querySelector('.ProseMirror');\r\n                if (!editorElement) {\r\n                    throw new Error('Editor element not found');\r\n                }\r\n                await exportToPDF(editorElement, fileName, {\r\n                    margins: doc?.margins,\r\n                    headerText: doc?.header_text\r\n                });\r\n            } else if (format === 'Word') {\r\n                if (!editor) throw new Error('Editor not initialized');\r\n                const html = editor.getHTML();\r\n                await exportToWord(html, fileName, {\r\n                    title: doc?.title,\r\n                    description: `Academic ${doc?.document_type || 'Document'} created with Docley`,\r\n                    headerText: doc?.header_text,\r\n                    margins: doc?.margins\r\n                });\r\n            }\r\n\r\n            addToast(`${format} exported successfully`, 'success');\r\n        } catch (error) {\r\n            console.error('Export failed:', error);\r\n            addToast(`Failed to export ${format}: ${error.message}`, 'error');\r\n        } finally {\r\n            setIsExporting(false);\r\n            setShowSettings(false);\r\n        }\r\n    }, [doc, editor, addToast]);\r\n\r\n    const handleSaveDocSettings = useCallback(async (newSettings) => {\r\n        if (!doc?.id) return;\r\n\r\n        try {\r\n            const updatedDoc = await updateDocument(doc.id, {\r\n                margins: newSettings.margins,\r\n                headerText: newSettings.headerText\r\n            });\r\n            setDoc(prev => ({\r\n                ...prev,\r\n                margins: updatedDoc.margins,\r\n                header_text: updatedDoc.header_text\r\n            }));\r\n\r\n            // Update editor pagination if needed\r\n            if (editor) {\r\n                editor.setOptions({\r\n                    pagination: {\r\n                        ...editor.options.pagination,\r\n                        margins: updatedDoc.margins\r\n                    }\r\n                });\r\n            }\r\n\r\n            addToast('Document settings saved', 'success');\r\n        } catch (error) {\r\n            console.error('Failed to save settings:', error);\r\n            addToast('Failed to save settings', 'error');\r\n        }\r\n    }, [doc?.id, editor, addToast]);\r\n\r\n    const handleInsertCitation = useCallback((citationHtml) => {\r\n        if (editor) {\r\n            editor.chain().focus().insertContent(citationHtml).run();\r\n            setShowCitationModal(false);\r\n            addToast('Citation inserted', 'success');\r\n        }\r\n    }, [editor, addToast]);\r\n\r\n    const handleDelete = useCallback(async () => {\r\n        if (id === 'new') {\r\n            setShowDeleteConfirm(false);\r\n            setShowSettings(false);\r\n            addToast('Draft discarded', 'info');\r\n            navigate('/dashboard/documents');\r\n            return;\r\n        }\r\n\r\n        if (!doc?.id) return;\r\n        try {\r\n            await permanentlyDeleteDocument(doc.id);\r\n            addToast('Document deleted permanently', 'success');\r\n            navigate('/dashboard/documents');\r\n        } catch (error) {\r\n            console.error('Failed to delete:', error);\r\n            addToast('Failed to delete document', 'error');\r\n        } finally {\r\n            setShowDeleteConfirm(false);\r\n            setShowSettings(false);\r\n        }\r\n    }, [doc?.id, id, navigate, addToast]);\r\n\r\n    const formatLastSaved = useCallback(() => {\r\n        if (!lastSaved) return null;\r\n        const now = new Date();\r\n        const diffMs = now - lastSaved;\r\n        const diffMins = Math.floor(diffMs / 60000);\r\n\r\n        if (diffMins < 1) return 'Saved just now';\r\n        if (diffMins === 1) return 'Saved 1 minute ago';\r\n        if (diffMins < 60) return `Saved ${diffMins} minutes ago`;\r\n        return `Saved at ${lastSaved.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}`;\r\n    }, [lastSaved]);\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <div className=\"fixed inset-0 bg-white flex items-center justify-center\">\r\n                <div className=\"text-center\">\r\n                    <Loader2 className=\"h-8 w-8 animate-spin text-indigo-600 mx-auto mb-4\" />\r\n                    <p className=\"text-slate-600\">Loading document...</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-slate-100 flex flex-col\">\r\n            <DiagnosticReport\r\n                isOpen={showReport}\r\n                onClose={() => setShowReport(false)}\r\n                documentText={editor?.getText() || ''}\r\n            />\r\n\r\n            <DocumentSettingsModal\r\n                isOpen={showDocSettings}\r\n                onClose={() => setShowDocSettings(false)}\r\n                onSave={handleSaveDocSettings}\r\n                initialSettings={{\r\n                    margins: doc?.margins,\r\n                    headerText: doc?.header_text\r\n                }}\r\n            />\r\n\r\n            {/* Top Navigation Bar */}\r\n            <header className=\"bg-white border-b border-slate-200 flex-shrink-0\">\r\n                <div className=\"flex items-center justify-between px-4 py-2\">\r\n                    {/* Left: Back + Title */}\r\n                    <div className=\"flex items-center gap-3 flex-1 min-w-0\">\r\n                        <Link\r\n                            to=\"/dashboard/documents\"\r\n                            className=\"text-slate-400 hover:text-indigo-600 transition-colors p-2 rounded-lg hover:bg-slate-100 flex-shrink-0\"\r\n                            title=\"Back to Documents\"\r\n                        >\r\n                            <ArrowLeft className=\"h-5 w-5\" />\r\n                        </Link>\r\n                        <div className=\"flex items-center gap-3 min-w-0 flex-1\">\r\n                            <div className=\"h-10 w-10 rounded-lg bg-gradient-to-br from-indigo-500 to-indigo-600 flex items-center justify-center flex-shrink-0\">\r\n                                <FileText className=\"h-5 w-5 text-white\" />\r\n                            </div>\r\n                            <div className=\"min-w-0 flex-1\">\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={doc?.title || ''}\r\n                                    onChange={(e) => handleTitleChange(e.target.value)}\r\n                                    className=\"text-lg font-semibold text-slate-900 bg-transparent border-none focus:outline-none focus:bg-slate-100 focus:px-2 focus:rounded w-full truncate hover:bg-slate-50 px-1 py-0.5 -ml-1 transition-colors\"\r\n                                    placeholder=\"Untitled Document\"\r\n                                />\r\n                                <div className=\"flex items-center gap-3 text-xs text-slate-500\">\r\n                                    {isSaving ? (\r\n                                        <span className=\"flex items-center gap-1\">\r\n                                            <Loader2 className=\"h-3 w-3 animate-spin\" />\r\n                                            Saving...\r\n                                        </span>\r\n                                    ) : lastSaved ? (\r\n                                        <span className=\"flex items-center gap-1\">\r\n                                            <CheckCircle className=\"h-3 w-3 text-green-500\" />\r\n                                            {formatLastSaved()}\r\n                                        </span>\r\n                                    ) : null}\r\n                                    <span className=\"text-slate-300\">â€¢</span>\r\n                                    <span>{doc?.word_count?.toLocaleString() || 0} words</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Right: Actions */}\r\n                    <div className=\"flex items-center gap-2 flex-shrink-0\">\r\n                        <div className=\"w-px h-6 bg-slate-200\" />\r\n\r\n\r\n\r\n                        <Button\r\n                            variant=\"ghost\"\r\n                            size=\"sm\"\r\n                            onClick={() => setShowReport(true)}\r\n                            className=\"text-slate-600 hover:text-indigo-600\"\r\n                        >\r\n                            <BarChart3 className=\"mr-2 h-4 w-4\" />\r\n                            Diagnostics\r\n                        </Button>\r\n                        <Button\r\n                            size=\"sm\"\r\n                            className=\"bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white shadow-lg shadow-orange-500/20\"\r\n                            onClick={handleUpgrade}\r\n                            disabled={isUpgrading}\r\n                        >\r\n                            {isUpgrading ? (\r\n                                <>\r\n                                    <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                                    Upgrading...\r\n                                </>\r\n                            ) : (\r\n                                <>\r\n                                    <Wand2 className=\"mr-2 h-4 w-4\" />\r\n                                    Upgrade\r\n                                </>\r\n                            )}\r\n                        </Button>\r\n\r\n                        {/* More Menu */}\r\n                        <div className=\"relative\">\r\n                            <Button\r\n                                variant=\"ghost\"\r\n                                size=\"sm\"\r\n                                onClick={() => setShowSettings(!showSettings)}\r\n                                className=\"text-slate-500 hover:text-slate-700 px-2\"\r\n                            >\r\n                                <MoreHorizontal className=\"h-5 w-5\" />\r\n                            </Button>\r\n\r\n                            {showSettings && (\r\n                                <>\r\n                                    <div className=\"fixed inset-0 z-40\" onClick={() => setShowSettings(false)} />\r\n                                    <div className=\"absolute right-0 top-full mt-2 w-56 bg-white rounded-xl shadow-xl border border-slate-200 py-2 z-50 animate-in fade-in slide-in-from-top-2 duration-150\">\r\n                                        <div className=\"px-4 py-2 border-b border-slate-100\">\r\n                                            <p className=\"text-xs font-semibold text-slate-400 uppercase tracking-wide\">Settings</p>\r\n                                        </div>\r\n                                        <div className=\"py-1\">\r\n                                            <button\r\n                                                onClick={() => {\r\n                                                    setShowDocSettings(true);\r\n                                                    setShowSettings(false);\r\n                                                }}\r\n                                                className=\"w-full px-4 py-2 text-left text-sm text-slate-700 hover:bg-slate-50 flex items-center gap-3 transition-colors\"\r\n                                            >\r\n                                                <Settings className=\"h-4 w-4 text-slate-400\" />\r\n                                                Document Settings\r\n                                            </button>\r\n                                        </div>\r\n                                        <div className=\"px-4 py-2 border-t border-slate-100\">\r\n                                            <p className=\"text-xs font-semibold text-slate-400 uppercase tracking-wide\">Export</p>\r\n                                        </div>\r\n                                        <div className=\"py-1\">\r\n                                            <button\r\n                                                onClick={() => handleExport('PDF')}\r\n                                                disabled={isExporting}\r\n                                                className=\"w-full px-4 py-2 text-left text-sm text-slate-700 hover:bg-slate-50 flex items-center gap-3 disabled:opacity-50 transition-colors\"\r\n                                            >\r\n                                                <Download className=\"h-4 w-4 text-slate-400\" />\r\n                                                Export as PDF\r\n                                            </button>\r\n                                            <button\r\n                                                onClick={() => handleExport('Word')}\r\n                                                disabled={isExporting}\r\n                                                className=\"w-full px-4 py-2 text-left text-sm text-slate-700 hover:bg-slate-50 flex items-center gap-3 disabled:opacity-50 transition-colors\"\r\n                                            >\r\n                                                <Download className=\"h-4 w-4 text-slate-400\" />\r\n                                                Export as Word\r\n                                            </button>\r\n                                        </div>\r\n                                        <div className=\"py-1 border-t border-slate-100\">\r\n                                            <button\r\n                                                onClick={() => setShowDeleteConfirm(true)}\r\n                                                className=\"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center gap-3 transition-colors\"\r\n                                            >\r\n                                                <Trash2 className=\"h-4 w-4\" />\r\n                                                Delete Document\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                </>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Toolbar */}\r\n                <MenuBar\r\n                    editor={editor}\r\n                    zoom={zoom}\r\n                    setZoom={setZoom}\r\n                    onImageUpload={handleImageSelect}\r\n                    onCitationClick={() => setShowCitationModal(true)}\r\n                    imageInputRef={imageInputRef}\r\n                    editorStateToken={editorStateToken}\r\n                />\r\n            </header>\r\n\r\n            {/* Editor Canvas */}\r\n            <main className=\"flex-1 overflow-auto bg-[#cbd5e1] custom-scrollbar p-12\">\r\n                <div\r\n                    className=\"editor-canvas\"\r\n                    style={{\r\n                        transform: `scale(${zoom})`,\r\n                        transformOrigin: 'top center'\r\n                    }}\r\n                >\r\n                    <div\r\n                        className=\"cursor-text\"\r\n                        onClick={() => editor?.chain().focus().run()}\r\n                        ref={editorRef}\r\n                    >\r\n                        <div\r\n                            className=\"editor-content-wrapper\"\r\n                            style={{\r\n                                padding: doc?.margins ? `${doc.margins.top}px ${doc.margins.right}px ${doc.margins.bottom}px ${doc.margins.left}px` : '96px',\r\n                                position: 'relative'\r\n                            }}\r\n                        >\r\n                            {doc?.header_text && (\r\n                                <div\r\n                                    className=\"absolute top-0 left-0 right-0 text-center text-xs text-slate-400 font-medium\"\r\n                                    style={{\r\n                                        height: doc.margins?.top ? `${doc.margins.top / 2}px` : '48px',\r\n                                        display: 'flex',\r\n                                        alignItems: 'center',\r\n                                        justifyContent: 'center',\r\n                                        pointerEvents: 'none'\r\n                                    }}\r\n                                >\r\n                                    {doc.header_text}\r\n                                </div>\r\n                            )}\r\n                            <EditorContent editor={editor} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </main>\r\n\r\n            {/* Citation Modal */}\r\n            <CitationModal\r\n                isOpen={showCitationModal}\r\n                onClose={() => setShowCitationModal(false)}\r\n                onInsert={handleInsertCitation}\r\n                currentStyle={doc?.citation_style}\r\n            />\r\n\r\n\r\n\r\n            {/* Delete Confirmation Modal */}\r\n            {showDeleteConfirm && (\r\n                <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm\">\r\n                    <div className=\"bg-white rounded-xl shadow-2xl w-full max-w-md p-6 animate-in zoom-in-95 duration-150\">\r\n                        <div className=\"flex items-start gap-4 mb-6\">\r\n                            <div className=\"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center flex-shrink-0\">\r\n                                <Trash2 className=\"h-6 w-6 text-red-600\" />\r\n                            </div>\r\n                            <div>\r\n                                <h3 className=\"text-lg font-bold text-slate-900\">Delete Permanently?</h3>\r\n                                <p className=\"text-sm text-slate-600 mt-1\">\r\n                                    Are you sure you want to delete \"{doc?.title}\"? This action cannot be undone.\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"flex justify-end gap-3\">\r\n                            <Button variant=\"ghost\" onClick={() => setShowDeleteConfirm(false)}>\r\n                                Cancel\r\n                            </Button>\r\n                            <Button\r\n                                onClick={handleDelete}\r\n                                className=\"bg-red-600 hover:bg-red-700 text-white\"\r\n                            >\r\n                                Delete Forever\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\pages\\Editor\\components\\Page.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'totalStats' is defined but never used.","line":7,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"totalStats"},"fix":{"range":[160,177],"text":""},"desc":"Remove unused variable 'totalStats'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'onHeaderChange' is defined but never used.","line":11,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"onHeaderChange"},"fix":{"range":[218,239],"text":""},"desc":"Remove unused variable 'onHeaderChange'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'onFooterChange' is defined but never used.","line":12,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"onFooterChange"},"fix":{"range":[239,260],"text":""},"desc":"Remove unused variable 'onFooterChange'."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { EDITOR_CONFIG } from '../editorConfig';\r\nimport { cn } from '../../../lib/utils';\r\n\r\nexport const Page = ({\r\n    pageNumber,\r\n    totalStats,\r\n    header,\r\n    footer,\r\n    children,\r\n    onHeaderChange,\r\n    onFooterChange,\r\n    showPageNumbers = true,\r\n    pageNumberPosition = 'footer-center' // 'footer-left', 'footer-center', 'footer-right', 'header-right'\r\n}) => {\r\n    const { PAGE_WIDTH, PAGE_HEIGHT, DEFAULT_MARGINS } = EDITOR_CONFIG;\r\n\r\n    const renderPageNumber = () => {\r\n        if (!showPageNumbers) return null;\r\n        return (\r\n            <span className=\"text-xs text-slate-400 font-medium select-none\">\r\n                Page {pageNumber}\r\n            </span>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <div\r\n            className=\"bg-white shadow-2xl mx-auto relative flex flex-col items-center group cursor-text transition-shadow duration-200 hover:shadow-indigo-100/50\"\r\n            style={{\r\n                width: `${PAGE_WIDTH}px`,\r\n                minHeight: `${PAGE_HEIGHT}px`,\r\n                maxHeight: `${PAGE_HEIGHT}px`,\r\n                padding: `0px`, // Padding is handled internally by slots\r\n                overflow: 'hidden'\r\n            }}\r\n        >\r\n            {/* Header Slot */}\r\n            <div\r\n                className=\"w-full flex items-center justify-between border-b border-transparent group-hover:border-slate-100 transition-colors px-[96px] pt-[32px] min-h-[96px]\"\r\n                style={{ paddingLeft: `${DEFAULT_MARGINS.left}px`, paddingRight: `${DEFAULT_MARGINS.right}px` }}\r\n            >\r\n                <div className=\"w-full text-xs text-slate-400 italic outline-none focus:text-slate-600 empty:before:content-['Add_header...'] empty:before:opacity-30\">\r\n                    {header}\r\n                </div>\r\n                {pageNumberPosition === 'header-right' && renderPageNumber()}\r\n            </div>\r\n\r\n            {/* Main Content Area */}\r\n            <div\r\n                className=\"flex-1 w-full\"\r\n                style={{\r\n                    paddingLeft: `${DEFAULT_MARGINS.left}px`,\r\n                    paddingRight: `${DEFAULT_MARGINS.right}px`,\r\n                    paddingBottom: `0px` // Footer handles bottom spacing\r\n                }}\r\n            >\r\n                {children}\r\n            </div>\r\n\r\n            {/* Footer Slot */}\r\n            <div\r\n                className=\"w-full flex items-end justify-between border-t border-transparent group-hover:border-slate-100 transition-colors px-[96px] pb-[32px] min-h-[96px]\"\r\n                style={{ paddingLeft: `${DEFAULT_MARGINS.left}px`, paddingRight: `${DEFAULT_MARGINS.right}px` }}\r\n            >\r\n                <div className=\"flex-1 text-xs text-slate-400 italic outline-none focus:text-slate-600 empty:before:content-['Add_footer...'] empty:before:opacity-30\">\r\n                    {footer}\r\n                </div>\r\n\r\n                {showPageNumbers && pageNumberPosition.startsWith('footer') && (\r\n                    <div className={cn(\r\n                        \"absolute bottom-8 left-0 right-0 flex justify-center pointer-events-none\",\r\n                        pageNumberPosition === 'footer-left' && \"justify-start px-[96px]\",\r\n                        pageNumberPosition === 'footer-right' && \"justify-end px-[96px]\",\r\n                    )}>\r\n                        {renderPageNumber()}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Visual Page Boundary Overlay (Optional hint) */}\r\n            <div className=\"absolute inset-0 border border-slate-200 pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity\" />\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\pages\\Editor\\editorConfig.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\pages\\Editor\\extensions\\Pagination.js","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'pageWidth' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":21,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"pageWidth"},"fix":{"range":[716,726],"text":""},"desc":"Remove unused variable 'pageWidth'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Extension } from '@tiptap/core';\r\nimport { Plugin, PluginKey } from '@tiptap/pm/state';\r\nimport { Decoration, DecorationSet } from '@tiptap/pm/view';\r\nimport { EDITOR_CONFIG } from '../editorConfig';\r\n\r\nexport const Pagination = Extension.create({\r\n    name: 'pagination',\r\n\r\n    addOptions() {\r\n        return {\r\n            pageWidth: EDITOR_CONFIG.PAGE_WIDTH,\r\n            pageHeight: EDITOR_CONFIG.PAGE_HEIGHT,\r\n            margins: EDITOR_CONFIG.DEFAULT_MARGINS,\r\n            showPageNumbers: true,\r\n            pageNumberPosition: 'footer-right', // 'header-right', 'footer-center', 'footer-right'\r\n        };\r\n    },\r\n\r\n    addProseMirrorPlugins() {\r\n        const extension = this;\r\n        const { pageWidth, pageHeight, margins } = this.options;\r\n\r\n        return [\r\n            new Plugin({\r\n                key: new PluginKey('pagination'),\r\n                state: {\r\n                    init() {\r\n                        return DecorationSet.empty;\r\n                    },\r\n                    apply(tr, oldState) {\r\n                        return oldState; // We'll update decorations in the view layer for accurate measurements\r\n                    },\r\n                },\r\n                props: {\r\n                    decorations(state) {\r\n                        const { doc } = state;\r\n                        const decorations = [];\r\n                        let currentHeight = margins.top;\r\n                        let pageCount = 1;\r\n\r\n                        // Add Initial Page Header (Page 1) - Reduced spacing\r\n                        decorations.push(\r\n                            Decoration.widget(0, () => {\r\n                                const div = document.createElement('div');\r\n                                div.className = 'page-header first-page';\r\n                                div.style.padding = `${margins.top / 4}px ${margins.right}px 0 ${margins.left}px`;\r\n                                div.innerHTML = `\r\n                                    <div class=\"header-content\"></div>\r\n                                    ${extension.options.showPageNumbers && extension.options.pageNumberPosition === 'header-right' ? `<span class=\"page-number\">Page 1</span>` : ''}\r\n                                `;\r\n                                return div;\r\n                            })\r\n                        );\r\n\r\n                        doc.descendants((node, pos) => {\r\n                            if (node.isBlock) {\r\n                                // Estimate node height\r\n                                const nodeHeight = node.textContent.length > 0\r\n                                    ? Math.ceil(node.textContent.length / 80) * 24 + 16\r\n                                    : 24;\r\n\r\n                                if (currentHeight + nodeHeight > pageHeight - margins.bottom) {\r\n                                    // Current page is finished\r\n                                    const footerPage = pageCount;\r\n                                    pageCount++;\r\n\r\n                                    decorations.push(\r\n                                        Decoration.widget(pos, () => {\r\n                                            const div = document.createElement('div');\r\n                                            div.className = 'page-break-container';\r\n                                            div.innerHTML = `\r\n                                                <div class=\"page-footer\" style=\"padding: 0 ${margins.right}px ${margins.bottom / 2}px ${margins.left}px\">\r\n                                                    <div class=\"footer-content\"></div>\r\n                                                    ${extension.options.showPageNumbers && extension.options.pageNumberPosition.startsWith('footer') ? `<span class=\"page-number\">Page ${footerPage}</span>` : ''}\r\n                                                </div>\r\n                                                <div class=\"page-gap\"></div>\r\n                                                <div class=\"page-header\" style=\"padding: ${margins.top / 2}px ${margins.right}px 0 ${margins.left}px\">\r\n                                                    <div class=\"header-content\"></div>\r\n                                                    ${extension.options.showPageNumbers && extension.options.pageNumberPosition === 'header-right' ? `<span class=\"page-number\">Page ${pageCount}</span>` : ''}\r\n                                                </div>\r\n                                            `;\r\n                                            return div;\r\n                                        })\r\n                                    );\r\n                                    currentHeight = margins.top + nodeHeight;\r\n                                } else {\r\n                                    currentHeight += nodeHeight;\r\n                                }\r\n                            }\r\n                            return false;\r\n                        });\r\n\r\n                        return DecorationSet.create(doc, decorations);\r\n                    },\r\n                },\r\n            }),\r\n        ];\r\n    },\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\pages\\Editor\\extensions\\ResizableImage.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'mergeAttributes' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"mergeAttributes"},"fix":{"range":[186,233],"text":""},"desc":"Remove unused variable 'mergeAttributes'."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  12 |     useEffect(() => {\n  13 |         if (node.attrs.width) {\n> 14 |             setWidth(node.attrs.width);\n     |             ^^^^^^^^ Avoid calling setState() directly within an effect\n  15 |         }\n  16 |     }, [node.attrs.width]);\n  17 |","line":14,"column":13,"nodeType":null,"endLine":14,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NodeViewWrapper, ReactNodeViewRenderer } from '@tiptap/react';\r\nimport Image from '@tiptap/extension-image';\r\nimport { useCallback, useEffect, useRef, useState } from 'react';\r\nimport { mergeAttributes } from '@tiptap/core';\r\n\r\nconst ResizableImageComponent = ({ node, updateAttributes, selected }) => {\r\n    const [width, setWidth] = useState(node.attrs.width || '100%');\r\n    const [resizing, setResizing] = useState(false);\r\n    const containerRef = useRef(null);\r\n\r\n    // Initial width setup\r\n    useEffect(() => {\r\n        if (node.attrs.width) {\r\n            setWidth(node.attrs.width);\r\n        }\r\n    }, [node.attrs.width]);\r\n\r\n    const handleMouseDown = useCallback((e, direction) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        setResizing(true);\r\n\r\n        const startX = e.clientX;\r\n        const startWidth = containerRef.current.offsetWidth;\r\n\r\n        const onMouseMove = (e) => {\r\n            let newWidth;\r\n            if (direction === 'right') {\r\n                newWidth = startWidth + (e.clientX - startX);\r\n            } else {\r\n                newWidth = startWidth - (e.clientX - startX);\r\n            }\r\n\r\n            // Constrain width\r\n            const parentWidth = containerRef.current.parentElement?.offsetWidth || 800;\r\n            if (newWidth > 50 && newWidth <= parentWidth) {\r\n                setWidth(`${newWidth}px`);\r\n            }\r\n        };\r\n\r\n        const onMouseUp = () => {\r\n            setResizing(false);\r\n            updateAttributes({ width: containerRef.current.style.width });\r\n            document.removeEventListener('mousemove', onMouseMove);\r\n            document.removeEventListener('mouseup', onMouseUp);\r\n        };\r\n\r\n        document.addEventListener('mousemove', onMouseMove);\r\n        document.addEventListener('mouseup', onMouseUp);\r\n    }, [updateAttributes]);\r\n\r\n    return (\r\n        <NodeViewWrapper className=\"resizable-image-wrapper\" style={{ width: width, display: 'inline-block', position: 'relative', lineHeight: 0 }}>\r\n            <div\r\n                ref={containerRef}\r\n                className={`image-container ${selected || resizing ? 'selected' : ''}`}\r\n                style={{ width: '100%', position: 'relative' }}\r\n            >\r\n                <img\r\n                    src={node.attrs.src}\r\n                    alt={node.attrs.alt}\r\n                    style={{ width: '100%', display: 'block' }}\r\n                />\r\n                {(selected || resizing) && (\r\n                    <>\r\n                        {/* Resize Handles */}\r\n                        <div\r\n                            className=\"resize-handle bottom-right\"\r\n                            onMouseDown={(e) => handleMouseDown(e, 'right')}\r\n                        />\r\n                        <div\r\n                            className=\"resize-handle bottom-left\"\r\n                            onMouseDown={(e) => handleMouseDown(e, 'left')}\r\n                        />\r\n                    </>\r\n                )}\r\n            </div>\r\n        </NodeViewWrapper>\r\n    );\r\n};\r\n\r\nexport const ResizableImage = Image.extend({\r\n    addAttributes() {\r\n        return {\r\n            ...this.parent?.(),\r\n            width: {\r\n                default: '100%',\r\n                renderHTML: attributes => ({\r\n                    style: `width: ${attributes.width}`,\r\n                }),\r\n            },\r\n        };\r\n    },\r\n\r\n    addNodeView() {\r\n        return ReactNodeViewRenderer(ResizableImageComponent);\r\n    },\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\pages\\Editor\\lib\\exportUtils.js","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":43,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":43,"endColumn":19},{"ruleId":"no-unused-vars","severity":2,"message":"'processInlineNode' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":342,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":342,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"processInlineNode"},"fix":{"range":[12672,13822],"text":""},"desc":"Remove unused variable 'processInlineNode'."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":488,"column":17,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":488,"endColumn":38,"suggestions":[{"messageId":"addBrackets","fix":{"range":[17789,18219],"text":"{ const listItems = [];\r\n                const items = Array.from(node.querySelectorAll('li'));\r\n                for (const li of items) {\r\n                    const res = await processBlockNode(li);\r\n                    if (res) {\r\n                        if (Array.isArray(res)) listItems.push(...res);\r\n                        else listItems.push(res);\r\n                    }\r\n                }\r\n                return listItems; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":489,"column":17,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":489,"endColumn":71,"suggestions":[{"messageId":"addBrackets","fix":{"range":[17789,18219],"text":"{ const listItems = [];\r\n                const items = Array.from(node.querySelectorAll('li'));\r\n                for (const li of items) {\r\n                    const res = await processBlockNode(li);\r\n                    if (res) {\r\n                        if (Array.isArray(res)) listItems.push(...res);\r\n                        else listItems.push(res);\r\n                    }\r\n                }\r\n                return listItems; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":510,"column":17,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":510,"endColumn":57,"suggestions":[{"messageId":"addBrackets","fix":{"range":[18690,19834],"text":"{ const imgSrc = node.getAttribute('src');\r\n                const imgAlt = node.getAttribute('alt') || 'Image';\r\n\r\n                if (imgSrc) {\r\n                    const imageBuffer = await fetchImageAsBuffer(imgSrc);\r\n                    if (imageBuffer) {\r\n                        return new Paragraph({\r\n                            children: [\r\n                                new ImageRun({\r\n                                    data: imageBuffer,\r\n                                    transformation: {\r\n                                        width: 500, // Fixed width for now, could be dynamic\r\n                                        height: 300,\r\n                                    },\r\n                                }),\r\n                            ],\r\n                            spacing: { before: 200, after: 200 },\r\n                            alignment: 'center',\r\n                        });\r\n                    }\r\n                }\r\n\r\n                return new Paragraph({\r\n                    children: [new TextRun({ text: `[${imgAlt}]`, italics: true })],\r\n                    spacing: { after: 120 }\r\n                }); }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":511,"column":17,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":511,"endColumn":68,"suggestions":[{"messageId":"addBrackets","fix":{"range":[18690,19834],"text":"{ const imgSrc = node.getAttribute('src');\r\n                const imgAlt = node.getAttribute('alt') || 'Image';\r\n\r\n                if (imgSrc) {\r\n                    const imageBuffer = await fetchImageAsBuffer(imgSrc);\r\n                    if (imageBuffer) {\r\n                        return new Paragraph({\r\n                            children: [\r\n                                new ImageRun({\r\n                                    data: imageBuffer,\r\n                                    transformation: {\r\n                                        width: 500, // Fixed width for now, could be dynamic\r\n                                        height: 300,\r\n                                    },\r\n                                }),\r\n                            ],\r\n                            spacing: { before: 200, after: 200 },\r\n                            alignment: 'center',\r\n                        });\r\n                    }\r\n                }\r\n\r\n                return new Paragraph({\r\n                    children: [new TextRun({ text: `[${imgAlt}]`, italics: true })],\r\n                    spacing: { after: 120 }\r\n                }); }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":545,"column":17,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":545,"endColumn":40,"suggestions":[{"messageId":"addBrackets","fix":{"range":[19942,20669],"text":"{ if (textRuns.length > 0 && textRuns[0].text) {\r\n                    return new Paragraph({\r\n                        children: textRuns,\r\n                        spacing: { after: 120 }\r\n                    });\r\n                }\r\n                // Otherwise process children\r\n                const divChildren = [];\r\n                for (const childNode of Array.from(node.childNodes)) {\r\n                    const res = await processBlockNode(childNode);\r\n                    if (res) {\r\n                        if (Array.isArray(res)) divChildren.push(...res);\r\n                        else divChildren.push(res);\r\n                    }\r\n                }\r\n                return divChildren.length > 0 ? divChildren : null; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":556,"column":17,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":556,"endColumn":42,"suggestions":[{"messageId":"addBrackets","fix":{"range":[20772,21216],"text":"{ const otherChildren = [];\r\n                for (const childNode of Array.from(node.childNodes)) {\r\n                    const res = await processBlockNode(childNode);\r\n                    if (res) {\r\n                        if (Array.isArray(res)) otherChildren.push(...res);\r\n                        else otherChildren.push(res);\r\n                    }\r\n                }\r\n                return otherChildren.length > 0 ? otherChildren : null; }"},"desc":"Add {} brackets around the case block."}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import html2pdf from 'html2pdf.js/dist/html2pdf.bundle.min.js';\r\nimport { Document, Packer, Paragraph, TextRun, HeadingLevel, ImageRun, Media, Header } from 'docx';\r\n\r\n/**\r\n * Convert oklch color to RGB hex\r\n */\r\nfunction oklchToRgb(oklchString) {\r\n    // If it's already a hex color, return it\r\n    if (oklchString.startsWith('#')) {\r\n        return oklchString;\r\n    }\r\n\r\n    // If it's rgb/rgba, return it\r\n    if (oklchString.startsWith('rgb')) {\r\n        return oklchString;\r\n    }\r\n\r\n    // Default fallback for oklch (convert to dark gray)\r\n    return '#1e293b';\r\n}\r\n\r\n/**\r\n * Sanitize CSS to remove oklch colors and convert to RGB\r\n */\r\nfunction sanitizeStyles(element) {\r\n    if (!element || element.nodeType !== Node.ELEMENT_NODE) return;\r\n\r\n    // Get computed styles\r\n    const computed = window.getComputedStyle(element);\r\n    const colorProps = [\r\n        'color', 'background-color', 'border-color',\r\n        'border-top-color', 'border-right-color', 'border-bottom-color', 'border-left-color',\r\n        'outline-color', 'text-decoration-color', 'fill', 'stroke'\r\n    ];\r\n\r\n    colorProps.forEach(prop => {\r\n        try {\r\n            const value = computed.getPropertyValue(prop);\r\n            if (value && (value.includes('oklch') || value.includes('oklab') || value.includes('var('))) {\r\n                const rgbColor = oklchToRgb(value);\r\n                element.style.setProperty(prop, rgbColor, 'important');\r\n            }\r\n        } catch (e) {\r\n            // Ignore errors\r\n        }\r\n    });\r\n\r\n    // Recursively sanitize children\r\n    Array.from(element.children).forEach(child => sanitizeStyles(child));\r\n}\r\n\r\n/**\r\n * Deep clean HTML to remove oklch references\r\n */\r\nfunction deepCleanHTML(html) {\r\n    return html\r\n        // Remove oklch/oklab color functions\r\n        .replace(/oklch\\([^)]+\\)/gi, '#1e293b')\r\n        .replace(/oklab\\([^)]+\\)/gi, '#1e293b')\r\n        // Remove CSS variables\r\n        .replace(/var\\(--[^)]+\\)/gi, '#1e293b')\r\n        // Clean up rgba with alpha 0\r\n        .replace(/rgba?\\([^)]*,\\s*0\\)/g, 'transparent')\r\n        // Remove any remaining oklch references in style attributes\r\n        .replace(/style=\"[^\"]*oklch[^\"]*\"/gi, (match) => {\r\n            return match.replace(/oklch\\([^)]+\\)/gi, '#1e293b');\r\n        });\r\n}\r\n\r\n/**\r\n * Export the editor content to a PDF file.\r\n */\r\nexport const exportToPDF = async (element, fileName = 'document.pdf', options = {}) => {\r\n    const { margins, headerText } = options;\r\n    if (!element) {\r\n        console.error('PDF Export Error: No element provided');\r\n        throw new Error('Editor element not found');\r\n    }\r\n\r\n    console.log('Initiating PDF Export for:', fileName);\r\n\r\n    // Create a temporary container for rendering\r\n    const container = document.createElement('div');\r\n    container.style.position = 'fixed';\r\n    container.style.left = '-9999px';\r\n    container.style.top = '0';\r\n    container.style.width = '816px'; // A4 Width\r\n    container.style.backgroundColor = 'white';\r\n    container.style.padding = '0';\r\n    container.style.margin = '0';\r\n\r\n    // Clone the editor content - use deep clone to preserve all nodes\r\n    const clone = element.cloneNode(true);\r\n\r\n    // Preserve the original HTML structure first\r\n    const originalHTML = clone.innerHTML;\r\n\r\n    // Deep sanitize styles before cleaning HTML\r\n    sanitizeStyles(clone);\r\n\r\n    // Clean HTML content but preserve structure\r\n    clone.innerHTML = deepCleanHTML(originalHTML);\r\n\r\n    // Remove problematic styles but keep content structure\r\n    clone.style.transform = 'none';\r\n    clone.style.margin = '0';\r\n    clone.style.padding = '0';\r\n    clone.style.boxShadow = 'none';\r\n    clone.style.backgroundColor = 'white';\r\n    clone.style.position = 'relative';\r\n    clone.style.display = 'block';\r\n    clone.style.width = '816px';\r\n    clone.style.minHeight = 'auto';\r\n\r\n    // Ensure ProseMirror class is preserved for styling\r\n    if (!clone.classList.contains('ProseMirror')) {\r\n        clone.classList.add('ProseMirror');\r\n    }\r\n\r\n    container.appendChild(clone);\r\n    document.body.appendChild(container);\r\n\r\n    // Wait for fonts/images to load - increased timeout for images\r\n    const images = clone.querySelectorAll('img');\r\n    const imagePromises = Array.from(images).map(img => {\r\n        return new Promise((resolve) => {\r\n            if (img.complete) {\r\n                resolve();\r\n            } else {\r\n                img.onload = resolve;\r\n                img.onerror = resolve; // Continue even if image fails\r\n                setTimeout(resolve, 2000); // Max 2s wait per image\r\n            }\r\n        });\r\n    });\r\n    await Promise.all(imagePromises);\r\n    await new Promise(resolve => setTimeout(resolve, 300)); // Additional wait\r\n\r\n    const opt = {\r\n        margin: [0, 0, 0, 0],\r\n        filename: fileName,\r\n        image: { type: 'jpeg', quality: 0.98 },\r\n        html2canvas: {\r\n            scale: 2,\r\n            useCORS: true,\r\n            allowTaint: true, // Allow cross-origin images\r\n            logging: false,\r\n            width: 816,\r\n            height: undefined, // Auto height\r\n            backgroundColor: '#ffffff',\r\n            removeContainer: true,\r\n            onclone: (clonedDoc) => {\r\n                // Remove all stylesheets that might contain oklch\r\n                const styles = clonedDoc.querySelectorAll('style, link[rel=\"stylesheet\"]');\r\n                styles.forEach(s => s.remove());\r\n\r\n                // Inject clean essential styles\r\n                const essentialStyle = clonedDoc.createElement('style');\r\n                essentialStyle.innerHTML = `\r\n                    * {\r\n                        color-scheme: light !important;\r\n                        -webkit-print-color-adjust: exact !important;\r\n                        print-color-adjust: exact !important;\r\n                    }\r\n                    body, html {\r\n                        background: white !important;\r\n                        padding: 0 !important;\r\n                        margin: 0 !important;\r\n                    }\r\n                    .ProseMirror {\r\n                        background: white !important;\r\n                        padding: ${margins ? `${margins.top}px ${margins.right}px ${margins.bottom}px ${margins.left}px` : '96px'} !important;\r\n                        width: 816px !important;\r\n                        box-shadow: none !important;\r\n                        margin: 0 !important;\r\n                        color: #1e293b !important;\r\n                        position: relative;\r\n                    }\r\n                    .custom-header {\r\n                        position: absolute;\r\n                        top: 0;\r\n                        left: 0;\r\n                        right: 0;\r\n                        height: ${margins?.top ? `${margins.top}px` : '96px'};\r\n                        display: flex;\r\n                        align-items: center;\r\n                        justify-content: center;\r\n                        font-size: 11px;\r\n                        color: #64748b;\r\n                        pointer-events: none;\r\n                    }\r\n                    p {\r\n                        margin-bottom: 1em;\r\n                        line-height: 1.5;\r\n                        font-size: 12pt !important;\r\n                        color: #1e293b !important;\r\n                    }\r\n                    h1, h2, h3, h4, h5, h6 {\r\n                        color: #1e293b !important;\r\n                        font-weight: bold;\r\n                    }\r\n                    .page-break-container {\r\n                        margin: 0 -96px;\r\n                        width: calc(100% + 192px);\r\n                    }\r\n                    .page-gap {\r\n                        height: 48px;\r\n                        background-color: #f1f5f9;\r\n                        border-top: 1px solid #e2e8f0;\r\n                    }\r\n                    .page-header, .page-footer {\r\n                        height: 96px;\r\n                        display: flex;\r\n                        align-items: center;\r\n                        justify-content: space-between;\r\n                        font-size: 11px;\r\n                        color: #64748b;\r\n                        font-family: sans-serif;\r\n                    }\r\n                    .page-number {\r\n                        font-weight: 600;\r\n                        color: #64748b;\r\n                    }\r\n                    img {\r\n                        max-width: 100% !important;\r\n                        height: auto !important;\r\n                        display: block !important;\r\n                        margin: 1em 0 !important;\r\n                    }\r\n                    .editor-image {\r\n                        max-width: 100% !important;\r\n                        height: auto !important;\r\n                    }\r\n                `;\r\n                clonedDoc.head.appendChild(essentialStyle);\r\n\r\n                // Ensure all images are loaded and converted to base64 if needed\r\n                const clonedImages = clonedDoc.querySelectorAll('img');\r\n                clonedImages.forEach(img => {\r\n                    // If image is base64, ensure it's properly formatted\r\n                    if (img.src && img.src.startsWith('data:')) {\r\n                        img.style.maxWidth = '100%';\r\n                        img.style.height = 'auto';\r\n                    }\r\n                });\r\n\r\n                // Inject custom header if provided\r\n                if (headerText) {\r\n                    const headerDiv = clonedDoc.createElement('div');\r\n                    headerDiv.className = 'custom-header';\r\n                    headerDiv.innerText = headerText;\r\n                    const proseMirror = clonedDoc.querySelector('.ProseMirror');\r\n                    if (proseMirror) {\r\n                        proseMirror.prepend(headerDiv);\r\n                    }\r\n                }\r\n\r\n                // Sanitize all elements in cloned document\r\n                const allElements = clonedDoc.querySelectorAll('*');\r\n                allElements.forEach(el => {\r\n                    sanitizeStyles(el);\r\n                    // Clean style attribute\r\n                    if (el.hasAttribute('style')) {\r\n                        let style = el.getAttribute('style');\r\n                        style = style.replace(/oklch\\([^)]+\\)/gi, '#1e293b');\r\n                        style = style.replace(/oklab\\([^)]+\\)/gi, '#1e293b');\r\n                        style = style.replace(/var\\(--[^)]+\\)/gi, '#1e293b');\r\n                        el.setAttribute('style', style);\r\n                    }\r\n                });\r\n            }\r\n        },\r\n        jsPDF: {\r\n            unit: 'px',\r\n            format: [816, 1123], // A4\r\n            orientation: 'portrait',\r\n            compress: true\r\n        },\r\n        pagebreak: { mode: ['css', 'legacy'] }\r\n    };\r\n\r\n    try {\r\n        if (typeof html2pdf !== 'function') {\r\n            throw new Error('PDF library (html2pdf) not correctly loaded');\r\n        }\r\n\r\n        // Use the container directly, not the clone\r\n        const exporter = html2pdf().from(container).set(opt);\r\n\r\n        // Save the PDF\r\n        await exporter.save();\r\n\r\n        console.log('PDF Export successful');\r\n    } catch (error) {\r\n        console.error('PDF Export failed details:', error);\r\n        throw error;\r\n    } finally {\r\n        // Cleanup\r\n        if (document.body.contains(container)) {\r\n            document.body.removeChild(container);\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * Helper to fetch image and return as buffer/unit8array\r\n */\r\nasync function fetchImageAsBuffer(url) {\r\n    try {\r\n        if (url.startsWith('data:')) {\r\n            const base64Content = url.split(',')[1];\r\n            const binaryString = window.atob(base64Content);\r\n            const len = binaryString.length;\r\n            const bytes = new Uint8Array(len);\r\n            for (let i = 0; i < len; i++) {\r\n                bytes[i] = binaryString.charCodeAt(i);\r\n            }\r\n            return bytes.buffer;\r\n        }\r\n\r\n        const response = await fetch(url);\r\n        if (!response.ok) throw new Error('Failed to fetch image');\r\n        const arrayBuffer = await response.arrayBuffer();\r\n        return arrayBuffer;\r\n    } catch (error) {\r\n        console.error('Error fetching image for DOCX:', error);\r\n        return null;\r\n    }\r\n}\r\n\r\n/**\r\n * Convert HTML to DOCX paragraphs\r\n */\r\nasync function htmlToDocxElements(htmlString) {\r\n    const parser = new DOMParser();\r\n    const doc = parser.parseFromString(htmlString, 'text/html');\r\n    const elements = [];\r\n\r\n    /**\r\n     * Process inline nodes (text formatting)\r\n     */\r\n    function processInlineNode(node) {\r\n        if (node.nodeType === Node.TEXT_NODE) {\r\n            const text = node.textContent;\r\n            if (text.trim()) {\r\n                return text;\r\n            }\r\n            return '';\r\n        }\r\n\r\n        if (node.nodeType !== Node.ELEMENT_NODE) {\r\n            return '';\r\n        }\r\n\r\n        const tagName = node.tagName.toLowerCase();\r\n        const children = Array.from(node.childNodes)\r\n            .map(processInlineNode)\r\n            .filter(Boolean)\r\n            .join('');\r\n\r\n        if (!children && !node.textContent.trim()) {\r\n            return '';\r\n        }\r\n\r\n        const text = children || node.textContent;\r\n\r\n        switch (tagName) {\r\n            case 'strong':\r\n            case 'b':\r\n                return { text, bold: true };\r\n            case 'em':\r\n            case 'i':\r\n                return { text, italics: true };\r\n            case 'u':\r\n                return { text, underline: {} };\r\n            case 'mark':\r\n            case 'highlight':\r\n                return { text, highlight: 'yellow' };\r\n            default:\r\n                return text;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Process block nodes (paragraphs, headings, etc.)\r\n     */\r\n    async function processBlockNode(node) {\r\n        if (node.nodeType === Node.TEXT_NODE) {\r\n            const text = node.textContent.trim();\r\n            if (!text) return null;\r\n            return new Paragraph({\r\n                children: [new TextRun(text)],\r\n                spacing: { after: 120 }\r\n            });\r\n        }\r\n\r\n        if (node.nodeType !== Node.ELEMENT_NODE) {\r\n            return null;\r\n        }\r\n\r\n        const tagName = node.tagName.toLowerCase();\r\n\r\n        // Process inline children for formatting\r\n        function getTextRuns(node) {\r\n            const runs = [];\r\n\r\n            function traverse(n) {\r\n                if (n.nodeType === Node.TEXT_NODE) {\r\n                    const text = n.textContent;\r\n                    if (text.trim()) {\r\n                        runs.push(new TextRun({ text, size: 24 })); // 12pt\r\n                    }\r\n                } else if (n.nodeType === Node.ELEMENT_NODE) {\r\n                    const tag = n.tagName.toLowerCase();\r\n                    const children = Array.from(n.childNodes);\r\n                    const style = n.getAttribute('style') || '';\r\n                    const fontSizeMatch = style.match(/font-size:\\s*(\\d+)pt/);\r\n                    const size = fontSizeMatch ? parseInt(fontSizeMatch[1]) * 2 : 24;\r\n\r\n                    if (tag === 'strong' || tag === 'b') {\r\n                        const text = n.textContent;\r\n                        if (text.trim()) {\r\n                            runs.push(new TextRun({ text, bold: true, size }));\r\n                        }\r\n                    } else if (tag === 'em' || tag === 'i') {\r\n                        const text = n.textContent;\r\n                        if (text.trim()) {\r\n                            runs.push(new TextRun({ text, italics: true, size }));\r\n                        }\r\n                    } else if (tag === 'u') {\r\n                        const text = n.textContent;\r\n                        if (text.trim()) {\r\n                            runs.push(new TextRun({ text, underline: {}, size }));\r\n                        }\r\n                    } else {\r\n                        children.forEach(child => traverse(child));\r\n                    }\r\n                }\r\n            }\r\n\r\n            traverse(node);\r\n            return runs.length > 0 ? runs : [new TextRun({ text: '', size: 24 })];\r\n        }\r\n\r\n        const textRuns = getTextRuns(node);\r\n\r\n        switch (tagName) {\r\n            case 'h1':\r\n                return new Paragraph({\r\n                    children: textRuns,\r\n                    heading: HeadingLevel.HEADING_1,\r\n                    spacing: { after: 240 }\r\n                });\r\n            case 'h2':\r\n                return new Paragraph({\r\n                    children: textRuns,\r\n                    heading: HeadingLevel.HEADING_2,\r\n                    spacing: { after: 200 }\r\n                });\r\n            case 'h3':\r\n                return new Paragraph({\r\n                    children: textRuns,\r\n                    heading: HeadingLevel.HEADING_3,\r\n                    spacing: { after: 180 }\r\n                });\r\n            case 'h4':\r\n            case 'h5':\r\n            case 'h6':\r\n                return new Paragraph({\r\n                    children: textRuns,\r\n                    heading: HeadingLevel.HEADING_3,\r\n                    spacing: { after: 180 }\r\n                });\r\n            case 'p':\r\n                return new Paragraph({\r\n                    children: textRuns,\r\n                    spacing: { after: 120 }\r\n                });\r\n            case 'li':\r\n                return new Paragraph({\r\n                    children: textRuns,\r\n                    bullet: { level: 0 },\r\n                    spacing: { after: 80 }\r\n                });\r\n            case 'ul':\r\n            case 'ol':\r\n                // Process list items\r\n                const listItems = [];\r\n                const items = Array.from(node.querySelectorAll('li'));\r\n                for (const li of items) {\r\n                    const res = await processBlockNode(li);\r\n                    if (res) {\r\n                        if (Array.isArray(res)) listItems.push(...res);\r\n                        else listItems.push(res);\r\n                    }\r\n                }\r\n                return listItems;\r\n            case 'blockquote':\r\n                return new Paragraph({\r\n                    children: textRuns,\r\n                    spacing: { before: 120, after: 120 }\r\n                });\r\n            case 'br':\r\n                return new Paragraph({\r\n                    children: [new TextRun('')],\r\n                    spacing: { after: 120 }\r\n                });\r\n            case 'img':\r\n                // Handle images - convert to ImageRun\r\n                const imgSrc = node.getAttribute('src');\r\n                const imgAlt = node.getAttribute('alt') || 'Image';\r\n\r\n                if (imgSrc) {\r\n                    const imageBuffer = await fetchImageAsBuffer(imgSrc);\r\n                    if (imageBuffer) {\r\n                        return new Paragraph({\r\n                            children: [\r\n                                new ImageRun({\r\n                                    data: imageBuffer,\r\n                                    transformation: {\r\n                                        width: 500, // Fixed width for now, could be dynamic\r\n                                        height: 300,\r\n                                    },\r\n                                }),\r\n                            ],\r\n                            spacing: { before: 200, after: 200 },\r\n                            alignment: 'center',\r\n                        });\r\n                    }\r\n                }\r\n\r\n                return new Paragraph({\r\n                    children: [new TextRun({ text: `[${imgAlt}]`, italics: true })],\r\n                    spacing: { after: 120 }\r\n                });\r\n            case 'div':\r\n                // Process div as paragraph if it contains text\r\n                if (textRuns.length > 0 && textRuns[0].text) {\r\n                    return new Paragraph({\r\n                        children: textRuns,\r\n                        spacing: { after: 120 }\r\n                    });\r\n                }\r\n                // Otherwise process children\r\n                const divChildren = [];\r\n                for (const childNode of Array.from(node.childNodes)) {\r\n                    const res = await processBlockNode(childNode);\r\n                    if (res) {\r\n                        if (Array.isArray(res)) divChildren.push(...res);\r\n                        else divChildren.push(res);\r\n                    }\r\n                }\r\n                return divChildren.length > 0 ? divChildren : null;\r\n            default:\r\n                // For other block elements, process children\r\n                const otherChildren = [];\r\n                for (const childNode of Array.from(node.childNodes)) {\r\n                    const res = await processBlockNode(childNode);\r\n                    if (res) {\r\n                        if (Array.isArray(res)) otherChildren.push(...res);\r\n                        else otherChildren.push(res);\r\n                    }\r\n                }\r\n                return otherChildren.length > 0 ? otherChildren : null;\r\n        }\r\n    }\r\n\r\n    // Process body children using a recursive async approach for element resolution\r\n    const bodyChildren = Array.from(doc.body.childNodes);\r\n    for (const node of bodyChildren) {\r\n        const result = await processBlockNode(node);\r\n        if (result) {\r\n            if (Array.isArray(result)) {\r\n                elements.push(...result);\r\n            } else {\r\n                elements.push(result);\r\n            }\r\n        }\r\n    }\r\n\r\n    // If no elements, add empty paragraph\r\n    if (elements.length === 0) {\r\n        elements.push(new Paragraph({ children: [new TextRun('')] }));\r\n    }\r\n\r\n    return elements;\r\n}\r\n\r\n/**\r\n * Export the editor content to a Word (.docx) file.\r\n */\r\nexport const exportToWord = async (htmlContent, fileName = 'document.docx', options = {}) => {\r\n    console.log('Initiating Word Export for:', fileName);\r\n\r\n    const {\r\n        title = 'Document',\r\n        description = 'Academic Document created with Docley',\r\n        margins,\r\n        headerText\r\n    } = options;\r\n\r\n    try {\r\n        // Clean HTML content\r\n        const cleanHTML = deepCleanHTML(htmlContent);\r\n\r\n        // Convert HTML to DOCX elements\r\n        const docxElements = await htmlToDocxElements(cleanHTML);\r\n\r\n        // Create DOCX document\r\n        const doc = new Document({\r\n            sections: [{\r\n                properties: {\r\n                    page: {\r\n                        margin: margins ? {\r\n                            top: (margins.top / 96) * 1440, // convert px to twips (approx)\r\n                            bottom: (margins.bottom / 96) * 1440,\r\n                            left: (margins.left / 96) * 1440,\r\n                            right: (margins.right / 96) * 1440,\r\n                        } : {\r\n                            top: 1440,\r\n                            bottom: 1440,\r\n                            left: 1440,\r\n                            right: 1440,\r\n                        }\r\n                    }\r\n                },\r\n                headers: headerText ? {\r\n                    default: new Header({\r\n                        children: [\r\n                            new Paragraph({\r\n                                children: [new TextRun({ text: headerText, size: 18, color: \"64748B\" })],\r\n                                alignment: \"center\",\r\n                            }),\r\n                        ],\r\n                    }),\r\n                } : {},\r\n                children: docxElements\r\n            }],\r\n            title,\r\n            description,\r\n            creator: 'Docley',\r\n            created: new Date()\r\n        });\r\n\r\n        // Generate blob\r\n        const blob = await Packer.toBlob(doc);\r\n\r\n        // Download file\r\n        const url = URL.createObjectURL(blob);\r\n        const link = document.createElement('a');\r\n        link.href = url;\r\n        link.download = fileName.endsWith('.docx') ? fileName : `${fileName}.docx`;\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n        URL.revokeObjectURL(url);\r\n\r\n        console.log('Word Export successful');\r\n    } catch (error) {\r\n        console.error('Word Export failed details:', error);\r\n        throw error;\r\n    }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\pages\\Landing.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'words' array makes the dependencies of useEffect Hook (at line 40) change on every render. Move it inside the useEffect callback. Alternatively, wrap the initialization of 'words' in its own useMemo() Hook.","line":13,"column":11,"nodeType":"VariableDeclarator","endLine":13,"endColumn":100},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  33 |             }, 50);\n  34 |         } else if (isDeleting && currentText.length === 0) {\n> 35 |             setIsDeleting(false);\n     |             ^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  36 |             setCurrentWordIndex((prev) => (prev + 1) % words.length);\n  37 |         }\n  38 |","line":35,"column":13,"nodeType":null,"endLine":35,"endColumn":26},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  374 |                         className=\"absolute rounded-full bg-white/20 blur-xl animate-blob\"\n  375 |                         style={{\n> 376 |                             width: `${Math.random() * 200 + 100}px`,\n      |                                       ^^^^^^^^^^^^^ Cannot call impure function\n  377 |                             height: `${Math.random() * 200 + 100}px`,\n  378 |                             left: `${Math.random() * 100}%`,\n  379 |                             top: `${Math.random() * 100}%`,","line":376,"column":39,"nodeType":null,"endLine":376,"endColumn":52},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  375 |                         style={{\n  376 |                             width: `${Math.random() * 200 + 100}px`,\n> 377 |                             height: `${Math.random() * 200 + 100}px`,\n      |                                        ^^^^^^^^^^^^^ Cannot call impure function\n  378 |                             left: `${Math.random() * 100}%`,\n  379 |                             top: `${Math.random() * 100}%`,\n  380 |                             animationDelay: `${i * 0.5}s`,","line":377,"column":40,"nodeType":null,"endLine":377,"endColumn":53},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  376 |                             width: `${Math.random() * 200 + 100}px`,\n  377 |                             height: `${Math.random() * 200 + 100}px`,\n> 378 |                             left: `${Math.random() * 100}%`,\n      |                                      ^^^^^^^^^^^^^ Cannot call impure function\n  379 |                             top: `${Math.random() * 100}%`,\n  380 |                             animationDelay: `${i * 0.5}s`,\n  381 |                             animationDuration: `${10 + Math.random() * 10}s`,","line":378,"column":38,"nodeType":null,"endLine":378,"endColumn":51},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  377 |                             height: `${Math.random() * 200 + 100}px`,\n  378 |                             left: `${Math.random() * 100}%`,\n> 379 |                             top: `${Math.random() * 100}%`,\n      |                                     ^^^^^^^^^^^^^ Cannot call impure function\n  380 |                             animationDelay: `${i * 0.5}s`,\n  381 |                             animationDuration: `${10 + Math.random() * 10}s`,\n  382 |                         }}","line":379,"column":37,"nodeType":null,"endLine":379,"endColumn":50},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  379 |                             top: `${Math.random() * 100}%`,\n  380 |                             animationDelay: `${i * 0.5}s`,\n> 381 |                             animationDuration: `${10 + Math.random() * 10}s`,\n      |                                                        ^^^^^^^^^^^^^ Cannot call impure function\n  382 |                         }}\n  383 |                     />\n  384 |                 ))}","line":381,"column":56,"nodeType":null,"endLine":381,"endColumn":69},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  444 |\n  445 |     useEffect(() => {\n> 446 |         setIsVisible(true);\n      |         ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  447 |     }, []);\n  448 |\n  449 |     const bentoTopRight = useMemo(() => ([","line":446,"column":9,"nodeType":null,"endLine":446,"endColumn":21}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useMemo, useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { ArrowRight, Check, ChevronDown, Download, FileText, GraduationCap, Layout, ShieldCheck, Sparkles, Wand2, X } from 'lucide-react';\r\nimport { Button } from '../components/ui/Button';\r\nimport { Card } from '../components/ui/Card';\r\nimport { Footer } from '../components/layout/Footer';\r\nimport { Navbar } from '../components/layout/Navbar';\r\nimport { cn } from '../lib/utils';\r\nimport { useTheme } from '../context/ThemeContext';\r\n\r\n// Typing Text Component\r\nfunction TypingText({ isDark }) {\r\n    const words = ['assignments', 'research papers', 'thesis', 'case studies', 'reports', 'essays'];\r\n    const [currentWordIndex, setCurrentWordIndex] = useState(0);\r\n    const [currentText, setCurrentText] = useState('');\r\n    const [isDeleting, setIsDeleting] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const currentWord = words[currentWordIndex];\r\n        let timeout;\r\n\r\n        if (!isDeleting && currentText.length < currentWord.length) {\r\n            timeout = setTimeout(() => {\r\n                setCurrentText(currentWord.substring(0, currentText.length + 1));\r\n            }, 100);\r\n        } else if (!isDeleting && currentText.length === currentWord.length) {\r\n            timeout = setTimeout(() => {\r\n                setIsDeleting(true);\r\n            }, 2000);\r\n        } else if (isDeleting && currentText.length > 0) {\r\n            timeout = setTimeout(() => {\r\n                setCurrentText(currentWord.substring(0, currentText.length - 1));\r\n            }, 50);\r\n        } else if (isDeleting && currentText.length === 0) {\r\n            setIsDeleting(false);\r\n            setCurrentWordIndex((prev) => (prev + 1) % words.length);\r\n        }\r\n\r\n        return () => clearTimeout(timeout);\r\n    }, [currentText, isDeleting, currentWordIndex, words]);\r\n\r\n    return (\r\n        <span className=\"inline-block\">\r\n            <span className={cn(\r\n                \"bg-gradient-to-r bg-clip-text text-transparent\",\r\n                isDark\r\n                    ? \"from-orange-400 to-blue-400\"\r\n                    : \"from-orange-500 to-blue-500\"\r\n            )}>\r\n                {currentText}\r\n            </span>\r\n            <span className={cn(\r\n                \"animate-pulse\",\r\n                isDark ? \"text-orange-400\" : \"text-orange-500\"\r\n            )}>\r\n                |\r\n            </span>\r\n        </span>\r\n    );\r\n}\r\n\r\nfunction FAQItem({ item, isOpen, onToggle, isDark }) {\r\n    return (\r\n        <button\r\n            type=\"button\"\r\n            onClick={onToggle}\r\n            className={cn(\r\n                \"w-full text-left rounded-xl border backdrop-blur-xl px-5 py-4 transition-all duration-300\",\r\n                isDark\r\n                    ? \"border-white/10 bg-white/5 hover:bg-white/10 hover:border-white/20\"\r\n                    : \"border-blue-200 bg-white hover:bg-blue-50 hover:border-blue-300 shadow-sm\",\r\n                isOpen && (isDark ? \"shadow-lg bg-white/10\" : \"shadow-md bg-blue-50\")\r\n            )}\r\n            aria-expanded={isOpen}\r\n        >\r\n            <div className=\"flex items-center justify-between gap-4\">\r\n                <span className={cn(\r\n                    \"font-semibold\",\r\n                    isDark ? \"text-white\" : \"text-slate-900\"\r\n                )}>{item.q}</span>\r\n                <ChevronDown className={cn(\r\n                    \"h-4 w-4 transition-transform duration-300\",\r\n                    isDark\r\n                        ? isOpen ? \"rotate-180 text-orange-400\" : \"text-slate-400\"\r\n                        : isOpen ? \"rotate-180 text-orange-500\" : \"text-slate-500\"\r\n                )} />\r\n            </div>\r\n            {isOpen && (\r\n                <div className={cn(\r\n                    \"mt-3 text-sm leading-relaxed animate-in fade-in slide-in-from-top-2 duration-300\",\r\n                    isDark ? \"text-slate-300\" : \"text-slate-600\"\r\n                )}>\r\n                    {item.a}\r\n                </div>\r\n            )}\r\n        </button>\r\n    );\r\n}\r\n\r\nfunction BrowserFrame({ url, children, isDark }) {\r\n    return (\r\n        <div className={cn(\r\n            \"overflow-hidden rounded-[32px] border backdrop-blur-xl shadow-2xl\",\r\n            isDark\r\n                ? \"border-white/20 bg-white/5 shadow-black/20\"\r\n                : \"border-blue-200 bg-white shadow-blue-500/10\"\r\n        )}>\r\n            <div className={cn(\r\n                \"flex items-center gap-2 border-b backdrop-blur-sm px-5 py-3\",\r\n                isDark\r\n                    ? \"border-white/10 bg-white/5\"\r\n                    : \"border-blue-100 bg-white\"\r\n            )}>\r\n                <div className=\"flex gap-2\">\r\n                    <span className=\"h-3 w-3 rounded-full bg-red-500/50\" />\r\n                    <span className=\"h-3 w-3 rounded-full bg-yellow-500/50\" />\r\n                    <span className=\"h-3 w-3 rounded-full bg-green-500/50\" />\r\n                </div>\r\n                <div className={cn(\r\n                    \"mx-auto hidden h-8 w-[46%] items-center justify-center rounded-lg border backdrop-blur-sm text-xs font-medium shadow-sm md:flex\",\r\n                    isDark\r\n                        ? \"border-white/10 bg-white/5 text-white/70\"\r\n                        : \"border-blue-200 bg-white text-slate-500\"\r\n                )}>\r\n                    {url}\r\n                </div>\r\n            </div>\r\n            {children}\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction ProductUIMock({ isDark }) {\r\n    return (\r\n        <div className={cn(\r\n            \"relative aspect-[16/9] transition-colors duration-300\",\r\n            isDark\r\n                ? \"bg-gradient-to-br from-slate-900 to-slate-950\"\r\n                : \"bg-gradient-to-br from-slate-50 to-white\"\r\n        )}>\r\n            <div className=\"absolute inset-0 p-5 md:p-7\">\r\n                <div className=\"grid h-full grid-cols-12 gap-4\">\r\n                    {/* sidebar */}\r\n                    <div className=\"col-span-4 hidden md:block\">\r\n                        <div className={cn(\r\n                            \"h-full rounded-2xl border backdrop-blur-xl p-4 shadow-lg transition-colors duration-300\",\r\n                            isDark\r\n                                ? \"border-white/10 bg-white/5\"\r\n                                : \"border-blue-200 bg-white\"\r\n                        )}>\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className=\"flex h-9 w-9 items-center justify-center rounded-xl bg-gradient-to-br from-orange-500 to-blue-500 text-white font-bold shadow-lg\">D</div>\r\n                                <div className=\"min-w-0\">\r\n                                    <div className={cn(\r\n                                        \"truncate text-sm font-semibold\",\r\n                                        isDark ? \"text-white\" : \"text-slate-900\"\r\n                                    )}>Dashboard</div>\r\n                                    <div className={cn(\r\n                                        \"truncate text-xs\",\r\n                                        isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                                    )}>Free plan</div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"mt-5 space-y-2\">\r\n                                {[\"Overview\", \"My Documents\", \"Settings\"].map((i, idx) => (\r\n                                    <div\r\n                                        key={i}\r\n                                        className={cn(\r\n                                            \"rounded-xl px-3 py-2 text-xs font-semibold border transition-colors\",\r\n                                            idx === 1\r\n                                                ? isDark\r\n                                                    ? \"border-orange-500/30 bg-orange-500/10 text-orange-300\"\r\n                                                    : \"border-orange-200 bg-orange-50 text-orange-700\"\r\n                                                : isDark\r\n                                                    ? \"border-white/10 bg-white/5 text-slate-300 hover:bg-white/10\"\r\n                                                    : \"border-blue-200 bg-white text-slate-700 hover:bg-blue-50\"\r\n                                        )}\r\n                                    >\r\n                                        {i}\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                            <div className={cn(\r\n                                \"mt-6 rounded-2xl border backdrop-blur-sm p-3\",\r\n                                isDark\r\n                                    ? \"border-white/10 bg-white/5\"\r\n                                    : \"border-blue-200 bg-blue-50/50\"\r\n                            )}>\r\n                                <div className={cn(\r\n                                    \"text-[11px] font-semibold\",\r\n                                    isDark ? \"text-white\" : \"text-slate-900\"\r\n                                )}>Usage</div>\r\n                                <div className={cn(\r\n                                    \"mt-2 h-2 rounded-full\",\r\n                                    isDark ? \"bg-white/10\" : \"bg-blue-200\"\r\n                                )}>\r\n                                    <div className=\"h-2 w-1/3 rounded-full bg-gradient-to-r from-orange-500 to-blue-500\" />\r\n                                </div>\r\n                                <div className={cn(\r\n                                    \"mt-2 text-[11px]\",\r\n                                    isDark ? \"text-slate-400\" : \"text-slate-600\"\r\n                                )}>1/3 upgrades used</div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* editor */}\r\n                    <div className=\"col-span-12 md:col-span-8\">\r\n                        <div className={cn(\r\n                            \"h-full overflow-hidden rounded-2xl border backdrop-blur-xl shadow-lg transition-colors duration-300\",\r\n                            isDark\r\n                                ? \"border-white/10 bg-white/5\"\r\n                                : \"border-blue-200 bg-white\"\r\n                        )}>\r\n                            <div className={cn(\r\n                                \"flex items-center justify-between border-b backdrop-blur-sm px-4 py-3\",\r\n                                isDark\r\n                                    ? \"border-white/10 bg-white/5\"\r\n                                    : \"border-blue-100 bg-white\"\r\n                            )}>\r\n                                <div className=\"min-w-0\">\r\n                                    <div className={cn(\r\n                                        \"truncate text-sm font-semibold\",\r\n                                        isDark ? \"text-white\" : \"text-slate-900\"\r\n                                    )}>Economics 101: Inflation Analysis</div>\r\n                                    <div className={cn(\r\n                                        \"text-xs\",\r\n                                        isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                                    )}>APA 7th â€¢ Undergraduate</div>\r\n                                </div>\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <div className={cn(\r\n                                        \"rounded-lg border backdrop-blur-sm px-3 py-1.5 text-[11px] font-semibold\",\r\n                                        isDark\r\n                                            ? \"border-white/10 bg-white/5 text-slate-300\"\r\n                                            : \"border-blue-200 bg-white text-slate-600\"\r\n                                    )}>\r\n                                        Export\r\n                                    </div>\r\n                                    <div className=\"rounded-lg bg-gradient-to-r from-orange-500 to-orange-600 px-3 py-1.5 text-[11px] font-semibold text-white shadow-lg shadow-orange-500/30\">\r\n                                        Run upgrade\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"grid h-[calc(100%-48px)] grid-cols-12\">\r\n                                <div className=\"col-span-12 lg:col-span-8 p-4\">\r\n                                    <div className={cn(\r\n                                        \"rounded-xl border backdrop-blur-sm p-4\",\r\n                                        isDark\r\n                                            ? \"border-white/10 bg-white/5\"\r\n                                            : \"border-blue-200 bg-blue-50/50\"\r\n                                    )}>\r\n                                        <div className={cn(\r\n                                            \"h-2 w-40 rounded\",\r\n                                            isDark ? \"bg-white/20\" : \"bg-blue-200\"\r\n                                        )} />\r\n                                        <div className=\"mt-3 space-y-2\">\r\n                                            <div className={cn(\r\n                                                \"h-2 w-full rounded\",\r\n                                                isDark ? \"bg-white/10\" : \"bg-blue-100\"\r\n                                            )} />\r\n                                            <div className={cn(\r\n                                                \"h-2 w-[94%] rounded\",\r\n                                                isDark ? \"bg-white/10\" : \"bg-blue-100\"\r\n                                            )} />\r\n                                            <div className={cn(\r\n                                                \"h-2 w-[88%] rounded\",\r\n                                                isDark ? \"bg-white/10\" : \"bg-blue-100\"\r\n                                            )} />\r\n                                            <div className={cn(\r\n                                                \"h-2 w-[82%] rounded\",\r\n                                                isDark ? \"bg-white/10\" : \"bg-blue-100\"\r\n                                            )} />\r\n                                        </div>\r\n                                        <div className={cn(\r\n                                            \"mt-4 inline-flex items-center gap-2 rounded-full border backdrop-blur-sm px-3 py-1 text-[11px] font-semibold\",\r\n                                            isDark\r\n                                                ? \"border-orange-500/30 bg-orange-500/10 text-orange-300\"\r\n                                                : \"border-orange-200 bg-orange-50 text-orange-700\"\r\n                                        )}>\r\n                                            Highlight: informal phrase\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className={cn(\r\n                                    \"hidden lg:block lg:col-span-4 border-l p-4\",\r\n                                    isDark ? \"border-white/10\" : \"border-blue-100\"\r\n                                )}>\r\n                                    <div className={cn(\r\n                                        \"rounded-xl border backdrop-blur-sm p-4\",\r\n                                        isDark\r\n                                            ? \"border-white/10 bg-white/5\"\r\n                                            : \"border-blue-200 bg-white\"\r\n                                    )}>\r\n                                        <div className=\"flex items-center justify-between\">\r\n                                            <div className={cn(\r\n                                                \"text-xs font-semibold\",\r\n                                                isDark ? \"text-white\" : \"text-slate-900\"\r\n                                            )}>Diagnostics</div>\r\n                                            <div className=\"text-xs font-bold text-orange-500\">B+</div>\r\n                                        </div>\r\n                                        <div className=\"mt-3 space-y-3\">\r\n                                            {[\r\n                                                { label: \"Structure\", value: 82 },\r\n                                                { label: \"Tone\", value: 74 },\r\n                                                { label: \"Clarity\", value: 90 },\r\n                                            ].map((row) => (\r\n                                                <div key={row.label}>\r\n                                                    <div className={cn(\r\n                                                        \"flex items-center justify-between text-[11px]\",\r\n                                                        isDark ? \"text-slate-300\" : \"text-slate-600\"\r\n                                                    )}>\r\n                                                        <span>{row.label}</span>\r\n                                                        <span className={cn(\r\n                                                            \"font-semibold\",\r\n                                                            isDark ? \"text-white\" : \"text-slate-900\"\r\n                                                        )}>{row.value}</span>\r\n                                                    </div>\r\n                                                    <div className={cn(\r\n                                                        \"mt-1 h-1.5 rounded-full\",\r\n                                                        isDark ? \"bg-white/10\" : \"bg-blue-100\"\r\n                                                    )}>\r\n                                                        <div className=\"h-1.5 rounded-full bg-gradient-to-r from-orange-500 to-blue-500\" style={{ width: `${row.value}%` }} />\r\n                                                    </div>\r\n                                                </div>\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className={cn(\r\n                                        \"mt-3 rounded-xl border backdrop-blur-sm p-4 text-[11px]\",\r\n                                        isDark\r\n                                            ? \"border-white/10 bg-white/5 text-slate-300\"\r\n                                            : \"border-blue-200 bg-blue-50/50 text-slate-600\"\r\n                                    )}>\r\n                                        <span className={cn(\r\n                                            \"font-semibold\",\r\n                                            isDark ? \"text-white\" : \"text-slate-900\"\r\n                                        )}>Suggestion:</span> strengthen topic sentences in paragraphs 2â€“3.\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction LifestyleHeroMock({ isDark }) {\r\n    return (\r\n        <div className={cn(\r\n            \"relative aspect-[16/9] overflow-hidden transition-colors duration-300\",\r\n            isDark\r\n                ? \"bg-gradient-to-br from-orange-500 via-orange-600 to-blue-600\"\r\n                : \"bg-gradient-to-br from-orange-400 via-blue-400 to-blue-500\"\r\n        )}>\r\n            {/* Animated gradient overlays */}\r\n            <div className=\"absolute inset-0 opacity-40 [background-image:radial-gradient(circle_at_20%_30%,rgba(255,255,255,0.3),transparent_50%),radial-gradient(circle_at_80%_70%,rgba(59,130,246,0.3),transparent_50%)] animate-pulse\" />\r\n            <div className={cn(\r\n                \"absolute inset-0 bg-gradient-to-t\",\r\n                isDark\r\n                    ? \"from-slate-900/60 via-slate-900/20 to-transparent\"\r\n                    : \"from-white/40 via-white/10 to-transparent\"\r\n            )} />\r\n\r\n            {/* Floating particles */}\r\n            <div className=\"absolute inset-0\">\r\n                {[...Array(6)].map((_, i) => (\r\n                    <div\r\n                        key={i}\r\n                        className=\"absolute rounded-full bg-white/20 blur-xl animate-blob\"\r\n                        style={{\r\n                            width: `${Math.random() * 200 + 100}px`,\r\n                            height: `${Math.random() * 200 + 100}px`,\r\n                            left: `${Math.random() * 100}%`,\r\n                            top: `${Math.random() * 100}%`,\r\n                            animationDelay: `${i * 0.5}s`,\r\n                            animationDuration: `${10 + Math.random() * 10}s`,\r\n                        }}\r\n                    />\r\n                ))}\r\n            </div>\r\n\r\n            <div className=\"absolute inset-0 p-6 md:p-10\">\r\n                <div className=\"relative h-full\">\r\n                    <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                        <div className=\"relative w-full max-w-5xl\">\r\n                            <div className=\"relative overflow-hidden rounded-3xl border border-white/20 bg-white/10 shadow-2xl backdrop-blur-sm animate-in fade-in duration-1000\">\r\n                                <div className=\"relative aspect-[16/9]\">\r\n                                    <img\r\n                                        src=\"https://images.unsplash.com/photo-1522071820081-009f0129c71c?auto=format&fit=crop&q=80&w=2000\"\r\n                                        alt=\"Students collaborating on an assignment\"\r\n                                        className=\"absolute inset-0 h-full w-full object-cover opacity-90\"\r\n                                    />\r\n                                    <div className={cn(\r\n                                        \"absolute inset-0 bg-gradient-to-t\",\r\n                                        isDark\r\n                                            ? \"from-slate-900/50 via-slate-900/15 to-transparent\"\r\n                                            : \"from-white/30 via-white/10 to-transparent\"\r\n                                    )} />\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Glass overlay prompt with enhanced styling */}\r\n                            <div className=\"absolute left-1/2 top-1/2 w-[min(560px,92%)] -translate-x-1/2 -translate-y-1/2 rounded-2xl border border-white/20 bg-gradient-to-br from-white/10 to-white/5 p-6 text-white shadow-2xl backdrop-blur-xl animate-in zoom-in-95 duration-1000 delay-300\">\r\n                                <div className=\"flex items-center justify-between gap-3 mb-2\">\r\n                                    <span className=\"inline-flex items-center rounded-full bg-gradient-to-r from-orange-500/30 to-blue-500/30 border border-white/20 px-3 py-1 text-xs font-semibold backdrop-blur-sm\">\r\n                                        <Sparkles className=\"h-3 w-3 mr-1.5\" />\r\n                                        What should I improve?\r\n                                    </span>\r\n                                    <span className=\"text-xs text-white/80 font-medium\">Docley AI</span>\r\n                                </div>\r\n                                <p className=\"mt-3 text-sm leading-relaxed text-white/95 font-medium\">\r\n                                    \"Your introduction is clear, but strengthen the thesis statement and add a citation to the key statistic.\"\r\n                                </p>\r\n                                <div className=\"mt-4 grid gap-2 sm:grid-cols-2 text-xs\">\r\n                                    <div className=\"rounded-xl border border-white/20 bg-white/10 backdrop-blur-sm px-3 py-2 text-white/90 hover:bg-white/15 transition-colors\">\r\n                                        Improve academic tone\r\n                                    </div>\r\n                                    <div className=\"rounded-xl border border-white/20 bg-white/10 backdrop-blur-sm px-3 py-2 text-white/90 hover:bg-white/15 transition-colors\">\r\n                                        Add citations to claims\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"mt-4 rounded-xl border border-white/15 bg-white/5 backdrop-blur-sm px-4 py-3 text-xs text-white/70\">\r\n                                    Ask anything about your assignmentâ€¦\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default function Landing() {\r\n    const [openFaq, setOpenFaq] = useState(0);\r\n    const [isVisible, setIsVisible] = useState(false);\r\n    const { theme } = useTheme();\r\n    const isDark = theme === 'dark';\r\n\r\n    useEffect(() => {\r\n        setIsVisible(true);\r\n    }, []);\r\n\r\n    const bentoTopRight = useMemo(() => ([\r\n        {\r\n            title: \"Rewrite with academic tone\",\r\n            description: \"Upgrade register, grammar, and precisionâ€”without losing your meaning.\",\r\n            icon: Wand2,\r\n            accent: \"from-blue-600 to-violet-600\",\r\n            chips: [\"Tone\", \"Clarity\", \"Grammar\"],\r\n        },\r\n        {\r\n            title: \"Integrity-first workflow\",\r\n            description: \"Transform your draft (not a generic essay) so your ideas stay yours.\",\r\n            icon: ShieldCheck,\r\n            accent: \"from-indigo-600 to-sky-600\",\r\n            chips: [\"Your voice\", \"Safer edits\", \"Transparent\"],\r\n        },\r\n    ]), []);\r\n\r\n    const bentoBottom = useMemo(() => ([\r\n        {\r\n            title: \"Structure & flow\",\r\n            description: \"Strengthen paragraphs, transitions, and argument order.\",\r\n            icon: Layout,\r\n        },\r\n        {\r\n            title: \"Citation awareness\",\r\n            description: \"Spot uncited claims and keep styles consistent (APA/MLA/Harvard/Chicago).\",\r\n            icon: FileText,\r\n        },\r\n        {\r\n            title: \"Export-ready output\",\r\n            description: \"Download as PDF, Word, or plain text when youâ€™re finished.\",\r\n            icon: Download,\r\n        },\r\n    ]), []);\r\n\r\n    const steps = useMemo(() => ([\r\n        { title: \"Create a document\", description: \"Add title, level, type, and citation style.\" },\r\n        { title: \"Paste or write\", description: \"Work inside the built-in editor and keep control.\" },\r\n        { title: \"Run upgrade + export\", description: \"Apply improvements and export when ready.\" },\r\n    ]), []);\r\n\r\n    const faq = useMemo(() => ([\r\n        { q: \"Is this safe for academic integrity?\", a: \"Docley is built to transform your existing draftâ€”improving tone, structure, and clarity while keeping your ideas and direction intact.\" },\r\n        { q: \"What citation styles do you support?\", a: \"APA 7th Edition, MLA 9th Edition, Harvard, and Chicago.\" },\r\n        { q: \"Can I export to PDF or Word?\", a: \"Yes. Export options include PDF, Word (.docx), and plain text.\" },\r\n        { q: \"Do you support uploads (PDF/DOCX)?\", a: \"Text paste is supported today. File uploads are a planned upgrade.\" },\r\n        { q: \"Is there a free plan?\", a: \"Yesâ€”start free and upgrade anytime. See Pricing for details.\" },\r\n    ]), []);\r\n\r\n    return (\r\n        <div className={cn(\r\n            \"min-h-screen font-sans transition-colors duration-300\",\r\n            isDark\r\n                ? \"bg-slate-950 selection:bg-orange-500/30 selection:text-white\"\r\n                : \"bg-white selection:bg-blue-200 selection:text-blue-900\"\r\n        )}>\r\n            <Navbar />\r\n\r\n            {/* HERO */}\r\n            <section className={cn(\r\n                \"relative overflow-hidden min-h-screen flex items-center transition-colors duration-300\",\r\n                isDark\r\n                    ? \"bg-gradient-to-b from-slate-950 via-slate-900 to-slate-950\"\r\n                    : \"bg-gradient-to-b from-white via-blue-50/30 to-white\"\r\n            )}>\r\n                {/* Animated gradient background */}\r\n                <div className=\"pointer-events-none absolute inset-0\">\r\n                    {/* Large gradient orbs */}\r\n                    <div className={cn(\r\n                        \"absolute top-0 left-1/4 w-[600px] h-[600px] rounded-full blur-3xl animate-blob\",\r\n                        isDark ? \"bg-orange-500/20\" : \"bg-orange-400/10\"\r\n                    )} />\r\n                    <div className={cn(\r\n                        \"absolute top-0 right-1/4 w-[500px] h-[500px] rounded-full blur-3xl animate-blob animation-delay-2000\",\r\n                        isDark ? \"bg-blue-500/20\" : \"bg-blue-400/10\"\r\n                    )} />\r\n                    <div className={cn(\r\n                        \"absolute bottom-0 left-1/2 w-[700px] h-[700px] rounded-full blur-3xl animate-blob animation-delay-4000\",\r\n                        isDark ? \"bg-orange-400/15\" : \"bg-orange-300/8\"\r\n                    )} />\r\n\r\n                    {/* Grid pattern overlay */}\r\n                    <div className={cn(\r\n                        \"absolute inset-0 opacity-[0.15] [background-size:60px_60px]\",\r\n                        isDark\r\n                            ? \"[background-image:linear-gradient(to_right,rgba(255,255,255,0.1)_1px,transparent_1px),linear-gradient(to_bottom,rgba(255,255,255,0.1)_1px,transparent_1px)]\"\r\n                            : \"[background-image:linear-gradient(to_right,rgba(59,130,246,0.1)_1px,transparent_1px),linear-gradient(to_bottom,rgba(59,130,246,0.1)_1px,transparent_1px)]\"\r\n                    )} />\r\n                </div>\r\n\r\n                <div className=\"container relative mx-auto px-4 md:px-6 pt-20 pb-16 md:pt-32 md:pb-24 z-10\">\r\n                    <div className={cn(\"mx-auto max-w-4xl text-center transition-all duration-1000\", isVisible ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-10\")}>\r\n                        <div className={cn(\r\n                            \"inline-flex items-center gap-2 rounded-full border px-4 py-2 text-xs font-semibold backdrop-blur-md mb-6 animate-in fade-in slide-in-from-bottom-4 duration-700\",\r\n                            isDark\r\n                                ? \"border-white/10 bg-white/5 text-white/90\"\r\n                                : \"border-blue-200 bg-white/80 text-blue-700 shadow-sm\"\r\n                        )}>\r\n                            <span className=\"inline-flex h-2 w-2 rounded-full bg-orange-500 animate-pulse\" />\r\n                            <span className=\"bg-gradient-to-r from-orange-500 to-blue-500 bg-clip-text text-transparent\">Diagnostic report + upgrade workflow</span>\r\n                        </div>\r\n\r\n                        <h1 className={cn(\r\n                            \"mt-6 text-5xl font-semibold tracking-tight md:text-7xl lg:text-8xl leading-tight animate-in fade-in slide-in-from-bottom-6 duration-1000 delay-100\",\r\n                            isDark ? \"text-white\" : \"text-slate-900\"\r\n                        )}>\r\n                            Upgrade your <TypingText isDark={isDark} /> to\r\n                            <span className=\"block mt-2 bg-gradient-to-r from-orange-500 via-orange-600 to-blue-500 bg-clip-text text-transparent animate-gradient\">\r\n                                submission-ready quality\r\n                            </span>\r\n                        </h1>\r\n\r\n                        <p className={cn(\r\n                            \"mt-6 text-lg md:text-xl max-w-2xl mx-auto leading-relaxed animate-in fade-in slide-in-from-bottom-8 duration-1000 delay-200\",\r\n                            isDark ? \"text-slate-300\" : \"text-slate-600\"\r\n                        )}>\r\n                            Paste your draft, run an academic upgrade, and export a cleaner, clearer versionâ€”without losing your voice.\r\n                        </p>\r\n\r\n                        <div className=\"mt-10 flex flex-col items-center justify-center gap-4 sm:flex-row animate-in fade-in slide-in-from-bottom-10 duration-1000 delay-300\">\r\n                            <Link to=\"/signup\" className=\"w-full sm:w-auto group\">\r\n                                <Button size=\"lg\" className=\"w-full sm:w-auto h-14 px-8 text-base font-semibold bg-indigo-600 hover:bg-indigo-700 text-white border-0 shadow-xl shadow-indigo-500/20 transition-all duration-300 hover:scale-105\">\r\n                                    Get Started Free <ArrowRight className=\"ml-2 h-5 w-5 group-hover:translate-x-1 transition-transform\" />\r\n                                </Button>\r\n                            </Link>\r\n                            <Link to=\"/dashboard\" className=\"w-full sm:w-auto\">\r\n                                <Button variant=\"outline\" size=\"lg\" className={cn(\r\n                                    \"w-full sm:w-auto h-14 px-8 text-base font-semibold backdrop-blur-md transition-all duration-300 hover:scale-105\",\r\n                                    isDark\r\n                                        ? \"bg-white/5 border-white/20 text-white hover:bg-white/10\"\r\n                                        : \"bg-white border-blue-200 text-blue-700 hover:bg-blue-50 shadow-sm\"\r\n                                )}>\r\n                                    View Dashboard\r\n                                </Button>\r\n                            </Link>\r\n                        </div>\r\n\r\n                        <div className={cn(\r\n                            \"mt-8 flex flex-wrap items-center justify-center gap-x-8 gap-y-3 text-sm animate-in fade-in slide-in-from-bottom-12 duration-1000 delay-400\",\r\n                            isDark ? \"text-slate-400\" : \"text-slate-600\"\r\n                        )}>\r\n                            <span className=\"inline-flex items-center gap-2\"><Check className=\"h-5 w-5 text-orange-500\" /> No credit card</span>\r\n                            <span className=\"inline-flex items-center gap-2\"><Check className=\"h-5 w-5 text-blue-500\" /> Export-ready</span>\r\n                            <span className=\"inline-flex items-center gap-2\"><Check className=\"h-5 w-5 text-orange-500\" /> Built for university writing</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* hero media (image + glass overlay) */}\r\n                    <div className={cn(\"mt-16 md:mt-20 transition-all duration-1000 delay-500\", isVisible ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-10\")}>\r\n                        <div className=\"relative mx-auto max-w-6xl\">\r\n                            <div className={cn(\r\n                                \"absolute inset-0 -z-10 rounded-[32px] blur-3xl opacity-50 animate-pulse\",\r\n                                isDark\r\n                                    ? \"bg-gradient-to-r from-orange-500/30 via-blue-500/30 to-orange-500/30\"\r\n                                    : \"bg-gradient-to-r from-orange-400/20 via-blue-400/20 to-orange-400/20\"\r\n                            )} />\r\n                            <BrowserFrame url=\"docley.app/assist\" isDark={isDark}>\r\n                                <LifestyleHeroMock isDark={isDark} />\r\n                            </BrowserFrame>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n\r\n            {/* LOGO STRIP */}\r\n            <section className={cn(\r\n                \"relative py-12 md:py-16 overflow-hidden transition-colors duration-300\",\r\n                isDark\r\n                    ? \"bg-gradient-to-b from-slate-950 to-slate-900\"\r\n                    : \"bg-gradient-to-b from-white to-blue-50/30\"\r\n            )}>\r\n                <div className={cn(\r\n                    \"absolute inset-0\",\r\n                    isDark\r\n                        ? \"bg-[radial-gradient(circle_at_50%_50%,rgba(249,115,22,0.1),transparent_70%)]\"\r\n                        : \"bg-[radial-gradient(circle_at_50%_50%,rgba(59,130,246,0.05),transparent_70%)]\"\r\n                )} />\r\n                <div className=\"container relative mx-auto px-4 md:px-6 z-10\">\r\n                    <div className=\"mx-auto max-w-4xl\">\r\n                        <p className={cn(\r\n                            \"text-center text-xs font-semibold tracking-wide uppercase mb-8\",\r\n                            isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                        )}>\r\n                            Works with your workflow\r\n                        </p>\r\n                        <div className=\"flex flex-wrap items-center justify-center gap-3\">\r\n                            {[\r\n                                \"PDF export\",\r\n                                \"Word (.docx)\",\r\n                                \"Plain text\",\r\n                                \"APA 7th\",\r\n                                \"MLA 9th\",\r\n                                \"Harvard\",\r\n                                \"Chicago\",\r\n                            ].map((name, idx) => (\r\n                                <div\r\n                                    key={name}\r\n                                    className={cn(\r\n                                        \"flex items-center justify-center rounded-full border backdrop-blur-sm px-5 py-2.5 text-xs font-semibold shadow-lg transition-all duration-300 hover:scale-105 animate-in fade-in slide-in-from-bottom-4\",\r\n                                        isDark\r\n                                            ? \"border-white/10 bg-white/5 text-white/90 hover:bg-white/10 hover:border-white/20\"\r\n                                            : \"border-blue-200 bg-white text-blue-700 hover:bg-blue-50 hover:border-blue-300 shadow-blue-500/10\"\r\n                                    )}\r\n                                    style={{ animationDelay: `${idx * 50}ms` }}\r\n                                >\r\n                                    {name}\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n\r\n            {/* FEATURES (4-up tiles like your reference) */}\r\n            <section id=\"features\" className={cn(\r\n                \"relative py-20 md:py-32 overflow-hidden transition-colors duration-300\",\r\n                isDark\r\n                    ? \"bg-gradient-to-b from-slate-900 via-slate-950 to-slate-900\"\r\n                    : \"bg-gradient-to-b from-white via-blue-50/20 to-white\"\r\n            )}>\r\n                {/* Background effects */}\r\n                <div className=\"absolute inset-0\">\r\n                    <div className={cn(\r\n                        \"absolute top-1/4 right-1/4 w-[400px] h-[400px] rounded-full blur-3xl\",\r\n                        isDark ? \"bg-blue-500/10\" : \"bg-blue-400/5\"\r\n                    )} />\r\n                    <div className={cn(\r\n                        \"absolute bottom-1/4 left-1/4 w-[500px] h-[500px] rounded-full blur-3xl\",\r\n                        isDark ? \"bg-orange-500/10\" : \"bg-orange-400/5\"\r\n                    )} />\r\n                </div>\r\n\r\n                <div className=\"container relative mx-auto px-4 md:px-6 z-10\">\r\n                    <div className=\"mx-auto max-w-3xl text-center mb-16\">\r\n                        <h2 className={cn(\r\n                            \"text-4xl font-semibold tracking-tight md:text-5xl lg:text-6xl animate-in fade-in slide-in-from-bottom-4 duration-700\",\r\n                            isDark ? \"text-white\" : \"text-slate-900\"\r\n                        )}>\r\n                            Built for academic submissions\r\n                        </h2>\r\n                        <p className={cn(\r\n                            \"mt-6 text-lg md:text-xl max-w-2xl mx-auto animate-in fade-in slide-in-from-bottom-6 duration-700 delay-100\",\r\n                            isDark ? \"text-slate-300\" : \"text-slate-600\"\r\n                        )}>\r\n                            A focused toolkit to turn a rough draft into a cleaner, clearer, more academic version.\r\n                        </p>\r\n                    </div>\r\n\r\n                    {/* Bento grid */}\r\n                    <div className=\"grid gap-6 md:gap-8 lg:grid-cols-12\">\r\n                        {/* Big card */}\r\n                        <div className=\"lg:col-span-7 lg:row-span-2 animate-in fade-in slide-in-from-bottom-8 duration-1000 delay-200\">\r\n                            <div className={cn(\r\n                                \"relative h-full overflow-hidden rounded-3xl border backdrop-blur-xl p-6 shadow-2xl md:p-8 transition-all duration-500\",\r\n                                isDark\r\n                                    ? \"border-white/10 bg-gradient-to-br from-white/5 to-white/0 hover:border-white/20\"\r\n                                    : \"border-blue-200 bg-white hover:border-blue-300 shadow-blue-500/10\"\r\n                            )}>\r\n                                <div className={cn(\r\n                                    \"pointer-events-none absolute -right-24 -top-24 h-80 w-80 rounded-full blur-3xl animate-pulse\",\r\n                                    isDark ? \"bg-orange-500/20\" : \"bg-orange-400/10\"\r\n                                )} />\r\n                                <div className={cn(\r\n                                    \"pointer-events-none absolute -left-24 -bottom-24 h-80 w-80 rounded-full blur-3xl animate-pulse animation-delay-2000\",\r\n                                    isDark ? \"bg-blue-500/20\" : \"bg-blue-400/10\"\r\n                                )} />\r\n\r\n                                <div className=\"flex items-start justify-between gap-6 relative z-10\">\r\n                                    <div>\r\n                                        <div className={cn(\r\n                                            \"inline-flex items-center gap-2 rounded-full border backdrop-blur-sm px-3 py-1.5 text-[11px] font-semibold\",\r\n                                            isDark\r\n                                                ? \"border-white/20 bg-white/10 text-white/90\"\r\n                                                : \"border-blue-200 bg-blue-50 text-blue-700\"\r\n                                        )}>\r\n                                            <span className=\"inline-flex h-2 w-2 rounded-full bg-orange-500 animate-pulse\" />\r\n                                            Diagnostics â†’ Upgrade â†’ Export\r\n                                        </div>\r\n                                        <h3 className={cn(\r\n                                            \"mt-5 text-2xl font-bold tracking-tight md:text-3xl\",\r\n                                            isDark ? \"text-white\" : \"text-slate-900\"\r\n                                        )}>\r\n                                            See what's wrong, then fix it in one run\r\n                                        </h3>\r\n                                        <p className={cn(\r\n                                            \"mt-3 max-w-[60ch] text-sm leading-relaxed md:text-base\",\r\n                                            isDark ? \"text-slate-300\" : \"text-slate-600\"\r\n                                        )}>\r\n                                            Get a quick diagnostic report (tone, structure, clarity), apply improvements, and keep editing in your own words.\r\n                                        </p>\r\n\r\n                                        <div className=\"mt-6 flex flex-wrap gap-2 text-xs\">\r\n                                            {[\"Tone\", \"Structure\", \"Clarity\", \"Citations\"].map((chip) => (\r\n                                                <span key={chip} className={cn(\r\n                                                    \"rounded-full border backdrop-blur-sm px-3 py-1.5 transition-colors\",\r\n                                                    isDark\r\n                                                        ? \"border-white/20 bg-white/10 text-white/90 hover:bg-white/15\"\r\n                                                        : \"border-blue-200 bg-blue-50 text-blue-700 hover:bg-blue-100\"\r\n                                                )}>\r\n                                                    {chip}\r\n                                                </span>\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"hidden md:block\">\r\n                                        <div className=\"flex h-12 w-12 items-center justify-center rounded-2xl bg-gradient-to-br from-orange-500 to-blue-500 text-white shadow-lg shadow-orange-500/30 animate-pulse\">\r\n                                            <Sparkles className=\"h-6 w-6\" />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"mt-8 grid gap-4 md:grid-cols-2 relative z-10\">\r\n                                    {/* mini diagnostic UI */}\r\n                                    <div className={cn(\r\n                                        \"rounded-2xl border backdrop-blur-xl p-5 transition-all duration-300\",\r\n                                        isDark\r\n                                            ? \"border-white/10 bg-white/5 hover:bg-white/10\"\r\n                                            : \"border-blue-200 bg-blue-50/50 hover:bg-blue-100/50\"\r\n                                    )}>\r\n                                        <div className=\"flex items-center justify-between\">\r\n                                            <div className={cn(\r\n                                                \"text-sm font-semibold\",\r\n                                                isDark ? \"text-white\" : \"text-slate-900\"\r\n                                            )}>Diagnostic Report</div>\r\n                                            <div className=\"text-xs font-bold text-orange-500\">B+</div>\r\n                                        </div>\r\n\r\n                                        <div className=\"mt-4 space-y-3\">\r\n                                            {[\r\n                                                { label: \"Structure\", value: 82 },\r\n                                                { label: \"Academic tone\", value: 74 },\r\n                                                { label: \"Clarity\", value: 90 },\r\n                                            ].map((row) => (\r\n                                                <div key={row.label}>\r\n                                                    <div className={cn(\r\n                                                        \"flex items-center justify-between text-xs\",\r\n                                                        isDark ? \"text-slate-300\" : \"text-slate-600\"\r\n                                                    )}>\r\n                                                        <span>{row.label}</span>\r\n                                                        <span className={cn(\r\n                                                            \"font-semibold\",\r\n                                                            isDark ? \"text-white\" : \"text-slate-900\"\r\n                                                        )}>{row.value}/100</span>\r\n                                                    </div>\r\n                                                    <div className={cn(\r\n                                                        \"mt-1 h-2 w-full rounded-full\",\r\n                                                        isDark ? \"bg-white/10\" : \"bg-blue-200\"\r\n                                                    )}>\r\n                                                        <div\r\n                                                            className=\"h-2 rounded-full bg-gradient-to-r from-orange-500 to-blue-500\"\r\n                                                            style={{ width: `${row.value}%` }}\r\n                                                        />\r\n                                                    </div>\r\n                                                </div>\r\n                                            ))}\r\n                                        </div>\r\n\r\n                                        <div className={cn(\r\n                                            \"mt-4 rounded-xl backdrop-blur-sm p-3 text-xs border\",\r\n                                            isDark\r\n                                                ? \"bg-white/5 text-slate-300 border-white/10\"\r\n                                                : \"bg-white text-slate-600 border-blue-200\"\r\n                                        )}>\r\n                                            <span className={cn(\r\n                                                \"font-semibold\",\r\n                                                isDark ? \"text-white\" : \"text-slate-900\"\r\n                                            )}>Next:</span> Replace informal phrases and strengthen topic sentences.\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/* mini before/after */}\r\n                                    <div className={cn(\r\n                                        \"rounded-2xl border backdrop-blur-xl p-5 transition-all duration-300\",\r\n                                        isDark\r\n                                            ? \"border-white/10 bg-white/5 hover:bg-white/10\"\r\n                                            : \"border-blue-200 bg-blue-50/50 hover:bg-blue-100/50\"\r\n                                    )}>\r\n                                        <div className=\"flex items-center justify-between\">\r\n                                            <div className={cn(\r\n                                                \"text-sm font-semibold\",\r\n                                                isDark ? \"text-white\" : \"text-slate-900\"\r\n                                            )}>Before â†’ After</div>\r\n                                            <div className={cn(\r\n                                                \"text-xs\",\r\n                                                isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                                            )}>Preview</div>\r\n                                        </div>\r\n\r\n                                        <div className=\"mt-4 space-y-3\">\r\n                                            <div className={cn(\r\n                                                \"rounded-xl border backdrop-blur-sm p-3 text-xs\",\r\n                                                isDark\r\n                                                    ? \"border-red-500/30 bg-red-500/10 text-red-200\"\r\n                                                    : \"border-red-200 bg-red-50 text-red-700\"\r\n                                            )}>\r\n                                                \"This shows the economy is bad and people can't buy stuff...\"\r\n                                            </div>\r\n                                            <div className={cn(\r\n                                                \"rounded-xl border backdrop-blur-sm p-3 text-xs\",\r\n                                                isDark\r\n                                                    ? \"border-blue-500/30 bg-blue-500/10 text-blue-200\"\r\n                                                    : \"border-blue-200 bg-blue-50 text-blue-700\"\r\n                                            )}>\r\n                                                \"These findings indicate inflationary pressure has reduced consumer purchasing power...\"\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div className={cn(\r\n                                            \"mt-4 flex items-center gap-2 text-xs\",\r\n                                            isDark ? \"text-slate-300\" : \"text-slate-600\"\r\n                                        )}>\r\n                                            <Check className=\"h-4 w-4 text-green-500\" />\r\n                                            Keeps your intent; improves academic register.\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Top-right supporting cards */}\r\n                        {bentoTopRight.map((item, idx) => (\r\n                            <div key={item.title} className={`lg:col-span-5 animate-in fade-in slide-in-from-bottom-8 duration-1000`} style={{ animationDelay: `${300 + idx * 100}ms` }}>\r\n                                <div className={cn(\r\n                                    \"relative h-full overflow-hidden rounded-3xl border backdrop-blur-xl p-6 shadow-2xl md:p-7 transition-all duration-500\",\r\n                                    isDark\r\n                                        ? \"border-white/10 bg-white/5 hover:border-white/20 hover:bg-white/10\"\r\n                                        : \"border-blue-200 bg-white hover:border-blue-300 hover:shadow-blue-500/20 shadow-blue-500/10\"\r\n                                )}>\r\n                                    <div className={cn(\r\n                                        \"pointer-events-none absolute -right-24 -top-24 h-72 w-72 rounded-full blur-3xl opacity-30 animate-pulse\",\r\n                                        `bg-gradient-to-br ${item.accent === \"from-blue-600 to-violet-600\" ? \"from-orange-500 to-blue-500\" : \"from-blue-500 to-orange-500\"}`,\r\n                                        !isDark && \"opacity-20\"\r\n                                    )} />\r\n\r\n                                    <div className=\"flex items-start justify-between gap-4 relative z-10\">\r\n                                        <div>\r\n                                            <h3 className={cn(\r\n                                                \"text-lg font-semibold\",\r\n                                                isDark ? \"text-white\" : \"text-slate-900\"\r\n                                            )}>{item.title}</h3>\r\n                                            <p className={cn(\r\n                                                \"mt-2 text-sm leading-relaxed\",\r\n                                                isDark ? \"text-slate-300\" : \"text-slate-600\"\r\n                                            )}>{item.description}</p>\r\n                                        </div>\r\n                                        <div className={cn(\"flex h-11 w-11 items-center justify-center rounded-2xl text-white shadow-lg\", item.accent === \"from-blue-600 to-violet-600\" ? \"bg-gradient-to-br from-orange-500 to-blue-500\" : \"bg-gradient-to-br from-blue-500 to-orange-500\")}>\r\n                                            <item.icon className=\"h-5 w-5\" />\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"mt-6 flex flex-wrap gap-2 text-xs\">\r\n                                        {item.chips.map((chip) => (\r\n                                            <span key={chip} className={cn(\r\n                                                \"rounded-full border backdrop-blur-sm px-3 py-1.5 transition-colors\",\r\n                                                isDark\r\n                                                    ? \"border-white/20 bg-white/10 text-white/90 hover:bg-white/15\"\r\n                                                    : \"border-blue-200 bg-blue-50 text-blue-700 hover:bg-blue-100\"\r\n                                            )}>\r\n                                                {chip}\r\n                                            </span>\r\n                                        ))}\r\n                                    </div>\r\n\r\n                                    <div className={cn(\r\n                                        \"mt-6 rounded-2xl border backdrop-blur-sm p-4\",\r\n                                        isDark\r\n                                            ? \"border-white/10 bg-white/5\"\r\n                                            : \"border-blue-200 bg-blue-50/50\"\r\n                                    )}>\r\n                                        {item.title === \"Rewrite with academic tone\" ? (\r\n                                            <div className={cn(\r\n                                                \"rounded-xl border backdrop-blur-sm p-3 text-xs\",\r\n                                                isDark\r\n                                                    ? \"border-white/10 bg-white/5\"\r\n                                                    : \"border-blue-200 bg-white\"\r\n                                            )}>\r\n                                                <div className={cn(\r\n                                                    \"font-semibold\",\r\n                                                    isDark ? \"text-white\" : \"text-slate-900\"\r\n                                                )}>Example upgrade</div>\r\n                                                <div className=\"mt-2 space-y-2\">\r\n                                                    <div className={cn(\r\n                                                        \"rounded-lg border backdrop-blur-sm p-2\",\r\n                                                        isDark\r\n                                                            ? \"border-red-500/30 bg-red-500/10 text-red-200\"\r\n                                                            : \"border-red-200 bg-red-50 text-red-700\"\r\n                                                    )}>\r\n                                                        \"I think this is a big problem for society.\"\r\n                                                    </div>\r\n                                                    <div className={cn(\r\n                                                        \"rounded-lg border backdrop-blur-sm p-2\",\r\n                                                        isDark\r\n                                                            ? \"border-blue-500/30 bg-blue-500/10 text-blue-200\"\r\n                                                            : \"border-blue-200 bg-blue-50 text-blue-700\"\r\n                                                    )}>\r\n                                                        \"These findings indicate significant societal implications.\"\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        ) : (\r\n                                            <div className={cn(\r\n                                                \"rounded-xl border backdrop-blur-sm p-3 text-xs\",\r\n                                                isDark\r\n                                                    ? \"border-white/10 bg-white/5\"\r\n                                                    : \"border-blue-200 bg-white\"\r\n                                            )}>\r\n                                                <div className={cn(\r\n                                                    \"font-semibold\",\r\n                                                    isDark ? \"text-white\" : \"text-slate-900\"\r\n                                                )}>What you control</div>\r\n                                                <ul className={cn(\r\n                                                    \"mt-2 space-y-2\",\r\n                                                    isDark ? \"text-slate-300\" : \"text-slate-600\"\r\n                                                )}>\r\n                                                    <li className=\"flex items-center gap-2\"><Check className=\"h-4 w-4 text-green-500\" /> Your topic and sources</li>\r\n                                                    <li className=\"flex items-center gap-2\"><Check className=\"h-4 w-4 text-green-500\" /> Your thesis and argument</li>\r\n                                                    <li className=\"flex items-center gap-2\"><Check className=\"h-4 w-4 text-green-500\" /> Final edits before export</li>\r\n                                                </ul>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n\r\n                        {/* Bottom row */}\r\n                        {bentoBottom.map((b, idx) => (\r\n                            <div key={b.title} className={`lg:col-span-4 animate-in fade-in slide-in-from-bottom-8 duration-1000`} style={{ animationDelay: `${500 + idx * 100}ms` }}>\r\n                                <div className={cn(\r\n                                    \"h-full overflow-hidden rounded-3xl border backdrop-blur-xl shadow-2xl transition-all duration-500\",\r\n                                    isDark\r\n                                        ? \"border-white/10 bg-white/5 hover:border-white/20 hover:bg-white/10\"\r\n                                        : \"border-blue-200 bg-white hover:border-blue-300 hover:shadow-blue-500/20 shadow-blue-500/10\"\r\n                                )}>\r\n                                    <div className=\"p-6\">\r\n                                        <div className=\"flex items-start justify-between gap-4\">\r\n                                            <div>\r\n                                                <h3 className={cn(\r\n                                                    \"text-base font-semibold\",\r\n                                                    isDark ? \"text-white\" : \"text-slate-900\"\r\n                                                )}>{b.title}</h3>\r\n                                                <p className={cn(\r\n                                                    \"mt-2 text-sm leading-relaxed\",\r\n                                                    isDark ? \"text-slate-300\" : \"text-slate-600\"\r\n                                                )}>{b.description}</p>\r\n                                            </div>\r\n                                            <div className=\"flex h-10 w-10 items-center justify-center rounded-2xl bg-gradient-to-br from-orange-500 to-blue-500 text-white shadow-lg\">\r\n                                                <b.icon className=\"h-5 w-5\" />\r\n                                            </div>\r\n                                        </div>\r\n                                        {b.title === \"Structure & flow\" && (\r\n                                            <div className={cn(\r\n                                                \"mt-5 rounded-2xl border backdrop-blur-sm p-4\",\r\n                                                isDark\r\n                                                    ? \"border-white/10 bg-white/5\"\r\n                                                    : \"border-blue-200 bg-blue-50/50\"\r\n                                            )}>\r\n                                                <div className={cn(\r\n                                                    \"text-[11px] font-semibold\",\r\n                                                    isDark ? \"text-white\" : \"text-slate-900\"\r\n                                                )}>Suggested outline</div>\r\n                                                <div className=\"mt-3 space-y-2\">\r\n                                                    {[\"Thesis statement\", \"Argument 1 â†’ evidence\", \"Argument 2 â†’ evidence\"].map((row) => (\r\n                                                        <div key={row} className={cn(\r\n                                                            \"flex items-center justify-between rounded-xl border backdrop-blur-sm px-3 py-2 text-xs transition-colors\",\r\n                                                            isDark\r\n                                                                ? \"border-white/10 bg-white/5 text-slate-300 hover:bg-white/10\"\r\n                                                                : \"border-blue-200 bg-white text-slate-700 hover:bg-blue-50\"\r\n                                                        )}>\r\n                                                            <span>{row}</span>\r\n                                                            <span className=\"h-2 w-2 rounded-full bg-orange-500\" />\r\n                                                        </div>\r\n                                                    ))}\r\n                                                </div>\r\n                                            </div>\r\n                                        )}\r\n                                        {b.title === \"Citation awareness\" && (\r\n                                            <div className={cn(\r\n                                                \"mt-5 rounded-2xl border backdrop-blur-sm p-4\",\r\n                                                isDark\r\n                                                    ? \"border-white/10 bg-white/5\"\r\n                                                    : \"border-blue-200 bg-blue-50/50\"\r\n                                            )}>\r\n                                                <div className=\"flex items-center justify-between\">\r\n                                                    <span className={cn(\r\n                                                        \"text-[11px] font-semibold\",\r\n                                                        isDark ? \"text-white\" : \"text-slate-900\"\r\n                                                    )}>Citation checks</span>\r\n                                                    <span className={cn(\r\n                                                        \"rounded-full border backdrop-blur-sm px-2 py-0.5 text-[10px] font-semibold\",\r\n                                                        isDark\r\n                                                            ? \"border-orange-500/30 bg-orange-500/10 text-orange-300\"\r\n                                                            : \"border-orange-200 bg-orange-50 text-orange-700\"\r\n                                                    )}>2 missing</span>\r\n                                                </div>\r\n                                                <div className=\"mt-3 space-y-2\">\r\n                                                    <div className={cn(\r\n                                                        \"rounded-xl border backdrop-blur-sm px-3 py-2 text-xs\",\r\n                                                        isDark\r\n                                                            ? \"border-white/10 bg-white/5 text-slate-300\"\r\n                                                            : \"border-blue-200 bg-white text-slate-600\"\r\n                                                    )}>\r\n                                                        \"Factual claim\" <span className=\"font-semibold text-orange-600\">needs citation</span>\r\n                                                    </div>\r\n                                                    <div className={cn(\r\n                                                        \"rounded-xl border backdrop-blur-sm px-3 py-2 text-xs\",\r\n                                                        isDark\r\n                                                            ? \"border-white/10 bg-white/5 text-slate-300\"\r\n                                                            : \"border-blue-200 bg-white text-slate-600\"\r\n                                                    )}>\r\n                                                        Reference list <span className=\"font-semibold text-blue-600\">style: APA</span>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        )}\r\n                                        {b.title === \"Export-ready output\" && (\r\n                                            <div className={cn(\r\n                                                \"mt-5 rounded-2xl border backdrop-blur-sm p-4\",\r\n                                                isDark\r\n                                                    ? \"border-white/10 bg-white/5\"\r\n                                                    : \"border-blue-200 bg-blue-50/50\"\r\n                                            )}>\r\n                                                <div className={cn(\r\n                                                    \"text-[11px] font-semibold\",\r\n                                                    isDark ? \"text-white\" : \"text-slate-900\"\r\n                                                )}>Export</div>\r\n                                                <div className=\"mt-3 grid gap-2\">\r\n                                                    {[\"PDF Document\", \"Word (.docx)\", \"Plain Text\"].map((row) => (\r\n                                                        <div key={row} className={cn(\r\n                                                            \"rounded-xl border backdrop-blur-sm px-3 py-2 text-xs transition-colors\",\r\n                                                            isDark\r\n                                                                ? \"border-white/10 bg-white/5 text-slate-300 hover:bg-white/10\"\r\n                                                                : \"border-blue-200 bg-white text-slate-700 hover:bg-blue-50\"\r\n                                                        )}>\r\n                                                            {row}\r\n                                                        </div>\r\n                                                    ))}\r\n                                                </div>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </section>\r\n\r\n            {/* STEPS */}\r\n            <section className={cn(\r\n                \"relative py-20 md:py-32 overflow-hidden transition-colors duration-300\",\r\n                isDark\r\n                    ? \"bg-gradient-to-b from-slate-900 to-slate-950\"\r\n                    : \"bg-gradient-to-b from-white via-blue-50/30 to-white\"\r\n            )}>\r\n                <div className=\"absolute inset-0\">\r\n                    <div className={cn(\r\n                        \"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] rounded-full blur-3xl\",\r\n                        isDark ? \"bg-orange-500/5\" : \"bg-orange-400/3\"\r\n                    )} />\r\n                </div>\r\n\r\n                <div className=\"container relative mx-auto px-4 md:px-6 z-10\">\r\n                    <div className=\"mx-auto max-w-3xl text-center mb-16\">\r\n                        <h2 className={cn(\r\n                            \"text-4xl font-bold tracking-tight md:text-5xl animate-in fade-in slide-in-from-bottom-4 duration-700\",\r\n                            isDark ? \"text-white\" : \"text-slate-900\"\r\n                        )}>Assignment upgrades in 3 steps</h2>\r\n                        <p className={cn(\r\n                            \"mt-6 text-lg md:text-xl animate-in fade-in slide-in-from-bottom-6 duration-700 delay-100\",\r\n                            isDark ? \"text-slate-300\" : \"text-slate-600\"\r\n                        )}>\r\n                            A short, focused flow designed to get you to a better submission fast.\r\n                        </p>\r\n                    </div>\r\n\r\n                    <div className=\"mt-10 grid gap-6 md:mt-14 md:grid-cols-3\">\r\n                        {steps.map((s, idx) => (\r\n                            <div key={s.title} className={cn(\r\n                                \"rounded-3xl border backdrop-blur-xl shadow-2xl transition-all duration-500 animate-in fade-in slide-in-from-bottom-8\",\r\n                                isDark\r\n                                    ? \"border-white/10 bg-white/5 hover:border-white/20 hover:bg-white/10\"\r\n                                    : \"border-blue-200 bg-white hover:border-blue-300 hover:shadow-blue-500/20 shadow-blue-500/10\"\r\n                            )} style={{ animationDelay: `${200 + idx * 100}ms` }}>\r\n                                <div className=\"p-6\">\r\n                                    <div className=\"flex items-center gap-3\">\r\n                                        <div className=\"flex h-10 w-10 items-center justify-center rounded-2xl bg-gradient-to-br from-orange-500 to-blue-500 text-white border border-white/20 font-bold shadow-lg\">\r\n                                            {idx + 1}\r\n                                        </div>\r\n                                        <div className={cn(\r\n                                            \"text-base font-semibold\",\r\n                                            isDark ? \"text-white\" : \"text-slate-900\"\r\n                                        )}>{s.title}</div>\r\n                                    </div>\r\n                                    <p className={cn(\r\n                                        \"mt-3 text-sm leading-relaxed\",\r\n                                        isDark ? \"text-slate-300\" : \"text-slate-600\"\r\n                                    )}>{s.description}</p>\r\n\r\n                                    {/* mini UI previews */}\r\n                                    {idx === 0 && (\r\n                                        <div className={cn(\r\n                                            \"mt-5 rounded-2xl border backdrop-blur-sm p-4\",\r\n                                            isDark\r\n                                                ? \"border-white/10 bg-white/5\"\r\n                                                : \"border-blue-200 bg-blue-50/50\"\r\n                                        )}>\r\n                                            <div className=\"space-y-2\">\r\n                                                <div className={cn(\r\n                                                    \"h-8 rounded-lg border backdrop-blur-sm px-3 flex items-center text-xs\",\r\n                                                    isDark\r\n                                                        ? \"border-white/10 bg-white/5 text-slate-400\"\r\n                                                        : \"border-blue-200 bg-white text-slate-500\"\r\n                                                )}>\r\n                                                    Document titleâ€¦\r\n                                                </div>\r\n                                                <div className=\"grid grid-cols-2 gap-2\">\r\n                                                    <div className={cn(\r\n                                                        \"h-8 rounded-lg border backdrop-blur-sm px-3 flex items-center text-xs\",\r\n                                                        isDark\r\n                                                            ? \"border-white/10 bg-white/5 text-slate-400\"\r\n                                                            : \"border-blue-200 bg-white text-slate-500\"\r\n                                                    )}>\r\n                                                        Type: Essay\r\n                                                    </div>\r\n                                                    <div className={cn(\r\n                                                        \"h-8 rounded-lg border backdrop-blur-sm px-3 flex items-center text-xs\",\r\n                                                        isDark\r\n                                                            ? \"border-white/10 bg-white/5 text-slate-400\"\r\n                                                            : \"border-blue-200 bg-white text-slate-500\"\r\n                                                    )}>\r\n                                                        Level: UG\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div className={cn(\r\n                                                    \"h-8 rounded-lg border backdrop-blur-sm px-3 flex items-center text-xs\",\r\n                                                    isDark\r\n                                                        ? \"border-white/10 bg-white/5 text-slate-400\"\r\n                                                        : \"border-blue-200 bg-white text-slate-500\"\r\n                                                )}>\r\n                                                    Style: APA 7th\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    {idx === 1 && (\r\n                                        <div className={cn(\r\n                                            \"mt-5 rounded-2xl border backdrop-blur-sm p-4\",\r\n                                            isDark\r\n                                                ? \"border-white/10 bg-white/5\"\r\n                                                : \"border-blue-200 bg-blue-50/50\"\r\n                                        )}>\r\n                                            <div className={cn(\r\n                                                \"rounded-xl border backdrop-blur-sm p-3\",\r\n                                                isDark\r\n                                                    ? \"border-white/10 bg-white/5\"\r\n                                                    : \"border-blue-200 bg-white\"\r\n                                            )}>\r\n                                                <div className={cn(\r\n                                                    \"h-2 w-24 rounded\",\r\n                                                    isDark ? \"bg-white/20\" : \"bg-blue-200\"\r\n                                                )} />\r\n                                                <div className=\"mt-3 space-y-2\">\r\n                                                    <div className={cn(\r\n                                                        \"h-2 w-full rounded\",\r\n                                                        isDark ? \"bg-white/10\" : \"bg-blue-100\"\r\n                                                    )} />\r\n                                                    <div className={cn(\r\n                                                        \"h-2 w-[92%] rounded\",\r\n                                                        isDark ? \"bg-white/10\" : \"bg-blue-100\"\r\n                                                    )} />\r\n                                                    <div className={cn(\r\n                                                        \"h-2 w-[80%] rounded\",\r\n                                                        isDark ? \"bg-white/10\" : \"bg-blue-100\"\r\n                                                    )} />\r\n                                                </div>\r\n                                                <div className={cn(\r\n                                                    \"mt-3 inline-flex items-center gap-2 rounded-full border backdrop-blur-sm px-3 py-1 text-[11px] font-semibold\",\r\n                                                    isDark\r\n                                                        ? \"border-orange-500/30 bg-orange-500/10 text-orange-300\"\r\n                                                        : \"border-orange-200 bg-orange-50 text-orange-700\"\r\n                                                )}>\r\n                                                    Highlight: informal phrase\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    {idx === 2 && (\r\n                                        <div className={cn(\r\n                                            \"mt-5 rounded-2xl border backdrop-blur-sm p-4\",\r\n                                            isDark\r\n                                                ? \"border-white/10 bg-white/5\"\r\n                                                : \"border-blue-200 bg-blue-50/50\"\r\n                                        )}>\r\n                                            <div className={cn(\r\n                                                \"rounded-xl border backdrop-blur-sm p-3\",\r\n                                                isDark\r\n                                                    ? \"border-white/10 bg-white/5\"\r\n                                                    : \"border-blue-200 bg-white\"\r\n                                            )}>\r\n                                                <div className=\"flex items-center justify-between\">\r\n                                                    <div className={cn(\r\n                                                        \"text-xs font-semibold\",\r\n                                                        isDark ? \"text-white\" : \"text-slate-900\"\r\n                                                    )}>Export</div>\r\n                                                    <div className={cn(\r\n                                                        \"text-[11px]\",\r\n                                                        isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                                                    )}>Choose format</div>\r\n                                                </div>\r\n                                                <div className=\"mt-3 grid gap-2\">\r\n                                                    {[\"PDF Document\", \"Word (.docx)\", \"Plain Text\"].map((row) => (\r\n                                                        <div key={row} className={cn(\r\n                                                            \"rounded-lg border backdrop-blur-sm px-3 py-2 text-xs transition-colors\",\r\n                                                            isDark\r\n                                                                ? \"border-white/10 bg-white/5 text-slate-300 hover:bg-white/10\"\r\n                                                                : \"border-blue-200 bg-white text-slate-700 hover:bg-blue-50\"\r\n                                                        )}>{row}</div>\r\n                                                    ))}\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </section>\r\n\r\n            {/* INTEGRITY / COMPARISON (clean table style) */}\r\n            <section className={cn(\r\n                \"relative py-20 md:py-32 overflow-hidden transition-colors duration-300\",\r\n                isDark\r\n                    ? \"bg-gradient-to-b from-slate-950 to-slate-900\"\r\n                    : \"bg-gradient-to-b from-white via-blue-50/20 to-white\"\r\n            )}>\r\n                <div className=\"absolute inset-0\">\r\n                    <div className={cn(\r\n                        \"absolute top-1/2 right-1/4 w-[500px] h-[500px] rounded-full blur-3xl\",\r\n                        isDark ? \"bg-blue-500/5\" : \"bg-blue-400/3\"\r\n                    )} />\r\n                </div>\r\n\r\n                <div className=\"container relative mx-auto px-4 md:px-6 z-10\">\r\n                    <div className=\"grid items-start gap-10 lg:grid-cols-12\">\r\n                        <div className=\"lg:col-span-5 animate-in fade-in slide-in-from-left-8 duration-1000\">\r\n                            <div className={cn(\r\n                                \"inline-flex items-center gap-2 rounded-full border backdrop-blur-sm px-3 py-1.5 text-xs font-semibold\",\r\n                                isDark\r\n                                    ? \"border-white/10 bg-white/5 text-white/90\"\r\n                                    : \"border-blue-200 bg-blue-50 text-blue-700\"\r\n                            )}>\r\n                                <ShieldCheck className=\"h-4 w-4 text-orange-500\" />\r\n                                Integrity-first\r\n                            </div>\r\n                            <h2 className={cn(\r\n                                \"mt-5 text-3xl font-bold tracking-tight md:text-4xl lg:text-5xl\",\r\n                                isDark ? \"text-white\" : \"text-slate-900\"\r\n                            )}>\r\n                                No generic essays.\r\n                                <span className=\"block mt-2\">Transform your own work.</span>\r\n                            </h2>\r\n                            <p className={cn(\r\n                                \"mt-5 text-base md:text-lg\",\r\n                                isDark ? \"text-slate-300\" : \"text-slate-600\"\r\n                            )}>\r\n                                Improve structure, tone, and clarity while keeping your thesis, sources, and ideas intact.\r\n                            </p>\r\n\r\n                            <div className={cn(\r\n                                \"mt-6 space-y-3 text-sm\",\r\n                                isDark ? \"text-slate-300\" : \"text-slate-600\"\r\n                            )}>\r\n                                {[\r\n                                    \"You provide the content; we improve the academic register.\",\r\n                                    \"Clear diagnostics explain what changed and why.\",\r\n                                    \"Export when you're ready to submit.\",\r\n                                ].map((t, idx) => (\r\n                                    <div key={t} className=\"flex items-start gap-3 animate-in fade-in slide-in-from-left-4 duration-700\" style={{ animationDelay: `${idx * 100}ms` }}>\r\n                                        <Check className=\"mt-0.5 h-4 w-4 text-green-500 flex-shrink-0\" />\r\n                                        <span>{t}</span>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"lg:col-span-7 animate-in fade-in slide-in-from-right-8 duration-1000 delay-200\">\r\n                            <div className={cn(\r\n                                \"overflow-hidden rounded-3xl border backdrop-blur-xl shadow-2xl\",\r\n                                isDark\r\n                                    ? \"border-white/10 bg-white/5\"\r\n                                    : \"border-blue-200 bg-white shadow-blue-500/10\"\r\n                            )}>\r\n                                <div className={cn(\r\n                                    \"grid grid-cols-2 border-b\",\r\n                                    isDark ? \"border-white/10\" : \"border-blue-100\"\r\n                                )}>\r\n                                    <div className={cn(\r\n                                        \"px-6 py-4 text-sm font-semibold\",\r\n                                        isDark\r\n                                            ? \"text-white/70 bg-white/5\"\r\n                                            : \"text-slate-600 bg-blue-50/50\"\r\n                                    )}>\r\n                                        Generic AI writers\r\n                                    </div>\r\n                                    <div className={cn(\r\n                                        \"px-6 py-4 text-sm font-semibold bg-gradient-to-r\",\r\n                                        isDark\r\n                                            ? \"text-white from-orange-500/20 to-blue-500/20\"\r\n                                            : \"text-blue-700 from-orange-50 to-blue-50\"\r\n                                    )}>\r\n                                        Docley\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className={cn(\r\n                                    \"divide-y\",\r\n                                    isDark ? \"divide-white/10\" : \"divide-blue-100\"\r\n                                )}>\r\n                                    {[\r\n                                        { label: \"Preserves your meaning\", left: false, right: true },\r\n                                        { label: \"Improves academic tone\", left: true, right: true },\r\n                                        { label: \"Highlights missing citations\", left: false, right: true },\r\n                                        { label: \"Export workflow built-in\", left: false, right: true },\r\n                                    ].map((row) => (\r\n                                        <div key={row.label} className=\"grid grid-cols-2\">\r\n                                            <div className={cn(\r\n                                                \"px-6 py-4 text-sm flex items-center justify-between gap-3\",\r\n                                                isDark ? \"text-slate-300\" : \"text-slate-600\"\r\n                                            )}>\r\n                                                <span className=\"min-w-0\">{row.label}</span>\r\n                                                {row.left ? (\r\n                                                    <Check className=\"h-4 w-4 text-green-500 flex-shrink-0\" />\r\n                                                ) : (\r\n                                                    <X className={cn(\r\n                                                        \"h-4 w-4 flex-shrink-0\",\r\n                                                        isDark ? \"text-slate-500\" : \"text-slate-400\"\r\n                                                    )} />\r\n                                                )}\r\n                                            </div>\r\n                                            <div className={cn(\r\n                                                \"px-6 py-4 text-sm flex items-center justify-between gap-3\",\r\n                                                isDark\r\n                                                    ? \"text-slate-300 bg-white/5\"\r\n                                                    : \"text-slate-600 bg-white\"\r\n                                            )}>\r\n                                                <span className=\"min-w-0\">{row.label}</span>\r\n                                                {row.right ? (\r\n                                                    <Check className=\"h-4 w-4 text-green-500 flex-shrink-0\" />\r\n                                                ) : (\r\n                                                    <X className={cn(\r\n                                                        \"h-4 w-4 flex-shrink-0\",\r\n                                                        isDark ? \"text-slate-500\" : \"text-slate-400\"\r\n                                                    )} />\r\n                                                )}\r\n                                            </div>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n\r\n                                <div className={cn(\r\n                                    \"grid grid-cols-1 gap-3 border-t p-5 md:grid-cols-2\",\r\n                                    isDark\r\n                                        ? \"border-white/10 bg-white/5\"\r\n                                        : \"border-blue-100 bg-blue-50/30\"\r\n                                )}>\r\n                                    <div className={cn(\r\n                                        \"rounded-2xl border backdrop-blur-sm p-4\",\r\n                                        isDark\r\n                                            ? \"border-white/10 bg-white/5\"\r\n                                            : \"border-blue-200 bg-white\"\r\n                                    )}>\r\n                                        <div className={cn(\r\n                                            \"text-xs font-semibold\",\r\n                                            isDark ? \"text-white\" : \"text-slate-900\"\r\n                                        )}>What you control</div>\r\n                                        <div className={cn(\r\n                                            \"mt-2 space-y-2 text-xs\",\r\n                                            isDark ? \"text-slate-300\" : \"text-slate-600\"\r\n                                        )}>\r\n                                            <div className=\"flex items-center gap-2\"><Check className=\"h-4 w-4 text-green-500\" /> Topic, thesis, and structure</div>\r\n                                            <div className=\"flex items-center gap-2\"><Check className=\"h-4 w-4 text-green-500\" /> Sources and citations</div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className={cn(\r\n                                        \"rounded-2xl border backdrop-blur-sm p-4\",\r\n                                        isDark\r\n                                            ? \"border-orange-500/30 bg-gradient-to-br from-orange-500/10 to-blue-500/10\"\r\n                                            : \"border-orange-200 bg-gradient-to-br from-orange-50 to-blue-50\"\r\n                                    )}>\r\n                                        <div className={cn(\r\n                                            \"text-xs font-semibold\",\r\n                                            isDark ? \"text-white\" : \"text-slate-900\"\r\n                                        )}>What Docley improves</div>\r\n                                        <div className={cn(\r\n                                            \"mt-2 space-y-2 text-xs\",\r\n                                            isDark ? \"text-slate-300\" : \"text-slate-600\"\r\n                                        )}>\r\n                                            <div className=\"flex items-center gap-2\"><Sparkles className=\"h-4 w-4 text-orange-500\" /> Academic tone and clarity</div>\r\n                                            <div className=\"flex items-center gap-2\"><Sparkles className=\"h-4 w-4 text-blue-500\" /> Actionable diagnostics</div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n\r\n            {/* METRICS */}\r\n            <section className={cn(\r\n                \"relative py-20 md:py-32 overflow-hidden transition-colors duration-300\",\r\n                isDark\r\n                    ? \"bg-gradient-to-b from-slate-900 to-slate-950\"\r\n                    : \"bg-gradient-to-b from-white via-blue-50/20 to-white\"\r\n            )}>\r\n                <div className=\"absolute inset-0\">\r\n                    <div className={cn(\r\n                        \"absolute top-1/4 left-1/2 -translate-x-1/2 w-[600px] h-[600px] rounded-full blur-3xl\",\r\n                        isDark ? \"bg-orange-500/5\" : \"bg-orange-400/3\"\r\n                    )} />\r\n                </div>\r\n\r\n                <div className=\"container relative mx-auto px-4 md:px-6 z-10\">\r\n                    <div className=\"mx-auto max-w-3xl text-center mb-16\">\r\n                        <h2 className={cn(\r\n                            \"text-4xl font-bold tracking-tight md:text-5xl animate-in fade-in slide-in-from-bottom-4 duration-700\",\r\n                            isDark ? \"text-white\" : \"text-slate-900\"\r\n                        )}>Clear diagnostics, not guesswork</h2>\r\n                        <p className={cn(\r\n                            \"mt-6 text-lg md:text-xl animate-in fade-in slide-in-from-bottom-6 duration-700 delay-100\",\r\n                            isDark ? \"text-slate-300\" : \"text-slate-600\"\r\n                        )}>\r\n                            A report that's easy to understand and easy to act on.\r\n                        </p>\r\n                    </div>\r\n\r\n                    <div className=\"mx-auto mt-10 max-w-5xl md:mt-14\">\r\n                        <div className={cn(\r\n                            \"rounded-3xl border backdrop-blur-xl shadow-2xl animate-in fade-in zoom-in-95 duration-1000 delay-200\",\r\n                            isDark\r\n                                ? \"border-white/10 bg-white/5\"\r\n                                : \"border-blue-200 bg-white shadow-blue-500/10\"\r\n                        )}>\r\n                            <div className={cn(\r\n                                \"grid divide-y md:grid-cols-3 md:divide-x md:divide-y-0\",\r\n                                isDark ? \"divide-white/10\" : \"divide-blue-100\"\r\n                            )}>\r\n                                {[\r\n                                    { label: \"Diagnostic categories\", value: \"4\", note: \"Tone, structure, clarity, citations\" },\r\n                                    { label: \"Citation styles\", value: \"4\", note: \"APA, MLA, Harvard, Chicago\" },\r\n                                    { label: \"Export formats\", value: \"3\", note: \"PDF, Word (.docx), plain text\" },\r\n                                ].map((m, idx) => (\r\n                                    <div key={m.label} className={`p-8 animate-in fade-in slide-in-from-bottom-4 duration-700`} style={{ animationDelay: `${300 + idx * 100}ms` }}>\r\n                                        <div className={cn(\r\n                                            \"text-xs font-semibold uppercase tracking-wide\",\r\n                                            isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                                        )}>{m.label}</div>\r\n                                        <div className=\"mt-4 flex items-baseline gap-2\">\r\n                                            <div className=\"text-5xl font-bold tracking-tight bg-gradient-to-r from-orange-500 to-blue-500 bg-clip-text text-transparent\">{m.value}</div>\r\n                                            <div className={cn(\r\n                                                \"text-sm font-semibold\",\r\n                                                isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                                            )}>core</div>\r\n                                        </div>\r\n                                        <div className={cn(\r\n                                            \"mt-3 text-sm\",\r\n                                            isDark ? \"text-slate-300\" : \"text-slate-600\"\r\n                                        )}>{m.note}</div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                        <p className={cn(\r\n                            \"mt-6 text-center text-sm animate-in fade-in duration-700 delay-600\",\r\n                            isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                        )}>\r\n                            Designed to be simple, fast, and clearâ€”so students know exactly what to improve.\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n\r\n            {/* PRODUCT PREVIEW (moved down as requested) */}\r\n            <section className={cn(\r\n                \"relative py-20 md:py-32 overflow-hidden transition-colors duration-300\",\r\n                isDark\r\n                    ? \"bg-gradient-to-b from-slate-950 to-slate-900\"\r\n                    : \"bg-gradient-to-b from-white via-blue-50/20 to-white\"\r\n            )}>\r\n                <div className=\"absolute inset-0\">\r\n                    <div className={cn(\r\n                        \"absolute top-1/2 left-1/4 w-[500px] h-[500px] rounded-full blur-3xl\",\r\n                        isDark ? \"bg-blue-500/10\" : \"bg-blue-400/5\"\r\n                    )} />\r\n                    <div className={cn(\r\n                        \"absolute bottom-1/4 right-1/4 w-[400px] h-[400px] rounded-full blur-3xl\",\r\n                        isDark ? \"bg-orange-500/10\" : \"bg-orange-400/5\"\r\n                    )} />\r\n                </div>\r\n\r\n                <div className=\"container relative mx-auto px-4 md:px-6 z-10\">\r\n                    <div className=\"mx-auto max-w-3xl text-center mb-16\">\r\n                        <h2 className={cn(\r\n                            \"text-4xl font-bold tracking-tight md:text-5xl animate-in fade-in slide-in-from-bottom-4 duration-700\",\r\n                            isDark ? \"text-white\" : \"text-slate-900\"\r\n                        )}>See the editor in action</h2>\r\n                        <p className={cn(\r\n                            \"mt-6 text-lg md:text-xl animate-in fade-in slide-in-from-bottom-6 duration-700 delay-100\",\r\n                            isDark ? \"text-slate-300\" : \"text-slate-600\"\r\n                        )}>\r\n                            A quick look at the workspace: write, run diagnostics, apply upgrades, and export.\r\n                        </p>\r\n                    </div>\r\n\r\n                    <div className=\"mt-10 md:mt-14 animate-in fade-in zoom-in-95 duration-1000 delay-200\">\r\n                        <div className=\"relative mx-auto max-w-6xl\">\r\n                            <div className={cn(\r\n                                \"absolute inset-0 -z-10 rounded-[32px] blur-3xl opacity-50 animate-pulse\",\r\n                                isDark\r\n                                    ? \"bg-gradient-to-r from-orange-500/30 via-blue-500/30 to-orange-500/30\"\r\n                                    : \"bg-gradient-to-r from-orange-400/20 via-blue-400/20 to-orange-400/20\"\r\n                            )} />\r\n                            <BrowserFrame url=\"docley.app/dashboard/editor\" isDark={isDark}>\r\n                                <ProductUIMock isDark={isDark} />\r\n                            </BrowserFrame>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n\r\n            {/* FAQ */}\r\n            <section className={cn(\r\n                \"relative py-20 md:py-32 overflow-hidden transition-colors duration-300\",\r\n                isDark\r\n                    ? \"bg-gradient-to-b from-slate-900 to-slate-950\"\r\n                    : \"bg-gradient-to-b from-white via-blue-50/20 to-white\"\r\n            )}>\r\n                <div className=\"absolute inset-0\">\r\n                    <div className={cn(\r\n                        \"absolute top-1/2 right-1/2 -translate-x-1/2 -translate-y-1/2 w-[700px] h-[700px] rounded-full blur-3xl\",\r\n                        isDark ? \"bg-orange-500/5\" : \"bg-orange-400/3\"\r\n                    )} />\r\n                </div>\r\n\r\n                <div className=\"container relative mx-auto px-4 md:px-6 z-10\">\r\n                    <div className=\"mx-auto max-w-3xl text-center mb-16\">\r\n                        <h2 className={cn(\r\n                            \"text-4xl font-bold tracking-tight md:text-5xl animate-in fade-in slide-in-from-bottom-4 duration-700\",\r\n                            isDark ? \"text-white\" : \"text-slate-900\"\r\n                        )}>Frequently asked questions</h2>\r\n                        <p className={cn(\r\n                            \"mt-6 text-lg md:text-xl animate-in fade-in slide-in-from-bottom-6 duration-700 delay-100\",\r\n                            isDark ? \"text-slate-300\" : \"text-slate-600\"\r\n                        )}>\r\n                            Quick answers to the most common questions.\r\n                        </p>\r\n                    </div>\r\n\r\n                    <div className=\"mx-auto mt-10 max-w-3xl space-y-3 md:mt-14\">\r\n                        {faq.map((item, idx) => (\r\n                            <div key={item.q} className=\"animate-in fade-in slide-in-from-bottom-4 duration-700\" style={{ animationDelay: `${200 + idx * 50}ms` }}>\r\n                                <FAQItem\r\n                                    item={item}\r\n                                    isOpen={openFaq === idx}\r\n                                    onToggle={() => setOpenFaq(openFaq === idx ? -1 : idx)}\r\n                                    isDark={isDark}\r\n                                />\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </section>\r\n\r\n            {/* FINAL CTA */}\r\n            <section className={cn(\r\n                \"relative overflow-hidden py-20 md:py-32 transition-colors duration-300\",\r\n                isDark\r\n                    ? \"bg-gradient-to-b from-slate-950 via-slate-900 to-slate-950\"\r\n                    : \"bg-gradient-to-b from-white via-blue-50/30 to-white\"\r\n            )}>\r\n                <div className=\"pointer-events-none absolute inset-0\">\r\n                    <div className={cn(\r\n                        \"absolute top-0 right-[-10%] h-[600px] w-[600px] rounded-full blur-3xl animate-blob\",\r\n                        isDark ? \"bg-orange-500/20\" : \"bg-orange-400/10\"\r\n                    )} />\r\n                    <div className={cn(\r\n                        \"absolute bottom-0 left-[-15%] h-[700px] w-[700px] rounded-full blur-3xl animate-blob animation-delay-2000\",\r\n                        isDark ? \"bg-blue-500/20\" : \"bg-blue-400/10\"\r\n                    )} />\r\n                    <div className={cn(\r\n                        \"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] rounded-full blur-3xl animate-blob animation-delay-4000\",\r\n                        isDark ? \"bg-orange-400/10\" : \"bg-orange-300/5\"\r\n                    )} />\r\n                </div>\r\n\r\n                <div className=\"container relative mx-auto px-4 md:px-6 z-10\">\r\n                    <div className={cn(\r\n                        \"mx-auto max-w-4xl rounded-3xl border backdrop-blur-2xl p-8 text-center shadow-2xl md:p-12 animate-in fade-in zoom-in-95 duration-1000\",\r\n                        isDark\r\n                            ? \"border-white/10 bg-white/5\"\r\n                            : \"border-blue-200 bg-white shadow-blue-500/10\"\r\n                    )}>\r\n                        <h3 className={cn(\r\n                            \"text-4xl font-bold tracking-tight md:text-5xl lg:text-6xl\",\r\n                            isDark ? \"text-white\" : \"text-slate-900\"\r\n                        )}>\r\n                            Ready to upgrade your next assignment?\r\n                        </h3>\r\n                        <p className={cn(\r\n                            \"mx-auto mt-6 max-w-2xl text-lg md:text-xl\",\r\n                            isDark ? \"text-slate-300\" : \"text-slate-600\"\r\n                        )}>\r\n                            Create a document, run diagnostics, and refine your work into a cleaner, more academic submission.\r\n                        </p>\r\n                        <div className=\"mt-8 flex flex-col items-center justify-center gap-4 sm:flex-row\">\r\n                            <Link to=\"/signup\" className=\"w-full sm:w-auto group\">\r\n                                <Button size=\"lg\" className=\"w-full sm:w-auto h-14 px-8 text-base font-semibold bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white shadow-2xl shadow-orange-500/30 border-0 transition-all duration-300 hover:scale-105\">\r\n                                    Start Free <ArrowRight className=\"ml-2 h-5 w-5 group-hover:translate-x-1 transition-transform\" />\r\n                                </Button>\r\n                            </Link>\r\n                            <Link to=\"/pricing\" className=\"w-full sm:w-auto\">\r\n                                <Button variant=\"outline\" size=\"lg\" className={cn(\r\n                                    \"w-full sm:w-auto h-14 px-8 text-base font-semibold backdrop-blur-md transition-all duration-300 hover:scale-105\",\r\n                                    isDark\r\n                                        ? \"bg-white/5 border-white/20 text-white hover:bg-white/10\"\r\n                                        : \"bg-white border-blue-200 text-blue-700 hover:bg-blue-50 shadow-sm\"\r\n                                )}>\r\n                                    View Pricing\r\n                                </Button>\r\n                            </Link>\r\n                        </div>\r\n                        <p className={cn(\r\n                            \"mt-6 text-sm\",\r\n                            isDark ? \"text-slate-400\" : \"text-slate-500\"\r\n                        )}>No credit card required. Cancel anytime.</p>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n\r\n            <Footer />\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\pages\\MaintenancePage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\pages\\Pricing.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\services\\adminService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\services\\aiService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\services\\blogService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\services\\documentsService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\services\\feedbackService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\services\\notificationsService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\services\\paymentsService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\src\\services\\usersService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\HP\\Documents\\GitHub\\Docley-WebApp\\Docley\\vite.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]